(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5577],{67724:function(b,f,t){"use strict";t.d(f,{Z:function(){return n}});var c=t(28991),_=t(67294),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},O=D,A=t(27029),I=function(R,m){return _.createElement(A.Z,(0,c.Z)((0,c.Z)({},R),{},{ref:m,icon:O}))};I.displayName="LeftOutlined";var n=_.forwardRef(I)},19273:function(b,f,t){"use strict";t.d(f,{Z:function(){return c}});function c(_){if(_==null)throw new TypeError("Cannot destructure undefined")}},12082:function(b){b.exports={container:"container___1jNY3",form:"form___1CBBu",field:"field___3TcbM",title:"title___PYs1Y",adIdsTable:"adIdsTable___w53jW",previewTable:"previewTable___2wdrH",btnContainer:"btnContainer___32rfM"}},51406:function(b,f,t){"use strict";var c=t(22385),_=t(31097),D=t(11849),O=t(28986),A=t(67294),I=t(13999),n=t(85893),y=function(m){var C,E,L,s,e=m.ad,a=m.kolIcon,p=(0,D.Z)((0,D.Z)({},e),{},{kolIcon:(C=e.kolIcon)!==null&&C!==void 0?C:a,tag:(E=e.tag)!==null&&E!==void 0?E:(e==null?void 0:e.instructions)&&(e==null?void 0:e.instructions[0])&&(e==null?void 0:e.instructions[0].tag),poster:(L=e.poster)!==null&&L!==void 0?L:e.media}),u=(s=e==null?void 0:e.sponsorName)!==null&&s!==void 0?s:"Parami",g=u.length>15?"".concat(u.slice(0,6),"...").concat(u.slice(-6)):null,U=e!=null&&e.contractAddress&&e!==null&&e!==void 0&&e.tokenId?(0,n.jsx)("a",{href:"https://opensea.io/assets/ethereum/".concat(e.contractAddress,"/").concat(e.tokenId),target:"_blank",children:"hNFT"}):"hNFT",l=(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"ownerInfo",children:(0,n.jsx)(_.Z,{title:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{children:["\u{1F4E2} This ",U," is reserved."]}),(0,n.jsx)("a",{className:"claimLink",href:"/claimHnft/".concat(e.nftId),target:"_blank",children:"I am the owner"})]}),children:(0,n.jsx)("span",{className:"claimInfoMark",children:(0,n.jsx)("i",{className:"fa-solid fa-circle-exclamation"})})})})});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"advertisementContainer",children:(0,n.jsxs)(n.Fragment,{children:[l,(0,n.jsxs)("div",{className:"sponsorInfo",children:[(e==null?void 0:e.icon)&&(0,n.jsx)("img",{referrerPolicy:"no-referrer",className:"sponsorIcon",src:e==null?void 0:e.icon}),(0,n.jsxs)("span",{className:"sponsorText",children:[e.type===O.Sg.AD&&(0,n.jsxs)(n.Fragment,{children:[!!g&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(_.Z,{title:u,children:(0,n.jsx)("span",{className:"sponsorName",children:g})})}),!g&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"sponsorName",children:u})}),(0,n.jsxs)("span",{children:["is sponsoring this ",U,". "]})]}),e.type===O.Sg.CLOCK_IN&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("span",{children:[e==null?void 0:e.assetName," NFT Power "]})}),(0,n.jsx)("a",{className:"bidLink",href:"/bid/".concat(e.nftId),target:"_blank",children:"Bid on this ad space"})]})]}),(0,n.jsx)(I.Z,{ad:p,preview:!0})]})})})};f.Z=y},55410:function(b,f,t){"use strict";t.d(f,{n:function(){return c}});var c;(function(_){_.ICON="icon",_.POSTER="poster"})(c||(c={}))},91087:function(b,f,t){"use strict";t.d(f,{p:function(){return c}});var c=24*60*60/12},49241:function(b,f,t){"use strict";t.r(f);var c=t(95936),_=t(80274),D=t(43185),O=t(35372),A=t(57663),I=t(71577),n=t(20136),y=t(55241),R=t(74379),m=t(38648),C=t(3182),E=t(2824),L=t(19273),s=t(94043),e=t.n(s),a=t(51406),p=t(46656),u=t(51625),g=t(28986),U=t(55410),l=t(91087),N=t(61715),Z=t(32689),F=t(84986),k=t(94452),T=t(84391),P=t(67294),x=t(43581),ae=t(12082),B=t.n(ae),r=t(85893);function se(re){(0,L.Z)(re);var ie=(0,x.tT)("apiWs"),oe=(0,x.tT)("currentUser"),H=oe.wallet,le=(0,P.useState)([]),V=(0,E.Z)(le,2),w=V[0],_e=V[1],de=(0,P.useState)([]),z=(0,E.Z)(de,2),Y=z[0],ue=z[1],ce=(0,P.useState)(""),G=(0,E.Z)(ce,2),J=G[0],me=G[1],fe=(0,P.useState)(!1),X=(0,E.Z)(fe,2),ve=X[0],$=X[1],pe=(0,P.useState)([]),Q=(0,E.Z)(pe,2),q=Q[0],Ee=Q[1],he=(0,P.useState)([]),ee=(0,E.Z)(he,2),te=ee[0],ge=ee[1],ne=function(){var v=(0,C.Z)(e().mark(function h(o,j){var d,W,S,i,K;return e().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,Z.nH)(o);case 2:if(d=M.sent,d.data.type!=="image/gif"){M.next=5;break}return M.abrupt("return",o);case 5:return M.next=7,(0,k.q)(d.data,j);case 7:return W=M.sent,M.next=10,(0,F.U)(W);case 10:return S=M.sent,i=S.data,K=u.Z.ipfs.endpoint+i.Hash,console.log("compressed:",K),M.abrupt("return",K);case 15:case"end":return M.stop()}},h)}));return function(o,j){return v.apply(this,arguments)}}(),Pe=function(){var v=(0,C.Z)(e().mark(function h(o){return e().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!o.icon){d.next=4;break}return d.next=3,ne(o.icon,U.n.ICON);case 3:o.icon=d.sent;case 4:if(!o.poster){d.next=8;break}return d.next=7,ne(o.poster,U.n.POSTER);case 7:o.poster=d.sent;case 8:return d.abrupt("return",(0,k.T)(o));case 9:case"end":return d.stop()}},h)}));return function(o){return v.apply(this,arguments)}}();(0,P.useEffect)(function(){w.length&&(m.default.info({message:"Preparing ad data..."}),Promise.all(w.map(function(v){return Pe(v)})).then(function(v){m.default.success({message:"Ready to create"}),ge(w),ue(v)}).catch(function(v){m.default.error({message:"Generate Ad Config Error",description:JSON.stringify(v)})}))},[w]);var Me=function(h){if(console.log("reading file",h),h.type!=="text/tab-separated-values")return m.default.error({message:"File Type Error",description:"Please upload tsv (tab-separated-values) file"}),!1;var o=new FileReader;return o.onload=function(j){var d=j.target.result.split(`
`).slice(1),W=d.map(function(S){var i=S.split("	");return{type:g.Sg.AD,title:i[1],poster:"".concat(i[3]?u.Z.ipfs.endpoint+i[3]:""),icon:"".concat(i[5]?u.Z.ipfs.endpoint+i[5]:""),content:i[6],sponsorName:i[7],instructions:[{text:i[8],tag:"Social Media",score:1,link:i[9]}],rewardRate:parseInt(i[10],10),payoutBase:parseInt(i[11],10),payoutMin:parseInt(i[12],10),payoutMax:parseInt(i[13],10),lifetime:l.p*2}});console.log("got ad infos",W),_e(W)},o.readAsText(h),!1},De=function(){var v=(0,C.Z)(e().mark(function h(o,j){var d,W;return e().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o||m.default.info({message:"Creating Ads",description:"This might take a while. Please wait..."}),i.next=3,(0,N.ZU)(Y,J,H==null?void 0:H.keystore,o,j);case 3:if(d=i.sent,!(o&&j)){i.next=6;break}return i.abrupt("return",d);case 6:W=d.map(function(K){return K.ad.Created[0][0]}),Ee(W),$(!1),m.default.success({message:"Ad Create Success"});case 10:case"end":return i.stop()}},h)}));return function(o,j){return v.apply(this,arguments)}}(),Oe=[{title:"Title",dataIndex:"title"},{title:"Content",dataIndex:"content"},{title:"Sponsor Name",dataIndex:"sponsorName"},{title:"Preview",render:function(h,o){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.Z,{content:(0,r.jsx)("div",{style:{marginTop:"40px"},children:(0,r.jsx)(a.Z,{ad:o})}),trigger:"hover",children:(0,r.jsx)("a",{children:"preview"})})})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:B().container,children:[(0,r.jsx)("div",{className:B().form,children:(0,r.jsxs)("div",{className:B().field,children:[(0,r.jsx)("div",{className:B().title,children:"upload tsv (tab-separated-values)"}),(0,r.jsx)("div",{className:B().content,children:(0,r.jsx)(O.Z,{beforeUpload:Me,children:(0,r.jsx)(I.Z,{icon:(0,r.jsx)(T.Z,{}),children:"Upload"})})})]})}),te.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:B().previewTable,children:(0,r.jsx)(_.Z,{dataSource:te,columns:Oe,pagination:!1})}),(0,r.jsx)("div",{className:B().btnContainer,children:(0,r.jsx)(I.Z,{onClick:function(){$(!0)},disabled:!ie||!Y.length,children:"Batch Create Ads"})})]}),q.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:B().adIdsTable,children:(0,r.jsx)(_.Z,{pagination:!1,dataSource:q.map(function(v){return{id:v}}),columns:[{title:"Ad id",dataIndex:"id",key:"id"}]})})})]}),(0,r.jsx)(p.Z,{visable:ve,setVisable:$,passphrase:J,setPassphrase:me,func:De})]})}f.default=se},94452:function(b,f,t){"use strict";t.d(f,{q:function(){return E},T:function(){return L}});var c=t(86582),_=t(11849),D=t(3182),O=t(94043),A=t.n(O),I=t(51625),n=t(55410),y=t(84986),R=t(41741),m=t(96534),C=t(48764).Buffer,E=function(){var s=(0,D.Z)(A().mark(function e(a,p){var u,g;return A().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a.type!=="image/gif"){l.next=2;break}return l.abrupt("return",a);case 2:return u=p===n.n.ICON?{maxSizeMB:.1,maxWidthOrHeight:60,useWebWorker:!0}:{maxSizeMB:.5,maxWidthOrHeight:400,useWebWorker:!0},l.prev=3,l.next=6,(0,R.Z)(a,u);case 6:return g=l.sent,l.abrupt("return",g);case 10:return l.prev=10,l.t0=l.catch(3),console.log("image compression failed",l.t0),l.abrupt("return",a);case 14:case"end":return l.stop()}},e,null,[[3,10]])}));return function(a,p){return s.apply(this,arguments)}}(),L=function(){var s=(0,D.Z)(A().mark(function e(a){var p,u,g,U,l,N,Z,F;return A().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return p={media:a.poster,icon:a.icon,content:a.content,instructions:a.instructions.map(function(P){var x;return(0,_.Z)((0,_.Z)({},P),{},{link:encodeURIComponent((x=P.link)!==null&&x!==void 0?x:"")})}),sponsorName:a.sponsorName},T.next=3,C.from(JSON.stringify(p));case 3:return u=T.sent,T.next=6,(0,y.U)(u);case 6:if(g=T.sent,U=g.response,l=g.data,U.ok){T.next=11;break}throw"Create Metadata Error";case 11:return N="ipfs://".concat(l.Hash),Z=(0,m.Zc)(I.Z.advertisement.defaultDelegatedDid),F=Array.from(new Set((0,c.Z)(a.instructions.map(function(P){return P.tag}).filter(Boolean)))),T.abrupt("return",{tags:F,metadata:N,rewardRate:a.rewardRate.toString(),lifetime:a.lifetime,payoutBase:(0,m.Vm)(a.payoutBase.toString()),payoutMin:(0,m.Vm)(a.payoutMin.toString()),payoutMax:(0,m.Vm)(a.payoutMax.toString()),delegatedAccount:Z});case 15:case"end":return T.stop()}},e)}));return function(a){return s.apply(this,arguments)}}()},27678:function(b,f,t){"use strict";t.d(f,{g1:function(){return C},os:function(){return L}});var c=/margin|padding|width|height|max|min|offset/,_={left:!0,top:!0},D={cssFloat:1,styleFloat:1,float:1};function O(s){return s.nodeType===1?s.ownerDocument.defaultView.getComputedStyle(s,null):{}}function A(s,e,a){if(e=e.toLowerCase(),a==="auto"){if(e==="height")return s.offsetHeight;if(e==="width")return s.offsetWidth}return e in _||(_[e]=c.test(e)),_[e]?parseFloat(a)||0:a}function I(s,e){var a=arguments.length,p=O(s);return e=D[e]?"cssFloat"in s.style?"cssFloat":"styleFloat":e,a===1?p:A(s,e,p[e]||s.style[e])}function n(s,e,a){var p=arguments.length;if(e=D[e]?"cssFloat"in s.style?"cssFloat":"styleFloat":e,p===3)return typeof a=="number"&&c.test(e)&&(a="".concat(a,"px")),s.style[e]=a,a;for(var u in e)e.hasOwnProperty(u)&&n(s,u,e[u]);return O(s)}function y(s){return s===document.body?document.documentElement.clientWidth:s.offsetWidth}function R(s){return s===document.body?window.innerHeight||document.documentElement.clientHeight:s.offsetHeight}function m(){var s=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:s,height:e}}function C(){var s=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:s,height:e}}function E(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function L(s){var e=s.getBoundingClientRect(),a=document.documentElement;return{left:e.left+(window.pageXOffset||a.scrollLeft)-(a.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||a.scrollTop)-(a.clientTop||document.body.clientTop||0)}}}}]);
