(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[9811],{55133:function(E){E.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(E){E.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},66620:function(E){E.exports={visaCard:"visaCard___bphzJ",subTitle:"subTitle___1LQU-",buttons:"buttons___2add8",or:"or___2GkXi",button:"button___1CjWQ"}},46656:function(E,T,e){"use strict";var ie=e(71194),b=e(50146),G=e(47673),U=e(32787),z=e(22385),j=e(31097),re=e(17462),I=e(76772),V=e(57663),A=e(71577),X=e(74379),J=e(38648),q=e(3182),$=e(2824),oe=e(402),L=e(3887),ee=e(94043),W=e.n(ee),P=e(67294),M=e(43581),se=e(55133),t=e.n(se),ae=e(3548),p=e(68855),x=e(47832),le=e(55347),i=e(51625),n=e(85893),ne=L.Z.Title,de=function(_){var g=_.visable,N=_.setVisable,s=_.passphrase,D=_.setPassphrase,S=_.func,O=_.changePassphrase,B=(0,M.tT)("apiWs"),te=(0,M.tT)("currentUser"),a=te.wallet,_e=(0,M.tT)("balance"),H=_e.balance,y=(0,P.useState)(!1),K=(0,$.Z)(y,2),Z=K[0],f=K[1],Y=(0,P.useState)(),Q=(0,$.Z)(Y,2),u=Q[0],C=Q[1],d=(0,M.YB)(),h=function(o){D(o?o.target.value:"")},R=function(){var m=(0,q.Z)(W().mark(function o(){var c,v,r,F,k;return W().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(f(!0),a!=null&&a.passphrase&&D(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){l.next=5;break}return f(!1),l.abrupt("return");case 5:if(c=(a==null?void 0:a.passphrase)||s,!(c&&a!==null&&a!==void 0&&a.keystore)){l.next=16;break}if(v=(0,x.Gh)(c,a.keystore),v){l.next=13;break}return J.default.error({key:"passphraseError",message:d.formatMessage({id:"error.passphrase.error"}),duration:null}),D(""),f(!1),l.abrupt("return");case 13:r=new le.ZP({type:"sr25519"}),F=r.addFromUri(v),k=F.address,a!=null&&a.account&&a.account!==k&&(localStorage.clear(),sessionStorage.clear(),window.location.href=i.Z.page.homePage);case 16:if(!S){l.next=25;break}return l.prev=17,l.next=20,S();case 20:l.next=25;break;case 22:l.prev=22,l.t0=l.catch(17),console.log("security modal submit func error fallback",l.t0);case 25:N(!1),f(!1);case 27:case"end":return l.stop()}},o,null,[[17,22]])}));return function(){return m.apply(this,arguments)}}(),w=function(){var m=(0,q.Z)(W().mark(function o(){var c;return W().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(!!B&&!!a.account)){r.next=11;break}return r.next=3,S(!0,a.account);case 3:if(c=r.sent,!c){r.next=8;break}C(c.partialFee),r.next=11;break;case 8:if(O){r.next=11;break}return r.next=11,R();case 11:case"end":return r.stop()}},o)}));return function(){return m.apply(this,arguments)}}();return(0,P.useEffect)(function(){!!B&&!!(a!=null&&a.account)&&g&&w()},[B,a==null?void 0:a.account,g]),(0,P.useEffect)(function(){!!(a!=null&&a.passphrase)&&g&&!O&&D(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,g,O]),(0,n.jsxs)(b.Z,{title:(0,n.jsx)(ne,{level:3,children:d.formatMessage({id:"modal.security.title"})}),closable:!1,className:t().modal,centered:!0,visible:g,width:400,footer:(0,n.jsxs)("div",{className:t().buttons,children:[(0,n.jsx)(A.Z,{type:"text",shape:"round",size:"large",className:t().button,onClick:function(){N(!1),window.location.reload()},loading:Z,children:d.formatMessage({id:"common.decline"})}),(0,n.jsx)(A.Z,{type:"primary",shape:"round",size:"large",className:t().button,onClick:function(){R()},disabled:!s||s.length<6,loading:Z,children:d.formatMessage({id:"common.confirm"})})]}),children:[(0,n.jsxs)("div",{className:t().confirmContainer,children:[!!u&&!!(u!=null&&u.toString())>H.free&&(0,n.jsx)(I.Z,{description:d.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:t().alertContainer}),!!u&&(0,n.jsxs)("div",{className:t().field,children:[(0,n.jsxs)("div",{className:t().labal,children:[d.formatMessage({id:"modal.security.gas"}),(0,n.jsxs)("span",{className:t().small,children:["(",d.formatMessage({id:"modal.security.estimated"}),")"]}),(0,n.jsx)(j.Z,{placement:"bottom",title:d.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,n.jsx)(p.Z,{className:t().labalIcon})})]}),(0,n.jsx)("div",{className:t().value,children:(0,n.jsx)(ae.Z,{value:u,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||O)&&(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,n.jsxs)("div",{className:t().codeInput,children:[(0,n.jsxs)("div",{className:t().verifyForm,children:[(0,n.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&t().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,n.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&t().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,n.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&t().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,n.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&t().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,n.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,n.jsx)("span",{className:(s==null?void 0:s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,n.jsx)(U.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:t().verifyInput,onChange:h,value:s,disabled:Z,maxLength:6,visibilityToggle:!1})]})})]})};T.Z=de},3548:function(E,T,e){"use strict";var ie=e(67294),b=e(31639),G=e.n(b),U=e(96534),z=e(85893),j=function(I){var V=I.value,A=I.style;return(0,z.jsxs)("div",{className:G().ad3,style:A,children:[V?(0,U.MP)(V):"--",(0,z.jsx)("span",{className:G().unit,children:"\xA0$AD3"})]})};T.Z=j},62066:function(E,T,e){"use strict";e.r(T);var ie=e(58024),b=e(39144),G=e(57663),U=e(71577),z=e(17462),j=e(76772),re=e(74379),I=e(38648),V=e(34792),A=e(48086),X=e(3182),J=e(2824),q=e(402),$=e(3887),oe=e(94043),L=e.n(oe),ee=e(46656),W=e(63667),P=e(67294),M=e(43581),se=e(55909),t=e.n(se),ae=e(66620),p=e.n(ae),x=e(59749),le=e(47832),i=e(85893),n=$.Z.Title,ne=function(){var ue=(0,M.tT)("currentUser"),_=ue.wallet,g=(0,P.useState)(!1),N=(0,J.Z)(g,2),s=N[0],D=N[1],S=(0,P.useState)(""),O=(0,J.Z)(S,2),B=O[0],te=O[1],a=(0,M.YB)(),_e=M.m8.location.query,H=_e,y=H.audience,K=H.scope,Z=K!=null?K:"",f=Z.indexOf("sign")>-1,Y=function(){var u=(0,X.Z)(L().mark(function C(d,h){var R,w,m,o,c,v,r,F,k;return L().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(d&&h)){l.next=2;break}return l.abrupt("return");case 2:if(!(!!_&&!!(_!=null&&_.keystore))){l.next=23;break}if(R=Date.now()/1e3|0,w=JSON.stringify({alg:f?"SrDSA":"none",typ:"JWT"}),m=JSON.stringify({iss:window.location.origin,sub:_==null?void 0:_.account,aud:y,iat:R,exp:R+30}),o="".concat((0,x.tH)(w),".").concat((0,x.tH)(m)),f){l.next=11;break}return window.opener.postMessage("".concat(o,"."),y),window.close(),l.abrupt("return");case 11:if(c=new W.Y({type:"sr25519"}),v=(0,le.Gh)(B,_==null?void 0:_.keystore),!(v==null||!v)){l.next=16;break}return A.default.error(a.formatMessage({id:"error.passphrase.error"})),l.abrupt("return");case 16:r=c.createFromUri(v),F=r.sign(o),k="".concat(o,".").concat((0,x.tH)(F)),window.opener.postMessage(k,y),window.close(),l.next=24;break;case 23:I.default.error({key:"accessDenied",message:a.formatMessage({id:"error.accessDenied"}),duration:null});case 24:case"end":return l.stop()}},C)}));return function(d,h){return u.apply(this,arguments)}}(),Q=function(){var u=(0,X.Z)(L().mark(function C(){return L().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:window.opener.postMessage("eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.e30.",y),window.close();case 2:case"end":return h.stop()}},C)}));return function(){return u.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:t().mainBgContainer,style:{height:"100vh"},children:(0,i.jsxs)("div",{className:t().pageContainer,children:[(0,i.jsxs)(b.Z,{className:p().visaCard,children:[(0,i.jsx)(n,{level:2,style:{fontWeight:"bold",textAlign:"center"},children:a.formatMessage({id:"visa.title"})}),(0,i.jsx)("span",{className:p().subTitle,children:a.formatMessage({id:"visa.subtitle"})}),(0,i.jsx)(j.Z,{style:{textAlign:"center",marginTop:50},message:"Audience",description:y,type:"info"}),(0,i.jsxs)("div",{className:p().buttons,children:[(0,i.jsx)(U.Z,{type:"primary",shape:"round",size:"large",className:p().button,style:{backgroundImage:"linear-gradient(-225deg, #FE2105 0%, #FF5B00 38%, #96E9EA 100%)"},onClick:function(){f?D(!0):Y()},children:a.formatMessage({id:"visa.stamp"})}),(0,i.jsx)("span",{className:p().or,children:a.formatMessage({id:"index.or"})}),(0,i.jsx)(U.Z,{shape:"round",size:"large",className:p().button,onClick:Q,children:a.formatMessage({id:"visa.decline"})})]})]}),(0,i.jsx)("img",{src:"/images/logo-text-black.svg",style:{display:"block",width:150,opacity:.3,marginBottom:20,marginTop:50}})]})}),(0,i.jsx)(ee.Z,{visable:s,setVisable:D,passphrase:B,setPassphrase:te,func:Y})]})};T.default=ne}}]);
