(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5577],{67724:function(C,m,e){"use strict";e.d(m,{Z:function(){return y}});var v=e(28991),u=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},M=T,U=e(27029),O=function(B,c){return u.createElement(U.Z,(0,v.Z)((0,v.Z)({},B),{},{ref:c,icon:M}))};O.displayName="LeftOutlined";var y=u.forwardRef(O)},19273:function(C,m,e){"use strict";e.d(m,{Z:function(){return v}});function v(u){if(u==null)throw new TypeError("Cannot destructure undefined")}},12082:function(C){C.exports={container:"container___1jNY3",form:"form___1CBBu",field:"field___3TcbM",title:"title___PYs1Y",adIdsTable:"adIdsTable___w53jW",previewTable:"previewTable___2wdrH",btnContainer:"btnContainer___32rfM"}},49241:function(C,m,e){"use strict";e.r(m);var v=e(95936),u=e(80274),T=e(43185),M=e(35372),U=e(57663),O=e(71577),y=e(20136),b=e(55241),B=e(74379),c=e(38648),A=e(3182),h=e(2824),S=e(19273),n=e(94043),t=e.n(n),o=e(51406),D=e(46656),g=e(51625),x=e(55410),Q=e(91087),k=e(61715),q=e(32689),ee=e(84986),K=e(94452),te=e(84391),P=e(67294),Z=e(43581),ne=e(12082),p=e.n(ne),a=e(85893);function ae(se){(0,S.Z)(se);var re=(0,Z.tT)("apiWs"),ie=(0,Z.tT)("currentUser"),R=ie.wallet,oe=(0,P.useState)([]),w=(0,h.Z)(oe,2),W=w[0],le=w[1],de=(0,P.useState)([]),F=(0,h.Z)(de,2),N=F[0],_e=F[1],ue=(0,P.useState)(""),H=(0,h.Z)(ue,2),V=H[0],ce=H[1],fe=(0,P.useState)(!1),Y=(0,h.Z)(fe,2),me=Y[0],j=Y[1],ve=(0,P.useState)([]),$=(0,h.Z)(ve,2),z=$[0],pe=$[1],Ee=(0,P.useState)([]),G=(0,h.Z)(Ee,2),X=G[0],he=G[1],J=function(){var l=(0,A.Z)(t().mark(function d(r,f){var i,E,I,s,L;return t().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,q.nH)(r);case 2:if(i=_.sent,i.data.type!=="image/gif"){_.next=5;break}return _.abrupt("return",r);case 5:return _.next=7,(0,K.q)(i.data,f);case 7:return E=_.sent,_.next=10,(0,ee.U)(E);case 10:return I=_.sent,s=I.data,L=g.Z.ipfs.endpoint+s.Hash,console.log("compressed:",L),_.abrupt("return",L);case 15:case"end":return _.stop()}},d)}));return function(r,f){return l.apply(this,arguments)}}(),ge=function(){var l=(0,A.Z)(t().mark(function d(r){return t().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!r.icon){i.next=4;break}return i.next=3,J(r.icon,x.n.ICON);case 3:r.icon=i.sent;case 4:if(!r.poster){i.next=8;break}return i.next=7,J(r.poster,x.n.POSTER);case 7:r.poster=i.sent;case 8:return i.abrupt("return",(0,K.T)(r));case 9:case"end":return i.stop()}},d)}));return function(r){return l.apply(this,arguments)}}();(0,P.useEffect)(function(){W.length&&(c.default.info({message:"Preparing ad data..."}),Promise.all(W.map(function(l){return ge(l)})).then(function(l){c.default.success({message:"Ready to create"}),he(W),_e(l)}).catch(function(l){c.default.error({message:"Generate Ad Config Error",description:JSON.stringify(l)})}))},[W]);var Pe=function(d){if(console.log("reading file",d),d.type!=="text/tab-separated-values")return c.default.error({message:"File Type Error",description:"Please upload tsv (tab-separated-values) file"}),!1;var r=new FileReader;return r.onload=function(f){var i=f.target.result.split(`
`).slice(1),E=i.map(function(I){var s=I.split("	");return{title:s[1],poster:"".concat(s[3]?g.Z.ipfs.endpoint+s[3]:""),icon:"".concat(s[5]?g.Z.ipfs.endpoint+s[5]:""),content:s[6],sponsorName:s[7],instructions:[{text:s[8],tag:"Social Media",score:1,link:s[9]}],rewardRate:parseInt(s[10],10),payoutBase:parseInt(s[11],10),payoutMin:parseInt(s[12],10),payoutMax:parseInt(s[13],10),lifetime:Q.p*2}});console.log("got ad infos",E),le(E)},r.readAsText(d),!1},Me=function(){var l=(0,A.Z)(t().mark(function d(r,f){var i,E;return t().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r||c.default.info({message:"Creating Ads",description:"This might take a while. Please wait..."}),s.next=3,(0,k.ZU)(N,V,R==null?void 0:R.keystore,r,f);case 3:if(i=s.sent,!(r&&f)){s.next=6;break}return s.abrupt("return",i);case 6:E=i.map(function(L){return L.ad.Created[0][0]}),pe(E),j(!1),c.default.success({message:"Ad Create Success"});case 10:case"end":return s.stop()}},d)}));return function(r,f){return l.apply(this,arguments)}}(),Oe=[{title:"Title",dataIndex:"title"},{title:"Content",dataIndex:"content"},{title:"Sponsor Name",dataIndex:"sponsorName"},{title:"Preview",render:function(d,r){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(b.Z,{content:(0,a.jsx)("div",{style:{marginTop:"40px"},children:(0,a.jsx)(o.Z,{ad:r})}),trigger:"hover",children:(0,a.jsx)("a",{children:"preview"})})})}}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:p().container,children:[(0,a.jsx)("div",{className:p().form,children:(0,a.jsxs)("div",{className:p().field,children:[(0,a.jsx)("div",{className:p().title,children:"upload tsv (tab-separated-values)"}),(0,a.jsx)("div",{className:p().content,children:(0,a.jsx)(M.Z,{beforeUpload:Pe,children:(0,a.jsx)(O.Z,{icon:(0,a.jsx)(te.Z,{}),children:"Upload"})})})]})}),X.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:p().previewTable,children:(0,a.jsx)(u.Z,{dataSource:X,columns:Oe,pagination:!1})}),(0,a.jsx)("div",{className:p().btnContainer,children:(0,a.jsx)(O.Z,{onClick:function(){j(!0)},disabled:!re||!N.length,children:"Batch Create Ads"})})]}),z.length>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:p().adIdsTable,children:(0,a.jsx)(u.Z,{pagination:!1,dataSource:z.map(function(l){return{id:l}}),columns:[{title:"Ad id",dataIndex:"id",key:"id"}]})})})]}),(0,a.jsx)(D.Z,{visable:me,setVisable:j,passphrase:V,setPassphrase:ce,func:Me})]})}m.default=ae},27678:function(C,m,e){"use strict";e.d(m,{g1:function(){return A},os:function(){return S}});var v=/margin|padding|width|height|max|min|offset/,u={left:!0,top:!0},T={cssFloat:1,styleFloat:1,float:1};function M(n){return n.nodeType===1?n.ownerDocument.defaultView.getComputedStyle(n,null):{}}function U(n,t,o){if(t=t.toLowerCase(),o==="auto"){if(t==="height")return n.offsetHeight;if(t==="width")return n.offsetWidth}return t in u||(u[t]=v.test(t)),u[t]?parseFloat(o)||0:o}function O(n,t){var o=arguments.length,D=M(n);return t=T[t]?"cssFloat"in n.style?"cssFloat":"styleFloat":t,o===1?D:U(n,t,D[t]||n.style[t])}function y(n,t,o){var D=arguments.length;if(t=T[t]?"cssFloat"in n.style?"cssFloat":"styleFloat":t,D===3)return typeof o=="number"&&v.test(t)&&(o="".concat(o,"px")),n.style[t]=o,o;for(var g in t)t.hasOwnProperty(g)&&y(n,g,t[g]);return M(n)}function b(n){return n===document.body?document.documentElement.clientWidth:n.offsetWidth}function B(n){return n===document.body?window.innerHeight||document.documentElement.clientHeight:n.offsetHeight}function c(){var n=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:n,height:t}}function A(){var n=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:t}}function h(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function S(n){var t=n.getBoundingClientRect(),o=document.documentElement;return{left:t.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||document.body.clientTop||0)}}}}]);
