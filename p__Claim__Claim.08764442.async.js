(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[2627],{19273:function(i,d,e){"use strict";e.d(d,{Z:function(){return L}});function L(D){if(D==null)throw new TypeError("Cannot destructure undefined")}},55133:function(i){i.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(i){i.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},2752:function(i){i.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},8556:function(i){i.exports={scoreContainer:"scoreContainer___1bJza",positive:"positive___p0hU_",negative:"negative___1XWM_"}},28531:function(i){i.exports={tag:"tag___sah2p"}},69764:function(i,d,e){"use strict";var L=e(71194),D=e(50146),h=e(57663),E=e(71577),p=e(402),m=e(3887),M=e(67294),g=e(55133),I=e.n(g),u=e(54549),f=e(85893),H=m.Z.Title,z=function(U){var Q=U.visable,S=U.title,W=U.content,R=U.footer,K=U.close,X=U.bodyStyle,n=U.width;return(0,f.jsx)(D.Z,{title:S?(0,f.jsx)(H,{level:5,className:I().title,children:S}):null,closable:!!K,closeIcon:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(E.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,f.jsx)(u.Z,{onClick:K})})}),className:I().modal,centered:!0,visible:Q,width:n!=null?n:650,footer:R,bodyStyle:X,children:W})};d.Z=z},46656:function(i,d,e){"use strict";var L=e(71194),D=e(50146),h=e(47673),E=e(32787),p=e(22385),m=e(31097),M=e(17462),g=e(76772),I=e(57663),u=e(71577),f=e(74379),H=e(38648),z=e(3182),G=e(2824),U=e(402),Q=e(3887),S=e(94043),W=e.n(S),R=e(67294),K=e(43581),X=e(55133),n=e.n(X),se=e(3548),ie=e(68855),Z=e(47832),ae=e(55347),x=e(51625),l=e(85893),q=Q.Z.Title,ne=function(j){var b=j.visable,c=j.setVisable,s=j.passphrase,N=j.setPassphrase,k=j.func,V=j.changePassphrase,Y=(0,K.tT)("apiWs"),_e=(0,K.tT)("currentUser"),a=_e.wallet,J=(0,K.tT)("balance"),le=J.balance,re=(0,R.useState)(!1),O=(0,G.Z)(re,2),w=O[0],F=O[1],te=(0,R.useState)(),ee=(0,G.Z)(te,2),o=ee[0],A=ee[1],t=(0,K.YB)(),T=function(_){N(_?_.target.value:"")},P=function(){var y=(0,z.Z)(W().mark(function _(){var r,$,C,de,ue;return W().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(F(!0),a!=null&&a.passphrase&&N(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){v.next=5;break}return F(!1),v.abrupt("return");case 5:if(r=(a==null?void 0:a.passphrase)||s,!(r&&a!==null&&a!==void 0&&a.keystore)){v.next=16;break}if($=(0,Z.Gh)(r,a.keystore),$){v.next=13;break}return H.default.error({key:"passphraseError",message:t.formatMessage({id:"error.passphrase.error"}),duration:null}),N(""),F(!1),v.abrupt("return");case 13:C=new ae.ZP({type:"sr25519"}),de=C.addFromUri($),ue=de.address,a!=null&&a.account&&a.account!==ue&&(localStorage.clear(),sessionStorage.clear(),window.location.href=x.Z.page.homePage);case 16:if(!k){v.next=25;break}return v.prev=17,v.next=20,k();case 20:v.next=25;break;case 22:v.prev=22,v.t0=v.catch(17),console.log("security modal submit func error fallback",v.t0);case 25:c(!1),F(!1);case 27:case"end":return v.stop()}},_,null,[[17,22]])}));return function(){return y.apply(this,arguments)}}(),B=function(){var y=(0,z.Z)(W().mark(function _(){var r;return W().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(!!Y&&!!a.account)){C.next=11;break}return C.next=3,k(!0,a.account);case 3:if(r=C.sent,!r){C.next=8;break}A(r.partialFee),C.next=11;break;case 8:if(V){C.next=11;break}return C.next=11,P();case 11:case"end":return C.stop()}},_)}));return function(){return y.apply(this,arguments)}}();return(0,R.useEffect)(function(){!!Y&&!!(a!=null&&a.account)&&b&&B()},[Y,a==null?void 0:a.account,b]),(0,R.useEffect)(function(){!!(a!=null&&a.passphrase)&&b&&!V&&N(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,b,V]),(0,l.jsxs)(D.Z,{title:(0,l.jsx)(q,{level:3,children:t.formatMessage({id:"modal.security.title"})}),closable:!1,className:n().modal,centered:!0,visible:b,width:400,footer:(0,l.jsxs)("div",{className:n().buttons,children:[(0,l.jsx)(u.Z,{type:"text",shape:"round",size:"large",className:n().button,onClick:function(){c(!1),window.location.reload()},loading:w,children:t.formatMessage({id:"common.decline"})}),(0,l.jsx)(u.Z,{type:"primary",shape:"round",size:"large",className:n().button,onClick:function(){P()},disabled:!s||s.length<6,loading:w,children:t.formatMessage({id:"common.confirm"})})]}),children:[(0,l.jsxs)("div",{className:n().confirmContainer,children:[!!o&&!!(o!=null&&o.toString())>le.free&&(0,l.jsx)(g.Z,{description:t.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:n().alertContainer}),!!o&&(0,l.jsxs)("div",{className:n().field,children:[(0,l.jsxs)("div",{className:n().labal,children:[t.formatMessage({id:"modal.security.gas"}),(0,l.jsxs)("span",{className:n().small,children:["(",t.formatMessage({id:"modal.security.estimated"}),")"]}),(0,l.jsx)(m.Z,{placement:"bottom",title:t.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,l.jsx)(ie.Z,{className:n().labalIcon})})]}),(0,l.jsx)("div",{className:n().value,children:(0,l.jsx)(se.Z,{value:o,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||V)&&(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,l.jsxs)("div",{className:n().codeInput,children:[(0,l.jsxs)("div",{className:n().verifyForm,children:[(0,l.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&n().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&n().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&n().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&n().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,l.jsx)(E.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:n().verifyInput,onChange:T,value:s,disabled:w,maxLength:6,visibilityToggle:!1})]})})]})};d.Z=ne},3548:function(i,d,e){"use strict";var L=e(67294),D=e(31639),h=e.n(D),E=e(96534),p=e(85893),m=function(g){var I=g.value,u=g.style;return(0,p.jsxs)("div",{className:h().ad3,style:u,children:[I?(0,E.MP)(I):"--",(0,p.jsx)("span",{className:h().unit,children:"\xA0$AD3"})]})};d.Z=m},70279:function(i,d,e){"use strict";e.r(d);var L=e(19273),D=e(67294),h=e(51615),E=e(57641),p=e(85893);function m(M){(0,L.Z)(M);var g=(0,h.UO)(),I=g.adId,u=g.nftId;return(0,p.jsx)(p.Fragment,{children:I&&u&&(0,p.jsx)(E.Z,{adId:I,nftId:u,onClaim:function(){return window.close()},onClose:function(){return window.close()}})})}d.default=m},57641:function(i,d,e){"use strict";var L=e(57663),D=e(71577),h=e(20228),E=e(11382),p=e(74379),m=e(38648),M=e(3182),g=e(2824),I=e(94043),u=e.n(I),f=e(67294),H=e(69764),z=e(2752),G=e.n(z),U=e(32689),Q=e(46656),S=e(61715),W=e(43581),R=e(69854),K=e(11561),X=e(79762),n=e(85893),se=function(Z){var ae=Z.onClose,x=Z.adId,l=Z.nftId,q=Z.referrer,ne=q===void 0?null:q,oe=Z.onClaim,j=(0,f.useState)(),b=(0,g.Z)(j,2),c=b[0],s=b[1],N=(0,f.useState)(!1),k=(0,g.Z)(N,2),V=k[0],Y=k[1],_e=(0,f.useState)(""),a=(0,g.Z)(_e,2),J=a[0],le=a[1],re=(0,W.tT)("currentUser"),O=re.wallet,w=(0,W.YB)(),F=function(){var o=(0,M.Z)(u().mark(function A(){var t;return u().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,R.Wv)(x);case 2:t=P.sent,s({scores:(t!=null?t:[]).map(function(B){return{tag:B.name,score:-5}})});case 4:case"end":return P.stop()}},A)}));return function(){return o.apply(this,arguments)}}(),te=function(){var o=(0,M.Z)(u().mark(function A(){var t,T,P,B;return u().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,R.Wv)(x);case 3:t=_.sent,console.log(t),_.next=10;break;case 7:_.prev=7,_.t0=_.catch(0),console.log(_.t0);case 10:return _.prev=10,_.next=13,(0,U.Rh)(x,l,O==null?void 0:O.did);case 13:T=_.sent,P=T.response,B=T.data,P.ok?s(B):F(),_.next=23;break;case 19:_.prev=19,_.t1=_.catch(10),console.log(_.t1),F();case 23:case"end":return _.stop()}},A,null,[[0,7],[10,19]])}));return function(){return o.apply(this,arguments)}}();(0,f.useEffect)(function(){te()},[]);var ee=function(){var o=(0,M.Z)(u().mark(function A(t,T){var P,B,y;return u().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(O!=null&&O.keystore){r.next=3;break}return m.default.error({key:"accessDenied",message:w.formatMessage({id:"error.accessDenied"}),duration:null}),r.abrupt("return");case 3:if(r.prev=3,y=((P=c.scores)!==null&&P!==void 0?P:[]).map(function($){return[$.tag,$.score]}),!(c&&c.signature)){r.next=11;break}return r.next=8,(0,S.nm)(x,l,O==null?void 0:O.did,y,c.referer,c.signature,c.signer_account,J,O.keystore,t,T);case 8:B=r.sent,r.next=14;break;case 11:return r.next=13,(0,S.HS)(x,l,y,ne,J,O.keystore,t,T);case 13:B=r.sent;case 14:if(!(t&&T)){r.next=16;break}return r.abrupt("return",B);case 16:m.default.success({message:"Claim Token Success"}),oe(),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),console.log(r.t0),m.default.error({message:"Claim Ad Token Error",description:"".concat(r.t0)});case 24:case"end":return r.stop()}},A,null,[[3,20]])}));return function(t,T){return o.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.Z,{visable:!0,title:"Claim your token",content:(0,n.jsx)("div",{className:G().claimInfoContainer,children:(0,n.jsx)(E.Z,{spinning:!c,children:c&&c.scores&&c.scores.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Claim now and have your score updated:"}),c.scores.map(function(o){return(0,n.jsxs)("div",{className:G().scoreChange,children:[(0,n.jsx)(K.Z,{tag:o.tag}),(0,n.jsx)(X.Z,{score:parseInt(o.score,10)})]})}),!c.signature&&(0,n.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!c,onClick:function(){return Y(!0)},children:"Claim"})}),close:function(){return ae()}}),(0,n.jsx)(Q.Z,{visable:V,setVisable:Y,passphrase:J,setPassphrase:le,func:ee})]})};d.Z=se},79762:function(i,d,e){"use strict";var L=e(67294),D=e(8556),h=e.n(D),E=e(85893);function p(m){var M=m.score;return(0,E.jsxs)("span",{className:h().scoreContainer,children:[M>=0&&(0,E.jsxs)("span",{className:h().positive,children:["+",M]}),M<0&&(0,E.jsxs)("span",{className:h().negative,children:["-",Math.abs(M)]})]})}d.Z=p},11561:function(i,d,e){"use strict";var L=e(67294),D=e(28531),h=e.n(D),E=e(85893);function p(m){var M=m.tag;return(0,E.jsx)("span",{className:h().tag,children:M})}d.Z=p}}]);
