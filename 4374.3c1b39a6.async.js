(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[4374],{44019:function(H){H.exports={trade:"trade___5DCR_",pairCoins:"pairCoins___30AFB",pairCoinsItem:"pairCoinsItem___3j3Cy",tokenCoin:"tokenCoin___Rj0cZ",pairCoin:"pairCoin___1fXNK",downIcon:"downIcon___x0UKv",pairCoinsSelect:"pairCoinsSelect___1Mxk8",pairCoinsItemIcon:"pairCoinsItemIcon___2cM1U",pairCoinsItemLabel:"pairCoinsItemLabel___2VXNO",pairCoinsItemText:"pairCoinsItemText___2P6QM",pairCoinsItemInput:"pairCoinsItemInput___2Z-fh",pairCoinsBalance:"pairCoinsBalance___2quET",balance:"balance___gTvLr",warning:"warning___3GZFj",warningText:"warningText___1yrSa",maxButton:"maxButton___k7yah",pairCoinsSwitchButton:"pairCoinsSwitchButton___3ewlN",pairCoinsFlat:"pairCoinsFlat___3k2iZ",submitButton:"submitButton___qNSug"}},54374:function(H,me,s){"use strict";var Je=s(49111),ve=s(19650),qe=s(57663),B=s(71577),ea=s(77883),F=s(70507),aa=s(12968),w=s(62462),sa=s(74379),j=s(38648),y=s(3182),f=s(2824),na=s(402),pe=s(3887),Me=s(94043),D=s.n(Me),l=s(67294),fe=s(55909),Ee=s.n(fe),Ce=s(44019),n=s.n(Ce),h=s(43581),Te=s(13580),ge=s(32689),S=s(33044),Ie=s(96534),z=s(1615),V=s(3548),X=s(57254),$=s(57651),De=s(46656),Ae=s(86326),o=s(59749),a=s(85893),Pe=pe.Z.Title;function he(O){var U,L,i=O.assetId,G=O.onSelectAsset,Q=O.onSwapped,Y=O.canSelectAsset,Se=Y===void 0?!0:Y,W=O.initTokenNumber,E=(0,h.YB)(),J=(0,h.tT)("apiWs"),Oe=(0,h.tT)("currentUser"),u=Oe.wallet,be=(0,h.tT)("balance"),m=be.balance,q=(0,h.tT)("assets"),C=q.assets,ee=q.getAssets,Be=(0,l.useState)(""),ae=(0,f.Z)(Be,2),je=ae[0],se=ae[1],ke=(0,l.useState)(),ne=(0,f.Z)(ke,2),p=ne[0],ye=ne[1],Ue=(0,l.useState)(),te=(0,f.Z)(Ue,2),N=te[0],Le=te[1],We=(0,l.useState)("ad3ToToken"),re=(0,f.Z)(We,2),_=re[0],Ne=re[1],Re=(0,l.useState)(""),ie=(0,f.Z)(Re,2),T=ie[0],A=ie[1],Ke=(0,l.useState)(""),le=(0,f.Z)(Ke,2),g=le[0],I=le[1],Ze=(0,l.useState)(!1),oe=(0,f.Z)(Ze,2),xe=oe[0],_e=oe[1],He=(0,l.useState)(""),ue=(0,f.Z)(He,2),R=ue[0],Fe=ue[1],we=(0,l.useState)(!1),de=(0,f.Z)(we,2),ze=de[0],K=de[1],Ve=(0,l.useState)(!1),ce=(0,f.Z)(Ve,2),b=ce[0],Z=ce[1];(0,l.useEffect)(function(){u&&ee(u.account)},[ee,u]);var Xe=function(){var t=(0,y.Z)(D().mark(function r(d){var v,M;return D().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return se(""),c.prev=1,c.next=4,(0,ge.T9)(d);case 4:v=c.sent,M=v.data,M!=null&&M.token&&se(M.token.icon),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),console.error(c.t0);case 12:case"end":return c.stop()}},r,null,[[1,9]])}));return function(d){return t.apply(this,arguments)}}(),$e=function(){var t=(0,y.Z)(D().mark(function r(d){var v,M,P;return D().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.Ay)(d);case 2:if(v=e.sent,!v.isEmpty){e.next=6;break}return j.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(d)}),e.abrupt("return");case 6:return M=v.toHuman(),ye(M),e.next=10,(0,S.Vo)(d,(0,Ie.Vm)("1"));case 10:P=e.sent,Le(P.toString());case 12:case"end":return e.stop()}},r)}));return function(d){return t.apply(this,arguments)}}();(0,l.useEffect)(function(){J&&i&&($e(i),Xe(i),A(""),W?(I(W),k(W)):I(""))},[i,J]);var Ge=function(){var t=(0,y.Z)(D().mark(function r(d,v){var M,P;return D().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!!u&&!!(u!=null&&u.keystore)&&!!i)){e.next=33;break}e.t0=_,e.next=e.t0==="ad3ToToken"?4:e.t0==="tokenToAd3"?17:30;break;case 4:return e.prev=4,e.next=7,(0,z.Ht)(i,(0,o.HM)(g,18).toString(),(0,o.HM)(T,18).toString(),R,u==null?void 0:u.keystore,d,v);case 7:if(M=e.sent,!(d&&v)){e.next=10;break}return e.abrupt("return",M);case 10:e.next=16;break;case 12:return e.prev=12,e.t1=e.catch(4),j.default.error({message:e.t1.message||e.t1,duration:null}),e.abrupt("return");case 16:return e.abrupt("break",30);case 17:return e.prev=17,e.next=20,(0,z.Ro)(i,(0,o.HM)(g,18).toString(),(0,o.HM)(T,18).toString(),R,u==null?void 0:u.keystore,d,v);case 20:if(P=e.sent,!(d&&v)){e.next=23;break}return e.abrupt("return",P);case 23:e.next=29;break;case 25:return e.prev=25,e.t2=e.catch(17),j.default.error({message:e.t2.message||e.t2,duration:null}),e.abrupt("return");case 29:return e.abrupt("break",30);case 30:Q&&Q(),e.next=34;break;case 33:j.default.error({key:"accessDenied",message:E.formatMessage({id:"error.accessDenied"}),duration:null});case 34:case"end":return e.stop()}},r,null,[[4,12],[17,25]])}));return function(d,v){return t.apply(this,arguments)}}(),x=(0,l.useCallback)(function(t){i&&(_==="ad3ToToken"&&(0,S.hM)(i,(0,o.HM)(t,18).toString()).then(function(r){I((0,o.mI)(r,18))}),_==="tokenToAd3"&&(0,S.__)(i,(0,o.HM)(t,18).toString()).then(function(r){I((0,o.mI)(r,18))}))},[i,_]),k=(0,l.useCallback)(function(t){i&&(_==="tokenToAd3"&&(0,S.Vo)(i,(0,o.HM)(t,18).toString()).then(function(r){A((0,o.mI)(r,18))}),_==="ad3ToToken"&&(0,S.UG)(i,(0,o.HM)(t,18).toString()).then(function(r){A((0,o.mI)(r,18))}))},[i,_]),Qe=(0,l.useCallback)(function(){var t=(0,o.mI)(m==null?void 0:m.free,18);A(t),x(t)},[m,_,x]),Ye=(0,l.useCallback)(function(){if(i&&C){var t,r=(0,o.mI)((t=C.get(i))===null||t===void 0?void 0:t.balance,18);I(r),k(r)}},[_,i,C,k]);return(0,l.useEffect)(function(){if(_==="ad3ToToken"){if(m!=null&&m.free&&T){Z((0,o.HM)(T,18)>BigInt(m.free));return}}else if(i&&C&&g){var t;Z((0,o.HM)(g,18)>BigInt((t=C.get(i))===null||t===void 0?void 0:t.balance));return}Z(!1)},[_,m,T,g,i,C]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:n().trade,children:[(0,a.jsx)(Pe,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:Ee().title,children:E.formatMessage({id:"creator.explorer.trade"})}),(0,a.jsxs)("div",{className:n().pairCoins,style:{flexFlow:_==="ad3ToToken"?"column":"column-reverse"},children:[(0,a.jsxs)("div",{className:n().pairCoinsItem,children:[(0,a.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:n().pairCoin,children:[(0,a.jsx)(w.Z,{src:"/images/logo-round-core.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,a.jsx)("span",{className:n().pairCoinsItemLabel,children:"AD3"})]}),(0,a.jsx)(F.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:T,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(r){A(r),x(r)}})]}),(0,a.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(n().balance," ").concat(_==="ad3ToToken"&&b?n().warning:""),children:[E.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)(V.Z,{value:m==null?void 0:m.free}),_==="ad3ToToken"&&b&&(0,a.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(B.Z,{type:"link",size:"middle",className:n().maxButton,onClick:Qe,children:E.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,a.jsx)(B.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,a.jsx)(X.Z,{}),className:n().pairCoinsSwitchButton,onClick:function(){Ne(_==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),A(""),I("")}}),(0,a.jsxs)("div",{className:"".concat(n().pairCoinsItem," ").concat(n().tokenCoin),children:[(0,a.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:n().pairCoin,onClick:function(){return Se&&K(!0)},children:[p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.Z,{src:je||"/images/default-avatar.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,a.jsx)("span",{className:n().pairCoinsItemLabel,children:p==null?void 0:p.symbol})]}),!p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:n().pairCoinsItemText,children:"Select Asset"})}),(0,a.jsx)(X.Z,{className:n().downIcon})]}),(0,a.jsx)(F.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:g,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(r){I(r),k(r)}})]}),(0,a.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(n().balance," ").concat(_==="tokenToAd3"&&b?n().warning:""),children:[E.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)($.Z,{value:(U=(L=C.get(i!=null?i:""))===null||L===void 0?void 0:L.balance)!==null&&U!==void 0?U:"",symbol:p==null?void 0:p.symbol}),_==="tokenToAd3"&&b&&(0,a.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(B.Z,{type:"link",size:"middle",className:n().maxButton,onClick:Ye,children:E.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,a.jsx)("div",{className:n().pairCoinsFlat,children:(0,a.jsxs)(ve.Z,{children:[(0,a.jsx)($.Z,{value:(0,o.HM)("1",18).toString(),symbol:p==null?void 0:p.symbol}),(0,a.jsx)("span",{children:"\u2248"}),(0,a.jsx)(V.Z,{value:N!=null?N:""})]})}),(0,a.jsx)(B.Z,{block:!0,type:"primary",size:"large",shape:"round",className:n().submitButton,disabled:!T||!g||b||!i,onClick:function(){_e(!0)},children:E.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]}),(0,a.jsx)(De.Z,{visable:xe,setVisable:_e,passphrase:R,setPassphrase:Fe,func:Ge}),ze&&(0,a.jsx)(Ae.Z,{onClose:function(){return K(!1)},onSelectAsset:function(r){K(!1),G&&G(r)}})]})}me.Z=he}}]);
