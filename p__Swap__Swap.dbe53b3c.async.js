(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{44019:function(O){O.exports={trade:"trade___5DCR_",pairCoins:"pairCoins___30AFB",pairCoinsItem:"pairCoinsItem___3j3Cy",tokenCoin:"tokenCoin___Rj0cZ",pairCoin:"pairCoin___1fXNK",downIcon:"downIcon___x0UKv",pairCoinsSelect:"pairCoinsSelect___1Mxk8",pairCoinsItemIcon:"pairCoinsItemIcon___2cM1U",pairCoinsItemLabel:"pairCoinsItemLabel___2VXNO",pairCoinsItemText:"pairCoinsItemText___2P6QM",pairCoinsItemInput:"pairCoinsItemInput___2Z-fh",pairCoinsBalance:"pairCoinsBalance___2quET",balance:"balance___gTvLr",warning:"warning___3GZFj",warningText:"warningText___1yrSa",maxButton:"maxButton___k7yah",pairCoinsSwitchButton:"pairCoinsSwitchButton___3ewlN",pairCoinsFlat:"pairCoinsFlat___3k2iZ",submitButton:"submitButton___qNSug"}},32177:function(O){O.exports={container:"container___1ImOP"}},17290:function(O,L,e){"use strict";e.r(L),e.d(L,{default:function(){return Ue}});var z=e(58024),V=e(39144),o=e(67294),X=e(51615),d=e(43581),Q=e(55909),R=e.n(Q),Y=e(32177),J=e.n(Y),re=e(49111),b=e(19650),v=e(57663),u=e(71577),p=e(77883),j=e(70507),n=e(12968),W=e(62462),C=e(74379),x=e(38648),U=e(3182),f=e(2824),ca=e(402),Ze=e(3887),ke=e(94043),D=e.n(ke),Ne=e(44019),r=e.n(Ne),we=e(13580),Be=e(32689),G=e(33044),xe=e(96534),te=e(1615),le=e(3548),ie=e(57254),oe=e(57651),De=e(46656),Ee=e(86326),c=e(59749),a=e(85893),Pe=Ze.Z.Title;function He(E){var M,$,l=E.assetId,ue=E.onSelectAsset,de=E.onSwapped,ce=E.canSelectAsset,Ge=ce===void 0?!0:ce,q=E.initTokenNumber,Z=(0,d.YB)(),me=(0,d.tT)("apiWs"),Fe=(0,d.tT)("currentUser"),h=Fe.wallet,Le=(0,d.tT)("balance"),y=Le.balance,ve=(0,d.tT)("assets"),k=ve.assets,pe=ve.getAssets,Re=(0,o.useState)(""),fe=(0,f.Z)(Re,2),$e=fe[0],he=fe[1],Ke=(0,o.useState)(),ge=(0,f.Z)(Ke,2),I=ge[0],ze=ge[1],Ve=(0,o.useState)(),Se=(0,f.Z)(Ve,2),_=Se[0],Xe=Se[1],Qe=(0,o.useState)("ad3ToToken"),Ce=(0,f.Z)(Qe,2),m=Ce[0],Ye=Ce[1],Je=(0,o.useState)(""),ye=(0,f.Z)(Je,2),N=ye[0],P=ye[1],qe=(0,o.useState)(""),Ae=(0,f.Z)(qe,2),w=Ae[0],B=Ae[1],_e=(0,o.useState)(!1),be=(0,f.Z)(_e,2),ea=be[0],Ie=be[1],aa=(0,o.useState)(""),Te=(0,f.Z)(aa,2),ee=Te[0],sa=Te[1],na=(0,o.useState)(!1),je=(0,f.Z)(na,2),ra=je[0],ae=je[1],ta=(0,o.useState)(!1),Me=(0,f.Z)(ta,2),F=Me[0],se=Me[1];(0,o.useEffect)(function(){h&&pe(h.account)},[pe,h]);var la=function(){var t=(0,U.Z)(D().mark(function i(g){var A,T;return D().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return he(""),S.prev=1,S.next=4,(0,Be.T9)(g);case 4:A=S.sent,T=A.data,T!=null&&T.token&&he(T.token.icon),S.next=12;break;case 9:S.prev=9,S.t0=S.catch(1),console.error(S.t0);case 12:case"end":return S.stop()}},i,null,[[1,9]])}));return function(g){return t.apply(this,arguments)}}(),ia=function(){var t=(0,U.Z)(D().mark(function i(g){var A,T,H;return D().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,we.Ay)(g);case 2:if(A=s.sent,!A.isEmpty){s.next=6;break}return x.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(g)}),s.abrupt("return");case 6:return T=A.toHuman(),ze(T),s.next=10,(0,G.Vo)(g,(0,xe.Vm)("1"));case 10:H=s.sent,Xe(H.toString());case 12:case"end":return s.stop()}},i)}));return function(g){return t.apply(this,arguments)}}();(0,o.useEffect)(function(){me&&l&&(ia(l),la(l),P(""),q?(B(q),K(q)):B(""))},[l,me]);var oa=function(){var t=(0,U.Z)(D().mark(function i(g,A){var T,H;return D().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(!!h&&!!(h!=null&&h.keystore)&&!!l)){s.next=33;break}s.t0=m,s.next=s.t0==="ad3ToToken"?4:s.t0==="tokenToAd3"?17:30;break;case 4:return s.prev=4,s.next=7,(0,te.Ht)(l,(0,c.HM)(w,18).toString(),(0,c.HM)(N,18).toString(),ee,h==null?void 0:h.keystore,g,A);case 7:if(T=s.sent,!(g&&A)){s.next=10;break}return s.abrupt("return",T);case 10:s.next=16;break;case 12:return s.prev=12,s.t1=s.catch(4),x.default.error({message:s.t1.message||s.t1,duration:null}),s.abrupt("return");case 16:return s.abrupt("break",30);case 17:return s.prev=17,s.next=20,(0,te.Ro)(l,(0,c.HM)(w,18).toString(),(0,c.HM)(N,18).toString(),ee,h==null?void 0:h.keystore,g,A);case 20:if(H=s.sent,!(g&&A)){s.next=23;break}return s.abrupt("return",H);case 23:s.next=29;break;case 25:return s.prev=25,s.t2=s.catch(17),x.default.error({message:s.t2.message||s.t2,duration:null}),s.abrupt("return");case 29:return s.abrupt("break",30);case 30:de&&de(),s.next=34;break;case 33:x.default.error({key:"accessDenied",message:Z.formatMessage({id:"error.accessDenied"}),duration:null});case 34:case"end":return s.stop()}},i,null,[[4,12],[17,25]])}));return function(g,A){return t.apply(this,arguments)}}(),ne=(0,o.useCallback)(function(t){l&&(m==="ad3ToToken"&&(0,G.hM)(l,(0,c.HM)(t,18).toString()).then(function(i){B((0,c.mI)(i,18))}),m==="tokenToAd3"&&(0,G.__)(l,(0,c.HM)(t,18).toString()).then(function(i){B((0,c.mI)(i,18))}))},[l,m]),K=(0,o.useCallback)(function(t){l&&(m==="tokenToAd3"&&(0,G.Vo)(l,(0,c.HM)(t,18).toString()).then(function(i){P((0,c.mI)(i,18))}),m==="ad3ToToken"&&(0,G.UG)(l,(0,c.HM)(t,18).toString()).then(function(i){P((0,c.mI)(i,18))}))},[l,m]),ua=(0,o.useCallback)(function(){var t=(0,c.mI)(y==null?void 0:y.free,18);P(t),ne(t)},[y,m,ne]),da=(0,o.useCallback)(function(){if(l&&k){var t,i=(0,c.mI)((t=k.get(l))===null||t===void 0?void 0:t.balance,18);B(i),K(i)}},[m,l,k,K]);return(0,o.useEffect)(function(){if(m==="ad3ToToken"){if(y!=null&&y.free&&N){se((0,c.HM)(N,18)>BigInt(y.free));return}}else if(l&&k&&w){var t;se((0,c.HM)(w,18)>BigInt((t=k.get(l))===null||t===void 0?void 0:t.balance));return}se(!1)},[m,y,N,w,l,k]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:r().trade,children:[(0,a.jsx)(Pe,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:R().title,children:Z.formatMessage({id:"creator.explorer.trade"})}),(0,a.jsxs)("div",{className:r().pairCoins,style:{flexFlow:m==="ad3ToToken"?"column":"column-reverse"},children:[(0,a.jsxs)("div",{className:r().pairCoinsItem,children:[(0,a.jsxs)("div",{className:r().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:r().pairCoin,children:[(0,a.jsx)(W.Z,{src:"/images/logo-round-core.svg",preview:!1,className:r().pairCoinsItemIcon}),(0,a.jsx)("span",{className:r().pairCoinsItemLabel,children:"AD3"})]}),(0,a.jsx)(j.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:N,className:r().pairCoinsItemInput,stringMode:!0,onChange:function(i){P(i),ne(i)}})]}),(0,a.jsxs)("div",{className:r().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(r().balance," ").concat(m==="ad3ToToken"&&F?r().warning:""),children:[Z.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)(le.Z,{value:y==null?void 0:y.free}),m==="ad3ToToken"&&F&&(0,a.jsx)("span",{className:r().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(u.Z,{type:"link",size:"middle",className:r().maxButton,onClick:ua,children:Z.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,a.jsx)(u.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,a.jsx)(ie.Z,{}),className:r().pairCoinsSwitchButton,onClick:function(){Ye(m==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),P(""),B("")}}),(0,a.jsxs)("div",{className:"".concat(r().pairCoinsItem," ").concat(r().tokenCoin),children:[(0,a.jsxs)("div",{className:r().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:r().pairCoin,onClick:function(){return Ge&&ae(!0)},children:[I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.Z,{src:$e||"/images/default-avatar.svg",preview:!1,className:r().pairCoinsItemIcon}),(0,a.jsx)("span",{className:r().pairCoinsItemLabel,children:I==null?void 0:I.symbol})]}),!I&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:r().pairCoinsItemText,children:"Select Asset"})}),(0,a.jsx)(ie.Z,{className:r().downIcon})]}),(0,a.jsx)(j.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:w,className:r().pairCoinsItemInput,stringMode:!0,onChange:function(i){B(i),K(i)}})]}),(0,a.jsxs)("div",{className:r().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(r().balance," ").concat(m==="tokenToAd3"&&F?r().warning:""),children:[Z.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)(oe.Z,{value:(M=($=k.get(l!=null?l:""))===null||$===void 0?void 0:$.balance)!==null&&M!==void 0?M:"",symbol:I==null?void 0:I.symbol}),m==="tokenToAd3"&&F&&(0,a.jsx)("span",{className:r().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(u.Z,{type:"link",size:"middle",className:r().maxButton,onClick:da,children:Z.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,a.jsx)("div",{className:r().pairCoinsFlat,children:(0,a.jsxs)(b.Z,{children:[(0,a.jsx)(oe.Z,{value:(0,c.HM)("1",18).toString(),symbol:I==null?void 0:I.symbol}),(0,a.jsx)("span",{children:"\u2248"}),(0,a.jsx)(le.Z,{value:_!=null?_:""})]})}),(0,a.jsx)(u.Z,{block:!0,type:"primary",size:"large",shape:"round",className:r().submitButton,disabled:!N||!w||F||!l,onClick:function(){Ie(!0)},children:Z.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]}),(0,a.jsx)(De.Z,{visable:ea,setVisable:Ie,passphrase:ee,setPassphrase:sa,func:oa}),ra&&(0,a.jsx)(Ee.Z,{onClose:function(){return ae(!1)},onSelectAsset:function(i){ae(!1),ue&&ue(i)}})]})}var Oe=He,We=function(){var M=(0,X.UO)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:J().container,children:(0,a.jsx)(V.Z,{className:R().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,a.jsx)(Oe,{assetId:M==null?void 0:M.assetId,onSelectAsset:function(l){d.m8.push("/swap/".concat(l.id))}})})})})},Ue=We},13580:function(O,L,e){"use strict";e.d(L,{Ay:function(){return Q},f5:function(){return R},r7:function(){return Y},L7:function(){return J},jd:function(){return re}});var z=e(11849),V=e(2824),o=e(3182),X=e(94043),d=e.n(X),Q=function(){var b=(0,o.Z)(d().mark(function v(u){var p;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.metadata(Number(u));case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},v)}));return function(u){return b.apply(this,arguments)}}(),R=function(){var b=(0,o.Z)(d().mark(function v(u){var p;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.asset(Number(u));case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},v)}));return function(u){return b.apply(this,arguments)}}(),Y=function(){var b=(0,o.Z)(d().mark(function v(u){var p;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.account.entries(u);case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},v)}));return function(u){return b.apply(this,arguments)}}(),J=function(){var b=(0,o.Z)(d().mark(function v(u,p){var j,n;return d().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,window.apiWs.query.assets.account(Number(p),u);case 2:if(j=C.sent,!j.isEmpty){C.next=5;break}return C.abrupt("return",null);case 5:return n=j.toHuman(),C.abrupt("return",n);case 7:case"end":return C.stop()}},v)}));return function(u,p){return b.apply(this,arguments)}}(),re=function(){var b=(0,o.Z)(d().mark(function v(){var u,p;return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.metadata.entries();case 2:return u=n.sent,p=(u!=null?u:[]).map(function(W){var C=(0,V.Z)(W,2),x=C[0],U=C[1],f=x.toHuman();return f?(0,z.Z)((0,z.Z)({},U.toHuman()),{},{id:f[0].replaceAll(",","")}):null}).filter(Boolean),n.abrupt("return",p);case 5:case"end":return n.stop()}},v)}));return function(){return b.apply(this,arguments)}}()}}]);
