(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7562],{19273:function(o,d,e){"use strict";e.d(d,{Z:function(){return b}});function b(c){if(c==null)throw new TypeError("Cannot destructure undefined")}},55133:function(o){o.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(o){o.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},10259:function(o){o.exports={container:"container___1DFB8"}},69764:function(o,d,e){"use strict";var b=e(71194),c=e(50146),x=e(57663),D=e(71577),L=e(402),P=e(3887),k=e(67294),f=e(55133),v=e.n(f),O=e(54549),E=e(85893),Z=P.Z.Title,B=function(r){var S=r.visable,W=r.title,h=r.content,n=r.footer,m=r.close,N=r.bodyStyle,l=r.width;return(0,E.jsx)(c.Z,{title:W?(0,E.jsx)(Z,{level:5,className:v().title,children:W}):null,closable:!!m,closeIcon:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(D.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,E.jsx)(O.Z,{onClick:m})})}),className:v().modal,centered:!0,visible:S,width:l!=null?l:650,footer:n,bodyStyle:N,children:h})};d.Z=B},46656:function(o,d,e){"use strict";var b=e(71194),c=e(50146),x=e(47673),D=e(32787),L=e(22385),P=e(31097),k=e(17462),f=e(76772),v=e(57663),O=e(71577),E=e(74379),Z=e(38648),B=e(3182),y=e(2824),r=e(402),S=e(3887),W=e(94043),h=e.n(W),n=e(67294),m=e(43581),N=e(55133),l=e.n(N),z=e(3548),X=e(68855),$=e(47832),J=e(43955),V=e(51625),_=e(85893),w=S.Z.Title,q=function(u){var M=u.visable,Y=u.setVisable,s=u.passphrase,T=u.setPassphrase,F=u.func,p=u.changePassphrase,G=u.directSubmit,U=G===void 0?!1:G,K=(0,m.tT)("apiWs"),ae=(0,m.tT)("currentUser"),a=ae.wallet,ie=(0,m.tT)("balance"),re=ie.balance,oe=(0,n.useState)(!1),_e=(0,y.Z)(oe,2),ee=_e[0],H=_e[1],de=(0,n.useState)(),le=(0,y.Z)(de,2),R=le[0],ue=le[1],g=(0,m.YB)(),ce=function(C){T(C?C.target.value:"")},se=function(){var j=(0,B.Z)(h().mark(function C(){var A,Q,i,te,ne;return h().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(H(!0),a!=null&&a.passphrase&&T(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){t.next=5;break}return H(!1),t.abrupt("return");case 5:if(A=(a==null?void 0:a.passphrase)||s,!(A&&a!==null&&a!==void 0&&a.keystore)){t.next=16;break}if(Q=(0,$.Gh)(A,a.keystore),Q){t.next=13;break}return Z.default.error({key:"passphraseError",message:g.formatMessage({id:"error.passphrase.error"}),duration:null}),T(""),H(!1),t.abrupt("return");case 13:i=new J.ZP({type:"sr25519"}),te=i.addFromUri(Q),ne=te.address,a!=null&&a.account&&a.account!==ne&&(localStorage.clear(),sessionStorage.clear(),window.location.href=V.Z.page.homePage);case 16:if(!F){t.next=25;break}return t.prev=17,t.next=20,F();case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(17),console.log("security modal submit func error fallback",t.t0);case 25:Y(!1),H(!1);case 27:case"end":return t.stop()}},C,null,[[17,22]])}));return function(){return j.apply(this,arguments)}}(),ve=function(){var j=(0,B.Z)(h().mark(function C(){var A;return h().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!!K&&!!a.account)){i.next=11;break}return i.next=3,F(!0,a.account);case 3:if(A=i.sent,!A){i.next=8;break}ue(A.partialFee),i.next=11;break;case 8:if(p){i.next=11;break}return i.next=11,se();case 11:case"end":return i.stop()}},C)}));return function(){return j.apply(this,arguments)}}();return(0,n.useEffect)(function(){!!K&&!!(a!=null&&a.account)&&M&&!U&&ve()},[K,a==null?void 0:a.account,M,U]),(0,n.useEffect)(function(){!!(a!=null&&a.passphrase)&&M&&!p&&T(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,M,p]),(0,n.useEffect)(function(){s&&M&&U&&se()},[s,M,U]),(0,_.jsxs)(c.Z,{title:(0,_.jsx)(w,{level:3,children:g.formatMessage({id:"modal.security.title"})}),closable:!1,className:l().modal,centered:!0,visible:M,width:400,footer:(0,_.jsxs)("div",{className:l().buttons,children:[(0,_.jsx)(O.Z,{type:"text",shape:"round",size:"large",className:l().button,onClick:function(){Y(!1),window.location.reload()},loading:ee,children:g.formatMessage({id:"common.decline"})}),(0,_.jsx)(O.Z,{type:"primary",shape:"round",size:"large",className:l().button,onClick:function(){se()},disabled:!s||s.length<6,loading:ee,children:g.formatMessage({id:"common.confirm"})})]}),children:[(0,_.jsxs)("div",{className:l().confirmContainer,children:[!!R&&!!(R!=null&&R.toString())>re.free&&(0,_.jsx)(f.Z,{description:g.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:l().alertContainer}),!!R&&(0,_.jsxs)("div",{className:l().field,children:[(0,_.jsxs)("div",{className:l().labal,children:[g.formatMessage({id:"modal.security.gas"}),(0,_.jsxs)("span",{className:l().small,children:["(",g.formatMessage({id:"modal.security.estimated"}),")"]}),(0,_.jsx)(P.Z,{placement:"bottom",title:g.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,_.jsx)(X.Z,{className:l().labalIcon})})]}),(0,_.jsx)("div",{className:l().value,children:(0,_.jsx)(z.Z,{value:R,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||p)&&(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,_.jsxs)("div",{className:l().codeInput,children:[(0,_.jsxs)("div",{className:l().verifyForm,children:[(0,_.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&l().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&l().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&l().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&l().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,_.jsx)(D.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:l().verifyInput,onChange:ce,value:s,disabled:ee,maxLength:6,visibilityToggle:!1})]})})]})};d.Z=q},3548:function(o,d,e){"use strict";var b=e(67294),c=e(31639),x=e.n(c),D=e(96534),L=e(85893),P=function(f){var v=f.value,O=f.style;return(0,L.jsxs)("div",{className:x().ad3,style:O,children:[v?(0,D.MP)(v):"--",(0,L.jsx)("span",{className:x().unit,children:"\xA0$AD3"})]})};d.Z=P},45668:function(o,d,e){"use strict";e.r(d);var b=e(20228),c=e(11382),x=e(74379),D=e(38648),L=e(3182),P=e(2824),k=e(19273),f=e(94043),v=e.n(f),O=e(69764),E=e(46656),Z=e(28986),B=e(2215),y=e(67294),r=e(43581),S=e(51615),W=e(10259),h=e.n(W),n=e(85893);function m(N){(0,k.Z)(N);var l=(0,y.useState)(!1),z=(0,P.Z)(l,2),X=z[0],$=z[1],J=(0,y.useState)(""),V=(0,P.Z)(J,2),_=V[0],w=V[1],q=(0,r.tT)("currentUser"),I=q.wallet,u=(0,r.tT)("apiWs"),M=(0,r.YB)(),Y=(0,S.UO)(),s=Y.nftId,T=function(){window.opener.postMessage("".concat(Z.vs.AD_CLAIMED,":").concat(s),"*"),window.close()};(0,y.useEffect)(function(){s&&u&&I&&$(!0)},[s,u,I]);var F=function(){var p=(0,L.Z)(v().mark(function G(U,K){return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(I!=null&&I.keystore){a.next=3;break}return D.default.error({key:"accessDenied",message:M.formatMessage({id:"error.accessDenied"}),duration:null}),a.abrupt("return");case 3:return a.prev=3,a.next=6,(0,B.iG)(s,_,I.keystore,U,K);case 6:T(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(3),console.log(a.t0),D.default.error({message:"Claim Ad Token Error",description:"".concat(a.t0)});case 13:case"end":return a.stop()}},G,null,[[3,9]])}));return function(U,K){return p.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Z,{visable:!0,title:"Claim your token",content:(0,n.jsx)("div",{className:h().container,children:(0,n.jsx)(c.Z,{})}),footer:null,close:function(){window.close()}}),(0,n.jsx)(E.Z,{visable:X,setVisable:$,passphrase:_,setPassphrase:w,directSubmit:!0,func:F})]})}d.default=m}}]);
