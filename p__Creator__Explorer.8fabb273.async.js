(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[8172],{55133:function(G){G.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},2752:function(G){G.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},8556:function(G){G.exports={scoreContainer:"scoreContainer___1bJza",positive:"positive___p0hU_",negative:"negative___1XWM_"}},28531:function(G){G.exports={tag:"tag___sah2p"}},90802:function(G){G.exports={explorerContainer:"explorerContainer___2tn58",dashboard:"dashboard___1yzjn",header:"header___7HFGw",buttons:"buttons____mn0V",button:"button___2bNYM",confirm:"confirm___14R24",topIcon:"topIcon___lcz8T",title:"title___3OHiQ",field:"field___1rYhg",value:"value___VpweH",notUser:"notUser___1H3wh",desc:"desc___3002O",buttonImport:"buttonImport___1UVlX",notSupport:"notSupport___3AII_",icon:"icon___2lOpA",text:"text___2HCAz",loading:"loading___38OsL",loadingTip:"loadingTip___2K2wM",avatar:"avatar___1Itlz",rotate:"rotate___3cdkL",image_blur:"image_blur___1JtdU"}},69764:function(G,_e,a){"use strict";var ba=a(71194),Be=a(50146),Pa=a(57663),X=a(71577),Oa=a(402),Ze=a(3887),T=a(67294),He=a(55133),L=a.n(He),m=a(54549),de=a(85893),d=Ze.Z.Title,o=function(Q){var Ge=Q.visable,xe=Q.title,ye=Q.content,F=Q.footer,ue=Q.close,p=Q.bodyStyle,n=Q.width;return(0,de.jsx)(Be.Z,{title:xe?(0,de.jsx)(d,{level:5,className:L().title,children:xe}):null,closable:!!ue,closeIcon:(0,de.jsx)(de.Fragment,{children:(0,de.jsx)(X.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,de.jsx)(m.Z,{onClick:ue})})}),className:L().modal,centered:!0,visible:Ge,width:n!=null?n:650,footer:F,bodyStyle:p,children:ye})};_e.Z=o},46656:function(G,_e,a){"use strict";var ba=a(71194),Be=a(50146),Pa=a(47673),X=a(32787),Oa=a(22385),Ze=a(31097),T=a(17462),He=a(76772),L=a(57663),m=a(71577),de=a(74379),d=a(38648),o=a(3182),Ve=a(2824),Q=a(402),Ge=a(3887),xe=a(94043),ye=a.n(xe),F=a(67294),ue=a(43581),p=a(55133),n=a.n(p),Le=a(3548),da=a(68855),ua=a(47832),Je=a(55347),Ye=a(51625),y=a(85893),ca=Ge.Z.Title,va=function(Me){var re=Me.visable,Xe=Me.setVisable,s=Me.passphrase,J=Me.setPassphrase,we=Me.func,Ee=Me.changePassphrase,Fe=(0,ue.tT)("apiWs"),Da=(0,ue.tT)("currentUser"),i=Da.wallet,ze=(0,ue.tT)("balance"),fa=ze.balance,Qe=(0,F.useState)(!1),qe=(0,Ve.Z)(Qe,2),Ae=qe[0],Te=qe[1],pa=(0,F.useState)(),ea=(0,Ve.Z)(pa,2),e=ea[0],ha=ea[1],q=(0,ue.YB)(),ga=function(te){J(te?te.target.value:"")},Ue=function(){var ce=(0,o.Z)(ye().mark(function te(){var ve,We,U,aa,N;return ye().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(Te(!0),i!=null&&i.passphrase&&J(i==null?void 0:i.passphrase),!((!s||s.length<6)&&!(i!=null&&i.passphrase))){R.next=5;break}return Te(!1),R.abrupt("return");case 5:if(ve=(i==null?void 0:i.passphrase)||s,!(ve&&i!==null&&i!==void 0&&i.keystore)){R.next=16;break}if(We=(0,ua.Gh)(ve,i.keystore),We){R.next=13;break}return d.default.error({key:"passphraseError",message:q.formatMessage({id:"error.passphrase.error"}),duration:null}),J(""),Te(!1),R.abrupt("return");case 13:U=new Je.ZP({type:"sr25519"}),aa=U.addFromUri(We),N=aa.address,i!=null&&i.account&&i.account!==N&&(localStorage.clear(),sessionStorage.clear(),window.location.href=Ye.Z.page.homePage);case 16:if(!we){R.next=19;break}return R.next=19,we();case 19:Xe(!1),Te(!1);case 21:case"end":return R.stop()}},te)}));return function(){return ce.apply(this,arguments)}}(),ya=function(){var ce=(0,o.Z)(ye().mark(function te(){var ve;return ye().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(!!Fe&&!!i.account)){U.next=11;break}return U.next=3,we(!0,i.account);case 3:if(ve=U.sent,!ve){U.next=8;break}ha(ve.partialFee),U.next=11;break;case 8:if(Ee){U.next=11;break}return U.next=11,Ue();case 11:case"end":return U.stop()}},te)}));return function(){return ce.apply(this,arguments)}}();return(0,F.useEffect)(function(){!!Fe&&!!(i!=null&&i.account)&&re&&ya()},[Fe,i==null?void 0:i.account,re]),(0,F.useEffect)(function(){!!(i!=null&&i.passphrase)&&re&&!Ee&&J(i==null?void 0:i.passphrase)},[i==null?void 0:i.passphrase,s,re,Ee]),(0,y.jsxs)(Be.Z,{title:(0,y.jsx)(ca,{level:3,children:q.formatMessage({id:"modal.security.title"})}),closable:!1,className:n().modal,centered:!0,visible:re,width:400,footer:(0,y.jsxs)("div",{className:n().buttons,children:[(0,y.jsx)(m.Z,{type:"text",shape:"round",size:"large",className:n().button,onClick:function(){Xe(!1),window.location.reload()},loading:Ae,children:q.formatMessage({id:"common.decline"})}),(0,y.jsx)(m.Z,{type:"primary",shape:"round",size:"large",className:n().button,onClick:function(){Ue()},disabled:!s||s.length<6,loading:Ae,children:q.formatMessage({id:"common.confirm"})})]}),children:[(0,y.jsxs)("div",{className:n().confirmContainer,children:[!!e&&!!(e!=null&&e.toString())>fa.free&&(0,y.jsx)(He.Z,{description:q.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:n().alertContainer}),!!e&&(0,y.jsxs)("div",{className:n().field,children:[(0,y.jsxs)("div",{className:n().labal,children:[q.formatMessage({id:"modal.security.gas"}),(0,y.jsxs)("span",{className:n().small,children:["(",q.formatMessage({id:"modal.security.estimated"}),")"]}),(0,y.jsx)(Ze.Z,{placement:"bottom",title:q.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,y.jsx)(da.Z,{className:n().labalIcon})})]}),(0,y.jsx)("div",{className:n().value,children:(0,y.jsx)(Le.Z,{value:e,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(i!=null&&i.passphrase)||Ee)&&(0,y.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,y.jsxs)("div",{className:n().codeInput,children:[(0,y.jsxs)("div",{className:n().verifyForm,children:[(0,y.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&n().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,y.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&n().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,y.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&n().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,y.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&n().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,y.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,y.jsx)("span",{className:(s==null?void 0:s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,y.jsx)(X.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:n().verifyInput,onChange:ga,value:s,disabled:Ae,maxLength:6,visibilityToggle:!1})]})})]})};_e.Z=va},79967:function(G,_e,a){"use strict";a.r(_e),a.d(_e,{default:function(){return ka}});var ba=a(48736),Be=a(27049),Pa=a(57663),X=a(71577),Oa=a(12968),Ze=a(62462),T=a(3182),He=a(74379),L=a(38648),m=a(2824),de=a(94043),d=a.n(de),o=a(67294),Ve=a(58024),Q=a(39144),Ge=a(34792),xe=a(48086),ye=a(55909),F=a.n(ye),ue=a(37550),p=a.n(ue),n=a(43581),Le=a(28991),da={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},ua=da,Je=a(27029),Ye=function(u,W){return o.createElement(Je.Z,(0,Le.Z)((0,Le.Z)({},u),{},{ref:W,icon:ua}))};Ye.displayName="ShareAltOutlined";var y=o.forwardRef(Ye),ca={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.5 700.7a8 8 0 00-10.3-4.8L840 718.2V180c0-37.6-30.4-68-68-68H252c-37.6 0-68 30.4-68 68v538.2l-61.3-22.3c-.9-.3-1.8-.5-2.7-.5-4.4 0-8 3.6-8 8V763c0 3.3 2.1 6.3 5.3 7.5L501 910.1c7.1 2.6 14.8 2.6 21.9 0l383.8-139.5c3.2-1.2 5.3-4.2 5.3-7.5v-59.6c0-1-.2-1.9-.5-2.8zM512 837.5l-256-93.1V184h512v560.4l-256 93.1zM660.6 312h-54.5c-3 0-5.8 1.7-7.1 4.4l-84.7 168.8H511l-84.7-168.8a8 8 0 00-7.1-4.4h-55.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.8l103.9 191.6h-57c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76v39h-76c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76V704c0 4.4 3.6 8 8 8h49.9c4.4 0 8-3.6 8-8v-63.5h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8h-76.3v-39h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8H564l103.7-191.6c.6-1.2 1-2.5 1-3.8-.1-4.3-3.7-7.9-8.1-7.9z"}}]},name:"money-collect",theme:"outlined"},va=ca,ma=function(u,W){return o.createElement(Je.Z,(0,Le.Z)((0,Le.Z)({},u),{},{ref:W,icon:va}))};ma.displayName="MoneyCollectOutlined";var Me=o.forwardRef(ma),re=a(96534),Xe=a(20640),s=a.n(Xe),J=a(59749),we=a(55347),Ee=a(46656),Fe=a(47832),Da=a(20228),i=a(11382),ze=a(69764),fa=a(2752),Qe=a.n(fa),qe=a(32689),Ae=a(61715),Te=a(69854),pa=a(28531),ea=a.n(pa),e=a(85893);function ha(me){var u=me.tag;return(0,e.jsx)("span",{className:ea().tag,children:u})}var q=ha,ga=a(8556),Ue=a.n(ga);function ya(me){var u=me.score;return(0,e.jsxs)("span",{className:Ue().scoreContainer,children:[u>=0&&(0,e.jsxs)("span",{className:Ue().positive,children:["+",u]}),u<0&&(0,e.jsxs)("span",{className:Ue().negative,children:["-",Math.abs(u)]})]})}var ce=ya,te=function(u){var W=u.onClose,f=u.adId,z=u.nftId,Se=u.referrer,j=Se===void 0?null:Se,Ce=u.onClaim,fe=(0,o.useState)(),h=(0,m.Z)(fe,2),c=h[0],ne=h[1],je=(0,o.useState)(!1),l=(0,m.Z)(je,2),le=l[0],be=l[1],pe=(0,o.useState)(""),$=(0,m.Z)(pe,2),Y=$[0],he=$[1],Pe=(0,n.tT)("currentUser"),P=Pe.wallet,ee=(0,n.YB)(),Oe=function(){var _=(0,T.Z)(d().mark(function x(){var b,w,O,I,A;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,Te.Wv)(f);case 3:b=r.sent,console.log(b),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:return r.prev=10,r.next=13,(0,qe.Rh)(f,z,P==null?void 0:P.did);case 13:if(w=r.sent,O=w.response,I=w.data,!O.ok){r.next=20;break}ne(I),r.next=24;break;case 20:return r.next=22,(0,Te.Wv)(f);case 22:A=r.sent,ne({scores:(A!=null?A:[]).map(function(ae){return{tag:ae.name,score:-5}})});case 24:r.next=30;break;case 26:r.prev=26,r.t1=r.catch(10),console.log(r.t1),ne({});case 30:case"end":return r.stop()}},x,null,[[0,7],[10,26]])}));return function(){return _.apply(this,arguments)}}();(0,o.useEffect)(function(){Oe()},[]);var Ne=function(){var _=(0,T.Z)(d().mark(function x(b,w){var O,I,A;return d().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(P!=null&&P.keystore){r.next=3;break}return L.default.error({key:"accessDenied",message:ee.formatMessage({id:"error.accessDenied"}),duration:null}),r.abrupt("return");case 3:if(r.prev=3,A=((O=c.scores)!==null&&O!==void 0?O:[]).map(function(ae){return[ae.tag,ae.score]}),!(c&&c.signature)){r.next=11;break}return r.next=8,(0,Ae.nm)(f,z,P==null?void 0:P.did,A,c.referer,c.signature,c.signer_account,Y,P.keystore,b,w);case 8:I=r.sent,r.next=14;break;case 11:return r.next=13,(0,Ae.HS)(f,z,A,j,Y,P.keystore,b,w);case 13:I=r.sent;case 14:if(!(b&&w)){r.next=16;break}return r.abrupt("return",I);case 16:L.default.success({message:"Claim Token Success"}),Ce(),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),console.log(r.t0),L.default.error({message:"Claim Ad Token Error",description:"".concat(r.t0)});case 24:case"end":return r.stop()}},x,null,[[3,20]])}));return function(b,w){return _.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ze.Z,{visable:!0,title:"Claim your token",content:(0,e.jsx)("div",{className:Qe().claimInfoContainer,children:(0,e.jsx)(i.Z,{spinning:!c,children:c&&c.scores&&c.scores.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"Claim now and have your score updated:"}),c.scores.map(function(_){return(0,e.jsxs)("div",{className:Qe().scoreChange,children:[(0,e.jsx)(q,{tag:_.tag}),(0,e.jsx)(ce,{score:parseInt(_.score,10)})]})}),!c.signature&&(0,e.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(X.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!c,onClick:function(){return be(!0)},children:"Claim"})}),close:function(){return W()}}),(0,e.jsx)(Ee.Z,{visable:le,setVisable:be,passphrase:Y,setPassphrase:he,func:Ne})]})},ve=te,We=function(u){var W,f=u.ad,z=u.nftId,Se=u.referrer,j=u.asset,Ce=u.avatar,fe=u.did,h=u.adData,c=u.adImageOnLoad,ne=c===void 0?function(){}:c,je=(0,n.tT)("currentUser"),l=je.wallet,le=(0,o.useState)(""),be=(0,m.Z)(le,2),pe=be[0],$=be[1],Y=(0,o.useState)(!1),he=(0,m.Z)(Y,2),Pe=he[0],P=he[1],ee=(0,o.useState)(""),Oe=(0,m.Z)(ee,2),Ne=Oe[0],_=Oe[1],x=(0,o.useState)(!1),b=(0,m.Z)(x,2),w=b[0],O=b[1],I=(0,o.useState)(!1),A=(0,m.Z)(I,2),ie=A[0],r=A[1],ae=(0,n.tT)("apiWs"),g=(0,n.YB)(),sa=l!=null&&l.did?"".concat(window.location.origin,"/").concat(fe,"/").concat(z,"?referrer=").concat(l==null?void 0:l.did):"".concat(window.location.origin,"/").concat(fe,"/").concat(z),ra=n.m8.location.query,ke=ra,Ea=ke.audience,$e=ke.scope,ta=$e!=null?$e:"",ge=ta.indexOf("sign")>-1,Sa=function(){var Z=(0,T.Z)(d().mark(function S(){var H,C,De,k,D,V,ia,Ke,Ie;return d().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(!!l&&!!(l!=null&&l.keystore))){K.next=19;break}if(H=Date.now()/1e3|0,C=JSON.stringify({alg:ge?"SrDSA":"none",typ:"JWT"}),De=JSON.stringify({iss:window.location.origin,sub:l==null?void 0:l.account,aud:Ea,iat:H,exp:H+30}),k="".concat((0,J.tH)(C),".").concat((0,J.tH)(De)),ge){K.next=8;break}return _("".concat(k,".")),K.abrupt("return");case 8:if(D=new we.ZP({type:"sr25519"}),V=(0,Fe.Gh)((l==null?void 0:l.passphrase)||pe,l==null?void 0:l.keystore),!(V==null||!V)){K.next=13;break}return xe.default.error(g.formatMessage({id:"error.passphrase.error"})),K.abrupt("return");case 13:ia=D.createFromUri(V),Ke=ia.sign(k),Ie="".concat(k,".").concat((0,J.tH)(Ke)),_(Ie),K.next=20;break;case 19:L.default.error({key:"accessDenied",message:g.formatMessage({id:"error.accessDenied"}),duration:null});case 20:case"end":return K.stop()}},S)}));return function(){return Z.apply(this,arguments)}}(),na=function(){var Z=(0,T.Z)(d().mark(function S(H,C){return d().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(H&&C)){k.next=2;break}return k.abrupt("return");case 2:window.open("".concat(f==null?void 0:f.link,"&nftId=").concat(z,"&did=").concat(l==null?void 0:l.did,"&ad=").concat(h==null?void 0:h.id,"&t=").concat(Date.now(),"&poster=").concat(f==null?void 0:f.poster));case 3:case"end":return k.stop()}},S)}));return function(H,C){return Z.apply(this,arguments)}}(),la=(0,re.st)(h==null?void 0:h.creator).substring(8);(0,o.useEffect)(function(){!!l&&!!(l!=null&&l.keystore)&&Sa()},[l,l==null?void 0:l.keystore]);var Ca=function(){var Z=(0,T.Z)(d().mark(function S(H,C,De){var k;return d().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,H.query.ad.payout(C,De);case 2:k=V.sent,k.isEmpty?r(!1):r(!0);case 4:case"end":return V.stop()}},S)}));return function(H,C,De){return Z.apply(this,arguments)}}();return(0,o.useEffect)(function(){ae&&h!==null&&h!==void 0&&h.id&&l!==null&&l!==void 0&&l.did&&Ca(ae,h==null?void 0:h.id,l==null?void 0:l.did)},[ae,h,l]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:p().advertisementContainer,children:[(0,e.jsx)("div",{className:p().container,children:(0,e.jsx)("div",{className:p().topBar,children:(0,e.jsxs)("div",{className:p().sponsored,children:[(0,e.jsx)(Ze.Z,{src:Ce||"/images/logo-round-core.svg",className:p().avatar,preview:!1,id:"avatar",fallback:"/images/logo-round-core.svg"}),(0,e.jsx)("span",{children:g.formatMessage({id:"creator.explorer.advertisement.sponsoredBy"},{did:"".concat(la)})})]})})}),(0,e.jsx)(Q.Z,{className:"".concat(F().card," ").concat(p().adCard),style:{maxWidth:"650px",border:"none",marginBottom:"30px"},bodyStyle:{padding:0,width:"100%"},children:(0,e.jsxs)("div",{className:p().advertisement,children:[(0,e.jsx)("div",{className:p().adMedia,children:(0,e.jsx)(Ze.Z,{src:f==null?void 0:f.media,placeholder:!0,preview:!1,className:p().adMediaImg,onClick:function(){ge?P(!0):na()},onLoad:ne})}),(f==null?void 0:f.instructions)&&(f==null||(W=f.instructions)===null||W===void 0?void 0:W.length)>0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:p().instructions,children:[(0,e.jsx)("div",{className:p().instructionTitle,children:"Follow the instructions to improve your parami score"}),f.instructions.map(function(Z){return(0,e.jsxs)("div",{className:p().instruction,children:[(0,e.jsx)("span",{className:p().instructionText,children:Z.text}),!!Z.tag&&(0,e.jsx)(q,{tag:Z.tag}),!!Z.score&&(0,e.jsx)(ce,{score:parseInt(Z.score,10)})]})})]})})]})}),(0,e.jsxs)("div",{className:p().buttonContainer,children:[ie&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(X.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,e.jsx)(y,{}),className:p().shareButton,onClick:(0,T.Z)(d().mark(function Z(){var S;return d().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(S={title:"Para Metaverse Identity",text:g.formatMessage({id:"creator.explorer.shareMessage"}),url:sa},!(navigator.canShare&&navigator.canShare(S))){C.next=12;break}return C.prev=2,C.next=5,navigator.share(S);case 5:C.next=10;break;case 7:C.prev=7,C.t0=C.catch(2),console.log(C.t0);case 10:C.next=14;break;case 12:s()(sa+" ".concat(g.formatMessage({id:"creator.explorer.shareMessage"},{token:"$".concat(j==null?void 0:j.symbol)}))),xe.default.success(g.formatMessage({id:"common.copied"}));case 14:case"end":return C.stop()}},Z,null,[[2,7]])})),children:g.formatMessage({id:"creator.explorer.advertisement.share"},{token:"$".concat(j==null?void 0:j.symbol)})})}),!ie&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(X.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,e.jsx)(Me,{}),className:p().claimBtn,onClick:function(){return O(!0)},children:"Claim your $".concat(j==null?void 0:j.symbol)})})]}),w&&(0,e.jsx)(ve,{adId:h==null?void 0:h.id,nftId:z,referrer:Se,onClose:function(){return O(!1)},onClaim:function(){O(!1),r(!0)}}),(0,e.jsx)(Ee.Z,{visable:Pe,setVisable:P,passphrase:pe,setPassphrase:$,func:na})]})})},U=We,aa=a(90802),N=a.n(aa),Ia=a(51615),R=a(28943),Ma=a(51625),Ha=a(47673),Za=a(32787),Va=a(402),xa=a(3887),Aa=a(3548),Ta=xa.Z.Title,Na=function(u){var W=u.nft,f=(0,n.tT)("balance"),z=f.balance,Se=(0,n.tT)("currentUser"),j=Se.wallet,Ce=(0,o.useState)(!1),fe=(0,m.Z)(Ce,2),h=fe[0],c=fe[1],ne=(0,o.useState)(!1),je=(0,m.Z)(ne,2),l=je[0],le=je[1],be=(0,o.useState)("0"),pe=(0,m.Z)(be,2),$=pe[0],Y=pe[1],he=(0,o.useState)(""),Pe=(0,m.Z)(he,2),P=Pe[0],ee=Pe[1],Oe=(0,o.useState)(!1),Ne=(0,m.Z)(Oe,2),_=Ne[0],x=Ne[1],b=(0,n.YB)(),w=function(){var O=(0,T.Z)(d().mark(function I(A,ie){var r;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(!!j&&!!(j!=null&&j.keystore))){g.next=18;break}return g.prev=1,g.next=4,(0,R.MW)(W.tokenAssetId,(0,J.HM)($,18).toString(),P,j==null?void 0:j.keystore,A,ie);case 4:if(r=g.sent,le(!1),c(!1),!(A&&ie)){g.next=9;break}return g.abrupt("return",r);case 9:g.next=16;break;case 11:return g.prev=11,g.t0=g.catch(1),L.default.error({message:g.t0.message||g.t0,duration:null}),c(!1),g.abrupt("return");case 16:g.next=19;break;case 18:L.default.error({key:"accessDenied",message:b.formatMessage({id:"error.accessDenied"}),duration:null});case 19:case"end":return g.stop()}},I,null,[[1,11]])}));return function(A,ie){return O.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{tip:b.formatMessage({id:"common.submitting"}),spinning:h,wrapperClassName:F().pageContainer,children:[(0,e.jsx)(Q.Z,{className:F().card,bodyStyle:{width:"100%"},children:(0,e.jsxs)("div",{className:p().trade,children:[(0,e.jsx)(Ta,{level:3,style:{fontWeight:"bold",textAlign:"center"},className:F().title,children:b.formatMessage({id:"creator.explorer.support"})}),(0,e.jsx)(Za.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(p().input," bigInput"),value:$,onChange:function(I){Y(I.target.value)},disabled:h,type:"number"}),(0,e.jsx)(Be.Z,{}),(0,e.jsx)(X.Z,{block:!0,shape:"round",type:"primary",size:"large",onClick:function(){le(!0)},children:b.formatMessage({id:"creator.explorer.support"})})]})}),(0,e.jsx)(ze.Z,{visable:l,title:b.formatMessage({id:"creator.explorer.support"}),content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:p().tradeModal,children:[(0,e.jsx)(Za.Z,{autoFocus:!0,size:"large",placeholder:b.formatMessage({id:"stake.add.number.placeholder"}),bordered:!1,className:"".concat(p().input," bigInput"),value:$,onChange:function(I){Y(I.target.value)},disabled:h,type:"number"}),(0,e.jsxs)("div",{className:p().field,children:[(0,e.jsx)("span",{className:p().title,children:b.formatMessage({id:"creator.explorer.availableBalance"})}),(0,e.jsx)("span",{className:p().value,children:(0,e.jsx)(Aa.Z,{value:z.free})})]})]})}),footer:(0,e.jsx)(X.Z,{block:!0,shape:"round",type:"primary",size:"large",loading:h,disabled:(0,J.HM)($,18)<=BigInt(0)||(0,J.HM)($,18)>BigInt(z.free),onClick:function(){c(!0),x(!0)},children:b.formatMessage({id:"common.submit"})}),close:function(){le(!1)}}),(0,e.jsx)(Ee.Z,{visable:_,setVisable:x,passphrase:P,setPassphrase:ee,func:w})]})})},_a=Na,Ba=a(13580),La=a(33044),Ua=a(29791),Wa=function(){var u,W,f=(0,n.tT)("apiWs"),z=(0,n.tT)("currentUser"),Se=z.wallet,j=(0,n.tT)("bodyChange"),Ce=j.bodyHeight,fe=(0,o.useState)(!0),h=(0,m.Z)(fe,2),c=h[0],ne=h[1],je=(0,o.useState)(""),l=(0,m.Z)(je,2),le=l[0],be=l[1],pe=(0,o.useState)(!0),$=(0,m.Z)(pe,2),Y=$[0],he=$[1],Pe=(0,o.useState)(),P=(0,m.Z)(Pe,2),ee=P[0],Oe=P[1],Ne=(0,o.useState)(),_=(0,m.Z)(Ne,2),x=_[0],b=_[1],w=(0,o.useState)(),O=(0,m.Z)(w,2),I=O[0],A=O[1],ie=(0,o.useState)(!1),r=(0,m.Z)(ie,2),ae=r[0],g=r[1],sa=(0,o.useState)(),ra=(0,m.Z)(sa,2),ke=ra[0],Ea=ra[1],$e=(0,o.useState)(),ta=(0,m.Z)($e,2),ge=ta[0],Sa=ta[1],na=(0,o.useState)(null),la=(0,m.Z)(na,2),Ca=la[0],Z=la[1],S=(0,n.YB)(),H=(0,n.md)(),C=(u=document.getElementById("avatar"))===null||u===void 0?void 0:u.offsetTop,De=(W=document.getElementById("avatar"))===null||W===void 0?void 0:W.offsetLeft,k=document.body.clientWidth,D=(0,Ia.UO)(),V=n.m8.location.query,ia=V,Ke=ia.referrer,Ie=D!=null&&D.kol?"did"+(D==null?void 0:D.kol):(0,re.st)(Se.did),oa=(0,re.Zc)(Ie),K=function(E){L.default.error({message:E.message,duration:null})},Ka=function(){var M=(0,T.Z)(d().mark(function E(){var v;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ae.qX)(D.nftID);case 2:if(v=t.sent,v){t.next=6;break}return n.m8.replace("".concat(window.location.pathname,"/dao")),t.abrupt("return");case 6:Ea(v);case 7:case"end":return t.stop()}},E)}));return function(){return M.apply(this,arguments)}}(),Ra=function(){var M=(0,T.Z)(d().mark(function E(v){var B,t,ja,oe,Re;return d().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!((v==null||(B=v.metadata)===null||B===void 0?void 0:B.indexOf("ipfs://"))<0)){se.next=2;break}return se.abrupt("return");case 2:return ja=v==null||(t=v.metadata)===null||t===void 0?void 0:t.substring(7),se.next=5,fetch(Ma.Z.ipfs.endpoint+ja);case 5:return oe=se.sent,se.next=8,oe.json();case 8:if(Re=se.sent,Re){se.next=11;break}return se.abrupt("return");case 11:Re.link=Re.link+"?kol="+(0,re.Zc)(Ie),Ke&&(Re.link+="&referrer="+Ke),Z(Re);case 15:case"end":return se.stop()}},E)}));return function(v){return M.apply(this,arguments)}}();(0,o.useEffect)(function(){if(ke)try{var M=ke.ad;if(!(M!=null&&M.metadata))return;Sa(M),Ra(M)}catch(E){K(E)}},[ke]);var wa=function(){var M=(0,T.Z)(d().mark(function E(){var v;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,R.JI)(oa);case 3:if(v=t.sent,!v.isEmpty){t.next=7;break}return he(!1),t.abrupt("return");case 7:window.location.href="".concat(window.location.origin,"/").concat(Ie,"/").concat(v),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),L.default.error({message:t.t0.message,duration:null}),t.abrupt("return");case 14:case"end":return t.stop()}},E,null,[[0,10]])}));return function(){return M.apply(this,arguments)}}(),Fa=function(){var M=(0,T.Z)(d().mark(function E(){var v;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,La.q5)(oa);case 2:if(v=t.sent,v){t.next=7;break}return L.default.error({message:S.formatMessage({id:"error.identity.notFound"}),duration:null}),n.m8.goBack(),t.abrupt("return");case 7:Oe(v);case 9:case"end":return t.stop()}},E)}));return function(){return M.apply(this,arguments)}}(),za=function(){var M=(0,T.Z)(d().mark(function E(){return d().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return ne(!1),B.abrupt("return");case 2:case"end":return B.stop()}},E)}));return function(){return M.apply(this,arguments)}}();(0,o.useEffect)(function(){ee&&(document.title="".concat((ee==null?void 0:ee.nickname.toString())||Ie," - Para Metaverse Identity"),za().catch(K))},[ee]);var $a=function(){var M=(0,T.Z)(d().mark(function E(){var v;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,R.X6)(D==null?void 0:D.nftID);case 2:if(v=t.sent,v){t.next=7;break}return L.default.error({message:S.formatMessage({id:"error.nft.notFound"}),duration:null}),n.m8.goBack(),t.abrupt("return");case 7:if((v==null?void 0:v.owner)===oa){t.next=11;break}return L.default.error({message:S.formatMessage({id:"error.nft.notFound"}),duration:null}),n.m8.goBack(),t.abrupt("return");case 11:b(v);case 12:case"end":return t.stop()}},E)}));return function(){return M.apply(this,arguments)}}();return(0,o.useEffect)(function(){var M=function(){var E=(0,T.Z)(d().mark(function v(){var B,t;return d().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,Ba.Ay)(x==null?void 0:x.tokenAssetId);case 2:if(B=oe.sent,!B.isEmpty){oe.next=6;break}return he(!1),oe.abrupt("return");case 6:t=B.toHuman(),A(t);case 8:case"end":return oe.stop()}},v)}));return function(){return E.apply(this,arguments)}}();if(x)try{M()}catch(E){K(E)}},[x]),(0,o.useEffect)(function(){I&&Ka().catch(K)},[I]),(0,o.useEffect)(function(){if(f&&!(D!=null&&D.nftID)&&wa(),H.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),g(!0)),f)try{$a(),Fa()}catch(M){K(M)}},[f]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:N().explorerContainer,children:[Y&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ze.Z,{src:le||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:N().avatar,style:{top:c?(Ce-400)/2:C,left:c?(k-200)/2:De,width:c?200:30,height:c?200:30,animation:c?1:0,position:c?"fixed":"absolute",display:c||ge&&Object.keys(ge).length?"flex":"none"},preview:!1}),(0,e.jsx)("div",{className:N().loading,style:{opacity:c?1:0,zIndex:c?15:-1,height:Ce,minHeight:"100vh"},children:(0,e.jsx)("span",{className:N().loadingTip,children:S.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,e.jsx)("br",{})})})})]}),!Y&&H.canWalletUser&&x&&(0,e.jsx)("div",{className:F().pageContainer,style:{paddingTop:50,maxWidth:1920},children:(0,e.jsx)(_a,{nft:x})}),Y&&ge&&Object.keys(ge).length>0&&(0,e.jsx)("div",{className:F().pageContainer,style:{paddingTop:50,maxWidth:"100%"},children:(0,e.jsx)(U,{ad:Ca,nftId:D==null?void 0:D.nftID,referrer:Ke,asset:I,avatar:le,did:Ie,adData:ge,adImageOnLoad:function(){ne(!1)}})}),(0,e.jsx)(Ua.Z,{})]}),(0,e.jsx)(ze.Z,{visable:ae,title:S.formatMessage({id:"error.identity.notUser"}),content:(0,e.jsx)("div",{className:N().notUser,children:(0,e.jsxs)("div",{className:N().buttons,children:[(0,e.jsxs)(X.Z,{block:!0,size:"large",type:"primary",shape:"round",className:N().button,onClick:function(){n.m8.push(Ma.Z.page.createPage)},children:[(0,e.jsx)("div",{className:N().title,children:S.formatMessage({id:"index.createAccount"})}),(0,e.jsx)("span",{className:N().desc,children:S.formatMessage({id:"index.createAccount.desc"})})]}),(0,e.jsx)(Be.Z,{children:S.formatMessage({id:"index.or"})}),(0,e.jsxs)(X.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(N().button," ").concat(N().buttonImport),onClick:function(){n.m8.push(Ma.Z.page.recoverPage)},children:[(0,e.jsx)("div",{className:N().title,children:S.formatMessage({id:"index.importAccount"})}),(0,e.jsx)("span",{className:N().desc,children:S.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})},ka=Wa}}]);
