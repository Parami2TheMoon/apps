(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5808],{55133:function(S){S.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(S){S.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},76705:function(S){S.exports={loginCard:"loginCard___29ISC",title:"title___1Nywl",appList:"appList___3WcLg",appItem:"appItem___3n4xF",appIcon:"appIcon___3I5gJ",info:"info___AECmK",name:"name___1p-lf",icon:"icon___3Ijcm",desc:"desc___1DhqV",rightArrow:"rightArrow___Np2km",getWallet:"getWallet___3Nr1f",modalContainer:"modalContainer___2uiYJ",logo:"logo___3P-qd"}},28633:function(S){S.exports={selectContainer:"selectContainer___1_GbB",selectHeader:"selectHeader___9PjRk",selectHeaderSectionTitle:"selectHeaderSectionTitle___2UWhg",fromNetwork:"fromNetwork___3jU-L",fromNetworkIcon:"fromNetworkIcon___39QEQ",selectWrapper:"selectWrapper___3-vMT",tokenListTitle:"tokenListTitle___3NE5A",field:"field___3TESR",title:"title___lB2c6",icon:"icon___2c9Ay",name:"name___3riee",value:"value___1Ts9J"}},76824:function(S){S.exports={modal:"modal___2kgj1",spinContainer:"spinContainer___1KYK8",alertContainer:"alertContainer___3owY0",buttons:"buttons___En-Xg",button:"button___SXVEF",fieldsContainer:"fieldsContainer___XT086",field:"field___22Tmv",label:"label___2u_4k",small:"small___1wJL4",labelIcon:"labelIcon___2JQT2",value:"value___1L63r"}},57129:function(S){S.exports={bridgeContainer:"bridgeContainer___KUa_y",leftContainer:"leftContainer___BhZ7T",innerWrapper:"innerWrapper___bZZx8",description:"description___3-8tl",points:"points___35dws",bottomSection:"bottomSection___3tOew",background:"background___8FvqH",rightContainer:"rightContainer___SWVmp",bridgeTabs:"bridgeTabs___1q5d5",bridgeTabsItem:"bridgeTabsItem___2dz-9",active:"active___1gpqP",bridgeBody:"bridgeBody___K06_-",fromLabel:"fromLabel___36_v-",toLabel:"toLabel___nk7uU",destinationLabel:"destinationLabel___2BpNo",formSection:"formSection___38r3Z",chainAndBalanceDetails:"chainAndBalanceDetails___2tWhw",tokenAndAmountDetails:"tokenAndAmountDetails___2QCCc",tokenDetails:"tokenDetails___5YGpq",chainIcon:"chainIcon___1kqp4",tokenDetailsTokenName:"tokenDetailsTokenName___2ZJGy",tokenDetailsArrow:"tokenDetailsArrow___1MP8-",amountDetails:"amountDetails___1ebLK",amountDetailsMaxButton:"amountDetailsMaxButton___1FzoW",downArrowSection:"downArrowSection___2uyH-",toChainAndBalanceDetails:"toChainAndBalanceDetails___16F2K",chainDetails:"chainDetails___1CxCG",chainDetailsChainName:"chainDetailsChainName___25YMo",balanceDetails:"balanceDetails___3lQpW",balanceDetailsLabel:"balanceDetailsLabel___39XMY",balanceDetailsBalance:"balanceDetailsBalance___1gKPg",transferButton:"transferButton___1hXV4",destinationDetails:"destinationDetails___Ut9dq",destinationMyAddressButton:"destinationMyAddressButton___5f5Zy",processContainer:"processContainer___3kyyc",title:"title___32jxA",cardContainer:"cardContainer___2qpms",listHash:"listHash___3ya_j",field:"field___vgM6V",value:"value___1DSzY"}},24787:function(S){S.exports={mainContainer:"mainContainer___VzUCC",mainBgContainer:"mainBgContainer___2Nlq7",mainIndexContainer:"mainIndexContainer___1Mqvq",background:"background___25786",logoMark:"logoMark___153gX",mainTopContainer:"mainTopContainer___2Cw6K",pageContainer:"pageContainer___2ssxe",stepContainer:"stepContainer___LPJXV",contentContainer:"contentContainer___2e-al",badge:"badge___3vf4B",dashboardCard:"dashboardCard___3oOcj",windowCard:"windowCard___3FjX2",windowCardBody:"windowCardBody___2zSRs",field:"field___3q5d2",title:"title___1BPSo",value:"value___1TvCY",rowField:"rowField___1vUg5",switchButton:"switchButton___3EjXy",statistic:"statistic___2TWER",modalBody:"modalBody___3SJQA",dividerTitle:"dividerTitle___1UTj3",table:"table___1zfPw",withAfterInput:"withAfterInput___3UZxJ",tabSelector:"tabSelector___2tj32",tabItem:"tabItem___3ymbk",inactive:"inactive___12iuZ",noAssets:"noAssets___FcwbD",topImage:"topImage___mHPfd"}},97409:function(S,X,a){"use strict";var De=a(71153),T=a(60331),re=a(12968),E=a(62462),ie=a(67294),G=a(43581),v=a(72643),r=a(73218),t=a(85893);function V(K){var ue=K.theme,s=K.supportedChainId,me=(0,G.tT)("web3"),U=me.Account,Ee=me.ChainName,j=me.ChainId,ve=s&&j&&s!==j;return(0,t.jsx)(t.Fragment,{children:U&&(0,t.jsxs)("div",{className:"addressContainer ".concat(ue!=null?ue:"wallet"," ").concat(ve?"notSupported":""),children:[ve&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"error",children:[(0,t.jsx)(r.Z,{className:"error-icon"}),"Network Type Error"]}),(0,t.jsxs)("div",{className:"error-msg",children:["Please switch to ",v.i[s],"."]})]}),!ve&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"ethLogo",children:[(0,t.jsx)(E.Z,{src:"/images/crypto/eth-circle.svg",preview:!1,className:"ethLogoImg"}),"ETH Address"]}),!!j&&j!==1&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(T.Z,{color:"orange",children:Ee})}),(0,t.jsxs)("div",{className:"currentAddress",children:[(0,t.jsx)("span",{className:"prefix",children:"Current Address:"}),(0,t.jsx)("span",{className:"address",children:U})]})]})]})})}X.Z=V},69764:function(S,X,a){"use strict";var De=a(71194),T=a(50146),re=a(57663),E=a(71577),ie=a(402),G=a(3887),v=a(67294),r=a(55133),t=a.n(r),V=a(54549),K=a(85893),ue=G.Z.Title,s=function(U){var Ee=U.visable,j=U.title,ve=U.content,he=U.footer,W=U.close,q=U.bodyStyle,le=U.width;return(0,K.jsx)(T.Z,{title:j?(0,K.jsx)(ue,{level:5,className:t().title,children:j}):null,closable:!!W,closeIcon:(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(E.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,K.jsx)(V.Z,{onClick:W})})}),className:t().modal,centered:!0,visible:Ee,width:le!=null?le:650,footer:he,bodyStyle:q,children:ve})};X.Z=s},3548:function(S,X,a){"use strict";var De=a(67294),T=a(31639),re=a.n(T),E=a(96534),ie=a(85893),G=function(r){var t=r.value,V=r.style;return(0,ie.jsxs)("div",{className:re().ad3,style:V,children:[t?(0,E.MP)(t):"--",(0,ie.jsx)("span",{className:re().unit,children:"\xA0$AD3"})]})};X.Z=G},57651:function(S,X,a){"use strict";var De=a(67294),T=a(31639),re=a.n(T),E=a(96534),ie=a(85893),G=function(r){var t=r.value,V=r.symbol;return(0,ie.jsxs)("div",{className:re().ad3,children:[t?(0,E.MP)(t.replaceAll(",","")):"--",V&&(0,ie.jsxs)("span",{className:re().unit,children:["\xA0$",V]})]})};X.Z=G},38655:function(S,X,a){"use strict";var De=a(58024),T=a(39144),re=a(57663),E=a(71577),ie=a(48736),G=a(27049),v=a(3182),r=a(402),t=a(3887),V=a(94043),K=a.n(V),ue=a(67294),s=a(43581),me=a(24787),U=a.n(me),Ee=a(76705),j=a.n(Ee),ve=a(8812),he=a(89583),W=a(85893),q=function(){var Re=(0,s.tT)("web3"),ee=Re.connect,Ne=(0,s.YB)(),b=t.Z.Title;return(0,W.jsx)("div",{className:U().mainContainer,children:(0,W.jsx)("div",{className:U().contentContainer,children:(0,W.jsxs)(T.Z,{className:j().loginCard,bodyStyle:{padding:32,width:"100%"},children:[(0,W.jsx)(b,{level:4,className:j().title,children:Ne.formatMessage({id:"dashboard.bridge.login",defaultMessage:"Login"})}),(0,W.jsx)("div",{className:j().appList,children:(0,W.jsxs)("div",{className:j().appItem,onClick:(0,v.Z)(K().mark(function He(){return K().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,ee();case 2:case"end":return _e.stop()}},He)})),children:[(0,W.jsx)("div",{className:j().info,children:(0,W.jsxs)("span",{className:j().name,children:[(0,W.jsx)(he.OZg,{className:j().icon}),"Connect Wallet"]})}),(0,W.jsx)(ve.Z,{className:j().rightArrow})]})}),(0,W.jsx)(G.Z,{}),(0,W.jsxs)("div",{className:j().getWallet,children:[Ne.formatMessage({id:"dashboard.bridge.dontHaveWallet",defaultMessage:"Don't have wallet?"}),(0,W.jsx)(E.Z,{type:"link",size:"middle",children:Ne.formatMessage({id:"dashboard.bridge.downloadHere",defaultMessage:"Download here"})})]})]})})})};X.Z=q},5879:function(S,X,a){"use strict";a.r(X),a.d(X,{default:function(){return Ya}});var De=a(12968),T=a(62462),re=a(74379),E=a(38648),ie=a(402),G=a(3887),v=a(2824),r=a(67294),t=a(43581),V=a(24787),K=a.n(V),ue=a(57129),s=a.n(ue),me=a(94184),U=a.n(me),Ee=a(57663),j=a(71577),ve=a(47673),he=a(32787),W=a(22385),q=a(31097),le=a(11849),Re=a(91220),ee=a(3182),Ne=a(94043),b=a.n(Ne),He=a(57254),Ke=a(21059),_e=a(49101),ta=a(2593),ra=a(17571),Fe=a(7290),ia=a(77616),F=a(59749),fa=a(96534),ga=a(75397),la=a(32059),_a=a(28633),w=a.n(_a),oa=a(69764),xe=a(57651),pa=a(81773),ja=a(81603),da=a(75163),Ca=function(){var O=(0,ee.Z)(b().mark(function i(d,c,n,u){var l,g;return b().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,pa.R0)(c.meta.source);case 2:return l=h.sent,g=d.assetId?window.apiWs.tx.xAssets.transferToken(n,u,d.ethChainId,d.assetId):window.apiWs.tx.xAssets.transferNative(n,u,d.ethChainId),h.next=6,(0,ja.u)(g,l,c);case 6:return h.abrupt("return",h.sent);case 7:case"end":return h.stop()}},i)}));return function(d,c,n,u){return O.apply(this,arguments)}}(),Ea=function(){var O=(0,ee.Z)(b().mark(function i(){var d;return b().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.apiWs.query.xAssets.nativeFee();case 3:if(d=n.sent,!d.isEmpty){n.next=7;break}return E.default.error({message:"Query nativeFee Error",description:"result is empty"}),n.abrupt("return");case 7:return n.abrupt("return",{fee:d.toHuman()});case 10:return n.prev=10,n.t0=n.catch(0),E.default.error({message:"Query nativeFee Error",description:JSON.stringify(n.t0)}),n.abrupt("return");case 14:case"end":return n.stop()}},i,null,[[0,10]])}));return function(){return O.apply(this,arguments)}}(),xa=function(){var O=(0,ee.Z)(b().mark(function i(d,c){var n;return b().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,window.apiWs.query.xAssets.transferTokenFee(d,c);case 3:if(n=l.sent,!n.isEmpty){l.next=7;break}return E.default.error({message:"Query ERC20 Token Transfer Fee Error",description:"result is empty"}),l.abrupt("return");case 7:return l.abrupt("return",{fee:n.toHuman()});case 10:return l.prev=10,l.t0=l.catch(0),E.default.error({message:"Query ERC20 Token Transfer Fee Error",description:JSON.stringify(l.t0)}),l.abrupt("return");case 14:case"end":return l.stop()}},i,null,[[0,10]])}));return function(d,c){return O.apply(this,arguments)}}(),ze=function(){var O=(0,ee.Z)(b().mark(function i(d,c,n){var u,l;return b().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return u=new ra.CH(d.contract_address,da,c),o.next=3,u.balanceOf(n);case 3:return l=o.sent,o.abrupt("return",l.toString());case 5:case"end":return o.stop()}},i)}));return function(d,c,n){return O.apply(this,arguments)}}(),$e=function(){var O=(0,ee.Z)(b().mark(function i(d,c){var n,u,l,g,o,h,y,A,R,m,D,H,z,P;return b().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!d.assetId){x.next=9;break}return x.next=3,window.apiWs.query.assets.account(Number(d.assetId),c);case 3:return u=x.sent,l=(n=u.toHuman())!==null&&n!==void 0?n:{},g=l.balance,o=g===void 0?"":g,h=(0,F.At)(o),x.abrupt("return",{free:h,total:h});case 9:return x.next=11,window.apiWs.query.system.account(c);case 11:return m=x.sent,D=(y=m.toHuman())!==null&&y!==void 0?y:{},H=D.data,z=(0,F.At)((A=H==null?void 0:H.free)!==null&&A!==void 0?A:""),P=(0,F.At)((R=H==null?void 0:H.reserved)!==null&&R!==void 0?R:""),x.abrupt("return",{free:z,total:(BigInt(z)+BigInt(P)).toString()});case 16:case"end":return x.stop()}},i)}));return function(d,c){return O.apply(this,arguments)}}(),e=a(85893),Ma="/images/logo-round-core.svg",ba=function(i){var d=i.chain,c=i.onClose,n=i.onSelectToken,u=(0,t.tT)("apiWs"),l=(0,t.tT)("web3"),g=l.Account,o=l.ChainName,h=l.Signer,y=(0,t.tT)("currentUser"),A=y.dashboard,R=(0,t.tT)("chainbridge"),m=R.tokens,D=(0,r.useState)({}),H=(0,v.Z)(D,2),z=H[0],P=H[1],oe=(0,t.YB)(),x=function(L){return L.reduce(function(B,k){return(0,le.Z)((0,le.Z)({},B),k)},{})};return(0,r.useEffect)(function(){(m==null?void 0:m.length)>0&&g&&h&&d==="ethereum"&&Promise.all(m.map(function(){var C=(0,ee.Z)(b().mark(function L(B){var k;return b().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,ze(B,h,g);case 2:return k=_.sent,_.abrupt("return",(0,la.Z)({},B.name,k));case 4:case"end":return _.stop()}},L)}));return function(L){return C.apply(this,arguments)}}())).then(function(C){P(x(C))})},[m,g,h]),(0,r.useEffect)(function(){(m==null?void 0:m.length)>0&&u&&A&&d!=="ethereum"&&Promise.all(m.map(function(){var C=(0,ee.Z)(b().mark(function L(B){var k;return b().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,$e(B,A.account);case 2:return k=_.sent,_.abrupt("return",(0,la.Z)({},B.name,k.free));case 4:case"end":return _.stop()}},L)}));return function(L){return C.apply(this,arguments)}}())).then(function(C){P(x(C))})},[m,u,A]),(0,e.jsx)(oa.Z,{title:void 0,visable:!0,content:(0,e.jsxs)("div",{className:w().selectContainer,children:[(0,e.jsx)("div",{className:w().selectHeader,children:(0,e.jsx)("div",{className:w().selectHeaderSectionTitle,children:oe.formatMessage({id:"dashboard.bridge.selectToken",defaultMessage:"Select a token from {chain}"},{chain:d==="ethereum"?(0,e.jsxs)("div",{className:w().fromNetwork,children:[(0,e.jsx)(T.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:w().fromNetworkIcon}),(0,e.jsx)("span",{className:w().chainDetailsChainName,children:o})]}):(0,e.jsxs)("div",{className:w().fromNetwork,children:[(0,e.jsx)(T.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:w().fromNetworkIcon}),(0,e.jsx)("span",{className:w().chainDetailsChainName,children:"Parami chain"})]})})})}),(0,e.jsxs)("div",{className:w().selectWrapper,children:[(0,e.jsxs)("div",{className:w().tokenListTitle,children:[(0,e.jsx)("span",{children:"Name"}),(0,e.jsx)("span",{children:"Available Balance"})]}),(m==null?void 0:m.length)>0&&(0,e.jsx)(e.Fragment,{children:m.map(function(C){var L,B;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:w().field,onClick:function(){return n(C)},children:[(0,e.jsxs)("span",{className:w().title,children:[(0,e.jsx)(T.Z,{className:w().icon,src:(L=C.icon)!==null&&L!==void 0?L:Ma,preview:!1}),(0,e.jsx)("span",{className:w().name,children:C.name})]}),(0,e.jsx)("span",{className:w().value,children:(0,e.jsx)(xe.Z,{value:(B=z[C.name])!==null&&B!==void 0?B:"0",symbol:C.symbol})})]},C.resourceId)})})})]})]}),footer:!1,close:function(){c()},bodyStyle:{padding:0}})},ca=ba,Ta=a(6221),Da=a(48352),Na=a(48764).Buffer,Sa=function(i){var d=i.setLoading,c=i.setStep,n=i.setETHHash,u=i.setParamiHash,l=(0,t.tT)("apiWs"),g=(0,t.tT)("currentUser"),o=g.dashboard,h=(0,t.tT)("web3"),y=h.Account,A=h.ChainName,R=h.Provider,m=h.Signer,D=h.ChainId,H=(0,t.tT)("paramiEvents"),z=H.Events,P=H.SubParamiEvents,oe=(0,r.useState)(),x=(0,v.Z)(oe,2),C=x[0],L=x[1],B=(0,t.tT)("contracts"),k=B.BridgeContract,de=(0,r.useState)(BigInt(0)),_=(0,v.Z)(de,2),ae=_[0],pe=_[1],Qe=(0,r.useState)(""),Se=(0,v.Z)(Qe,2),se=Se[0],ye=Se[1],Xe=(0,r.useState)(!1),Ae=(0,v.Z)(Xe,2),ke=Ae[0],Me=Ae[1],Ge=(0,r.useState)(""),Pe=(0,v.Z)(Ge,2),je=Pe[0],be=Pe[1],Ve=(0,r.useState)(!1),ge=(0,v.Z)(Ve,2),qe=ge[0],Te=ge[1],M=(0,t.tT)("chainbridge"),ce=M.tokens,ea=(0,r.useState)(),Be=(0,v.Z)(ea,2),p=Be[0],Ie=Be[1],aa=(0,r.useState)(""),Ze=(0,v.Z)(aa,2),Oe=Ze[0],sa=Ze[1],ne=(0,r.useState)(""),Ue=(0,v.Z)(ne,2),Le=Ue[0],I=Ue[1];(0,r.useEffect)(function(){ce!=null&&ce.length&&Ie(ce[0])},[ce]);var N=(0,t.YB)();(0,r.useEffect)(function(){p&&m&&y&&ze(p,m,y).then(function(Z){I(Z)})},[p,m,y]),(0,r.useEffect)(function(){p&&l&&o!==null&&o!==void 0&&o.account&&$e(p,o.account).then(function(Z){sa(Z.total)})},[p,l,o]);var Ce,te=function($,Q){return"".concat($.event.section,":").concat($.event.method)==="chainBridge:ProposalSucceeded"&&BigInt($.event.data[1].toString())===Q},Y=function(){var Z=(0,ee.Z)(b().mark(function $(){var Q,We,va,we,na,ha;return b().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(!R||!m)){f.next=2;break}return f.abrupt("return");case 2:if(Q=je,!(je.indexOf("did:ad3")>-1)){f.next=15;break}return f.prev=4,f.next=7,(0,ga.Ob)(je);case 7:We=f.sent,We||E.default.error({message:"Invalid DID",duration:null}),Q=We.account,f.next=15;break;case 12:f.prev=12,f.t0=f.catch(4),E.default.error({message:f.t0.message||f.t0,duration:null});case 15:return Q="0x".concat(Na.from((0,Ta.m)(Q)).toString("hex")),va="0x"+Fe.$m(ta.O$.from(ia.vz(se,18)).toHexString(),32).substring(2)+Fe.$m(Fe.Dv((Q.length-2)/2),32).substring(2)+Q.substring(2),f.prev=17,d(!0),E.default.info({message:"Approve Token Access"}),we=new ra.CH(p.contract_address,da,m),f.next=23,we==null?void 0:we.approve(Da.q7.erc20handler[D],ta.O$.from(ia.vz(se.toString(),18)));case 23:return f.next=25,f.sent.wait();case 25:return E.default.info({message:"Deposit Token"}),f.next=28,k==null?void 0:k.deposit(p.paramiChainId,p.resourceId,va);case 28:return f.next=30,f.sent.wait();case 30:return na=f.sent,ha=BigInt(na.logs[2].topics[3]),pe(ha),n(na.transactionHash),c(2),Me(!0),f.next=38,P();case 38:Ce=f.sent,L(function(){return Ce}),f.next=46;break;case 42:f.prev=42,f.t1=f.catch(17),E.default.error({message:f.t1.message||f.t1,duration:null}),d(!1);case 46:case"end":return f.stop()}},$,null,[[4,12],[17,42]])}));return function(){return Z.apply(this,arguments)}}();return(0,r.useEffect)(function(){if(ke){var Z=(0,Re.Z)(z),$;try{for(Z.s();!($=Z.n()).done;){var Q=$.value;console.log("event","".concat(Q.event.section,":").concat(Q.event.method)),te(Q,ae)&&(Me(!1),c(3),C&&C(),E.default.success({message:"Deposit Success"}),u(Q.blockHash),Ie((0,le.Z)({},p)))}}catch(We){Z.e(We)}finally{Z.f()}}},[z,ae,ke,C]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:s().fromLabel,children:N.formatMessage({id:"dashboard.bridge.from",defaultMessage:"From"})}),(0,e.jsxs)("div",{className:s().formSection,children:[(0,e.jsxs)("div",{className:s().chainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(T.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:A})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[N.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(q.Z,{placement:"top",title:(0,F.mI)(Le,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(xe.Z,{value:Le,symbol:p==null?void 0:p.symbol})})})]})]}),(0,e.jsxs)("div",{className:s().tokenAndAmountDetails,children:[(0,e.jsxs)("div",{className:s().tokenDetails,onClick:function(){Te(!0)},children:[(0,e.jsx)(T.Z,{src:p==null?void 0:p.icon,preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().tokenDetailsTokenName,children:p==null?void 0:p.name}),(0,e.jsx)(He.Z,{className:s().tokenDetailsArrow})]}),(0,e.jsxs)("div",{className:s().amountDetails,children:[(0,e.jsx)(he.Z,{placeholder:"0.00",type:"number",size:"large",value:se,onChange:function($){ye($.target.value)}}),(0,e.jsx)(j.Z,{className:s().amountDetailsMaxButton,type:"link",size:"small",onClick:function(){ye((0,F.mI)(Le,18))},children:N.formatMessage({id:"dashboard.bridge.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(Ke.Z,{})}),(0,e.jsx)("div",{className:s().toLabel,children:N.formatMessage({id:"dashboard.bridge.to",defaultMessage:"To"})}),(0,e.jsxs)("div",{className:s().toChainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(T.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:"Parami chain"})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[N.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(q.Z,{placement:"top",title:(0,F.mI)(Oe,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(xe.Z,{value:Oe,symbol:p==null?void 0:p.symbol})})})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(_e.Z,{})}),(0,e.jsx)("div",{className:s().destinationLabel,children:N.formatMessage({id:"dashboard.bridge.destinationAddress",defaultMessage:"Destination Address"})}),(0,e.jsxs)("div",{className:s().destinationDetails,children:[(0,e.jsx)(he.Z,{placeholder:"did:ad3:......",type:"text",size:"large",value:je,onChange:function($){be($.target.value)}}),(0,e.jsx)(j.Z,{className:s().destinationMyAddressButton,type:"default",size:"small",onClick:function(){be((0,fa.st)(o.did))},children:N.formatMessage({id:"dashboard.bridge.me",defaultMessage:"ME"})})]}),(0,e.jsx)(j.Z,{block:!0,type:"primary",size:"large",shape:"round",className:s().transferButton,onClick:function(){Y()},disabled:!se||!je||(0,F.HM)(se,18)<=BigInt(0),children:N.formatMessage({id:"dashboard.bridge.transfer",defaultMessage:"Transfer"})}),qe&&(0,e.jsx)(ca,{onClose:function(){return Te(!1)},onSelectToken:function($){Ie($),Te(!1)},chain:"ethereum"})]})},ya=Sa,Ja=a(34792),Aa=a(48086),Pa=function(i){return/^0x[a-fA-F0-9]{40}$/.test(i)},Qa=function(i){return/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{25,39}$/.test(i)},Xa=function(i){try{return encodeAddress(isHex(i)?hexToU8a(i):decodeAddress(i)),!0}catch(d){return!1}},Ga=a(71194),Ba=a(50146),Va=a(17462),Ia=a(76772),qa=a(20228),Ye=a(11382),Za=a(3548),Oa=a(76824),J=a.n(Oa),La=G.Z.Title,Wa=function(i){var d=i.onCancel,c=i.onConfirm,n=i.amount,u=i.token,l=(0,r.useState)(),g=(0,v.Z)(l,2),o=g[0],h=g[1],y=(0,r.useState)(!1),A=(0,v.Z)(y,2),R=A[0],m=A[1];return(0,r.useEffect)(function(){u.assetId?xa(u.ethChainId,u.assetId).then(function(D){h(D)}):Ea().then(function(D){h(D)})},[u]),(0,r.useEffect)(function(){if(o){var D=((0,F.HM)(n,18)-BigInt(o.fee.replaceAll(",",""))).toString();m(!!D&&BigInt(D)<=0)}},[o]),(0,e.jsxs)(Ba.Z,{title:(0,e.jsx)(La,{level:3,style:{marginBottom:0},children:"Confirm Transaction"}),closable:!1,className:J().modal,centered:!0,visible:!0,width:400,footer:(0,e.jsxs)("div",{className:J().buttons,children:[(0,e.jsx)(j.Z,{type:"text",shape:"round",size:"large",className:J().button,onClick:d,children:"Decline"}),(0,e.jsx)(j.Z,{type:"primary",shape:"round",size:"large",className:J().button,onClick:c,disabled:!o||R,children:"Confirm"})]}),children:[!o&&(0,e.jsx)("div",{className:J().spinContainer,children:(0,e.jsx)(Ye.Z,{})}),o&&(0,e.jsxs)(e.Fragment,{children:[R&&(0,e.jsx)(Ia.Z,{description:"Insufficient Amount",type:"error",showIcon:!0,banner:!0,className:J().alertContainer}),(0,e.jsxs)("div",{className:J().fieldsContainer,children:[(0,e.jsxs)("div",{className:J().field,children:[(0,e.jsx)("div",{className:J().label,children:"Transfer Amount:"}),(0,e.jsx)("div",{className:J().value,children:(0,e.jsx)(xe.Z,{value:(0,F.HM)(n,18).toString(),symbol:u.symbol})})]}),(0,e.jsxs)("div",{className:J().field,children:[(0,e.jsx)("div",{className:J().label,children:"Fee:"}),(0,e.jsx)("div",{className:J().value,children:(0,e.jsx)(Za.Z,{value:o.fee.replaceAll(",",""),style:{fontSize:"0.8rem",fontWeight:900}})})]})]})]})]})},Ha=Wa,ka=function(i){var d=i.setLoading,c=i.setStep,n=i.setETHHash,u=i.setParamiHash,l=(0,t.tT)("apiWs"),g=(0,t.tT)("web3"),o=g.Account,h=g.ChainName,y=g.Provider,A=g.Signer,R=(0,t.tT)("currentUser"),m=R.dashboard,D=(0,t.tT)("dashboard.bridgeEvents"),H=D.SubBridgeEvents,z=D.UnsubBridgeEvents,P=D.ProposalEvent,oe=(0,t.tT)("contracts"),x=oe.BridgeContract,C=(0,r.useState)(BigInt(0)),L=(0,v.Z)(C,2),B=L[0],k=L[1],de=(0,r.useState)(""),_=(0,v.Z)(de,2),ae=_[0],pe=_[1],Qe=(0,r.useState)(),Se=(0,v.Z)(Qe,2),se=Se[0],ye=Se[1],Xe=(0,r.useState)(!1),Ae=(0,v.Z)(Xe,2),ke=Ae[0],Me=Ae[1],Ge=(0,r.useState)(!1),Pe=(0,v.Z)(Ge,2),je=Pe[0],be=Pe[1],Ve=(0,t.tT)("chainbridge"),ge=Ve.tokens,qe=(0,r.useState)(),Te=(0,v.Z)(qe,2),M=Te[0],ce=Te[1],ea=(0,r.useState)(""),Be=(0,v.Z)(ea,2),p=Be[0],Ie=Be[1],aa=(0,r.useState)(""),Ze=(0,v.Z)(aa,2),Oe=Ze[0],sa=Ze[1];(0,r.useEffect)(function(){ge!=null&&ge.length&&ce(ge[0])},[ge]);var ne=(0,t.YB)();(0,r.useEffect)(function(){M&&A&&o&&ze(M,A,o).then(function(I){sa(I)})},[M,A,o]),(0,r.useEffect)(function(){M&&l&&m!==null&&m!==void 0&&m.account&&$e(M,m.account).then(function(I){Ie(I.free)})},[M,l,m]);var Ue=function(){var I=(0,ee.Z)(b().mark(function N(){return b().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!(!y||!A)){te.next=2;break}return te.abrupt("return");case 2:if(Pa(se)){te.next=6;break}return Aa.default.error("Please input ETH Address!"),d(!1),te.abrupt("return");case 6:be(!0);case 7:case"end":return te.stop()}},N)}));return function(){return I.apply(this,arguments)}}(),Le=function(){var I=(0,ee.Z)(b().mark(function N(){var Ce;return b().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,d(!0),Y.next=4,Ca(M,JSON.parse(m.accountMeta),(0,F.HM)(ae,18).toString(),se);case 4:Ce=Y.sent,k(BigInt(Ce.chainBridge.FungibleTransfer[0][1])),u(Ce.blockHash),c(2),x?H(x):E.default.error({message:"No bridge contract"}),Y.next=16;break;case 12:Y.prev=12,Y.t0=Y.catch(0),E.default.error({message:Y.t0.message||Y.t0,duration:null}),d(!1);case 16:case"end":return Y.stop()}},N,null,[[0,12]])}));return function(){return I.apply(this,arguments)}}();return(0,r.useEffect)(function(){(P==null?void 0:P.depositNonce)===B&&(P==null?void 0:P.status)==="Executed"&&(c(3),k(BigInt(0)),E.default.success({message:"Withdraw Success"}),P.txHash&&n(P.txHash),x&&z(x),ce((0,le.Z)({},M)))},[x,P,z,B]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:s().fromLabel,children:ne.formatMessage({id:"dashboard.bridge.from",defaultMessage:"From"})}),(0,e.jsxs)("div",{className:s().formSection,children:[(0,e.jsxs)("div",{className:s().chainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(T.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:"Parami chain"})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[ne.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance Available"}),":"]}),(0,e.jsx)(q.Z,{placement:"top",title:(0,F.mI)(p,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(xe.Z,{value:p,symbol:M==null?void 0:M.symbol})})})]})]}),(0,e.jsxs)("div",{className:s().tokenAndAmountDetails,children:[(0,e.jsxs)("div",{className:s().tokenDetails,onClick:function(){Me(!0)},children:[(0,e.jsx)(T.Z,{src:M==null?void 0:M.icon,preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().tokenDetailsTokenName,children:M==null?void 0:M.name}),(0,e.jsx)(He.Z,{className:s().tokenDetailsArrow})]}),(0,e.jsxs)("div",{className:s().amountDetails,children:[(0,e.jsx)(he.Z,{placeholder:"0.00",type:"number",size:"large",value:ae,onChange:function(N){pe(N.target.value)}}),(0,e.jsx)(j.Z,{className:s().amountDetailsMaxButton,type:"link",size:"small",onClick:function(){pe((0,F.mI)(p,18))},children:ne.formatMessage({id:"dashboard.bridge.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(Ke.Z,{})}),(0,e.jsx)("div",{className:s().toLabel,children:ne.formatMessage({id:"dashboard.bridge.to",defaultMessage:"To"})}),(0,e.jsxs)("div",{className:s().toChainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(T.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:h})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[ne.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(q.Z,{placement:"top",title:(0,F.mI)(Oe,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(xe.Z,{value:Oe,symbol:M==null?void 0:M.symbol})})})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(_e.Z,{})}),(0,e.jsx)("div",{className:s().destinationLabel,children:ne.formatMessage({id:"dashboard.bridge.destinationAddress",defaultMessage:"Destination Address"})}),(0,e.jsxs)("div",{className:s().destinationDetails,children:[(0,e.jsx)(he.Z,{placeholder:"0x......",type:"text",size:"large",value:se,onChange:function(N){ye(N.target.value)}}),(0,e.jsx)(j.Z,{className:s().destinationMyAddressButton,type:"default",size:"small",onClick:function(){ye(o)},children:ne.formatMessage({id:"dashboard.bridge.me",defaultMessage:"ME"})})]}),(0,e.jsx)(j.Z,{block:!0,type:"primary",size:"large",shape:"round",className:s().transferButton,onClick:function(){Ue()},disabled:!ae||!se||(0,F.HM)(ae,18)<=BigInt(0)||(0,F.HM)(ae,18)>BigInt(p),children:ne.formatMessage({id:"dashboard.bridge.transfer",defaultMessage:"Transfer"})}),ke&&(0,e.jsx)(ca,{onClose:function(){return Me(!1)},onSelectToken:function(N){ce(N),Me(!1)},chain:"parami"}),je&&M&&(0,e.jsx)(Ha,{onCancel:function(){return be(!1)},onConfirm:function(){be(!1),Le()},amount:ae,token:M})]})},Ua=ka,wa=a(38655),es=a(35556),Je=a(97880),ua=a(51625),ma=a(7085),Ra=a(72643),fe=Je.Z.Step,Ka=function(i){var d=i.tab,c=i.step,n=i.ethHash,u=i.paramiHash,l=i.onClose,g=(0,t.tT)("web3"),o=g.ChainId,h=(0,r.useCallback)(function(){window.open("".concat(Ra.E[o!=null?o:1]).concat(n),"_blank")},[o,n]);return(0,e.jsx)(oa.Z,{visable:!0,content:(0,e.jsxs)("div",{className:s().processContainer,children:[d==="deposit"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Je.Z,{progressDot:!0,size:"small",current:c,children:[(0,e.jsx)(fe,{title:"Enter information"}),(0,e.jsx)(fe,{title:"Ethereum chain"}),(0,e.jsx)(fe,{title:"Parami chain"}),(0,e.jsx)(fe,{title:"Tokens transferred"})]}),(0,e.jsxs)("div",{className:s().title,children:[c===1&&(0,e.jsx)("span",{children:"Ethereum chain"}),c===2&&(0,e.jsx)("span",{children:"Parami chain"}),c===3&&(0,e.jsx)("span",{children:"Tokens transferred"})]}),(0,e.jsx)("div",{className:s().cardContainer,children:n&&u?(0,e.jsxs)("div",{className:s().listHash,children:[(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"Parami chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("".concat(ua.Z.explorer.block,"/").concat(u),"_blank")},children:(0,e.jsx)(q.Z,{placement:"topLeft",title:u,children:u})})]}),(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"ETH chain"}),(0,e.jsx)("span",{className:s().value,onClick:h,children:(0,e.jsx)(q.Z,{placement:"topLeft",title:n,children:n})})]})]}):(0,e.jsx)(Ye.Z,{indicator:(0,e.jsx)(ma.Z,{style:{fontSize:24},spin:!0}),tip:"Transfering..."})})]}),d==="withdraw"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Je.Z,{progressDot:!0,size:"small",current:c,children:[(0,e.jsx)(fe,{title:"Enter information"}),(0,e.jsx)(fe,{title:"Parami chain"}),(0,e.jsx)(fe,{title:"Ethereum chain"}),(0,e.jsx)(fe,{title:"Tokens transferred"})]}),(0,e.jsxs)("div",{className:s().title,children:[c===1&&(0,e.jsx)("span",{children:"Parami chain"}),c===2&&(0,e.jsx)("span",{children:"Ethereum chain"}),c===3&&(0,e.jsx)("span",{children:"Tokens transferred"})]}),(0,e.jsx)("div",{className:s().cardContainer,children:n&&u?(0,e.jsxs)("div",{className:s().listHash,children:[(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"Parami chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("".concat(ua.Z.explorer.block,"/").concat(u),"_blank")},children:(0,e.jsx)(q.Z,{placement:"topLeft",title:u,children:u})})]}),(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"ETH chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("https://etherscan.io/tx/".concat(n),"_blank")},children:(0,e.jsx)(q.Z,{placement:"topLeft",title:n,children:n})})]})]}):(0,e.jsx)(Ye.Z,{indicator:(0,e.jsx)(ma.Z,{style:{fontSize:24},spin:!0}),tip:"Transfering..."})})]})]}),footer:!1,close:n&&u?l:void 0})},Fa=Ka,za=a(97409),$a=function(){var i=(0,t.tT)("web3"),d=i.Account,c=i.connect,n=i.ChainId,u=(0,r.useState)("deposit"),l=(0,v.Z)(u,2),g=l[0],o=l[1],h=(0,r.useState)(!1),y=(0,v.Z)(h,2),A=y[0],R=y[1],m=(0,r.useState)(1),D=(0,v.Z)(m,2),H=D[0],z=D[1],P=(0,r.useState)(),oe=(0,v.Z)(P,2),x=oe[0],C=oe[1],L=(0,r.useState)(),B=(0,v.Z)(L,2),k=B[0],de=B[1],_=(0,t.YB)(),ae=G.Z.Title;return(0,r.useEffect)(function(){c()},[]),(0,r.useEffect)(function(){n&&n!==3&&E.default.warning({message:"Parami Bridge currently only supports Ropsten Testnet",description:"Please switch network in your wallet"})},[n]),(0,e.jsxs)(e.Fragment,{children:[d?(0,e.jsx)("div",{className:K().mainBgContainer,children:(0,e.jsxs)("div",{className:K().contentContainer,children:[(0,e.jsx)(za.Z,{theme:"dashboard"}),(0,e.jsxs)("div",{className:s().bridgeContainer,children:[(0,e.jsxs)("div",{className:s().leftContainer,children:[(0,e.jsxs)("div",{className:s().innerWrapper,children:[(0,e.jsx)(ae,{level:2,children:_.formatMessage({id:"dashboard.bridge.title",defaultMessage:"Parami Bridge"})}),(0,e.jsx)("span",{className:s().description,children:_.formatMessage({id:"dashboard.bridge.description",defaultMessage:"The safe, fast and most secure way to bring cross-chain assets to Parami chain."})}),(0,e.jsxs)("div",{className:s().points,children:[(0,e.jsx)("a",{children:_.formatMessage({id:"dashboard.bridge.howItWorks",defaultMessage:"How it works?"})}),(0,e.jsx)("a",{children:_.formatMessage({id:"dashboard.bridge.faq",defaultMessage:"FAQ"})}),(0,e.jsx)("a",{children:_.formatMessage({id:"dashboard.bridge.userGuide",defaultMessage:"User guide"})})]})]}),(0,e.jsx)("div",{className:s().bottomSection,children:(0,e.jsx)(T.Z,{src:"/images/background/chainbridge.svg",preview:!1,className:s().background})})]}),(0,e.jsxs)("div",{className:s().rightContainer,children:[(0,e.jsxs)("div",{className:s().bridgeTabs,children:[(0,e.jsx)("div",{className:U()(s().bridgeTabsItem,g==="deposit"?s().active:""),onClick:function(){return o("deposit")},children:_.formatMessage({id:"dashboard.bridge.deposit",defaultMessage:"Deposit"})}),(0,e.jsx)("div",{className:U()(s().bridgeTabsItem,g==="withdraw"?s().active:""),onClick:function(){return o("withdraw")},children:_.formatMessage({id:"dashboard.bridge.withdraw",defaultMessage:"Withdraw"})})]}),(0,e.jsxs)("div",{className:s().bridgeBody,children:[g==="deposit"&&(0,e.jsx)(ya,{setLoading:R,setStep:z,setETHHash:C,setParamiHash:de}),g==="withdraw"&&(0,e.jsx)(Ua,{setLoading:R,setStep:z,setETHHash:C,setParamiHash:de})]})]})]})]})}):(0,e.jsx)(wa.Z,{}),A&&(0,e.jsx)(Fa,{tab:g,step:H,ethHash:x,paramiHash:k,onClose:function(){R(!1),z(1),C(""),de("")}})]})},Ya=$a}}]);
