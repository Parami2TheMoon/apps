(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5808],{55133:function(C){C.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(C){C.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},76705:function(C){C.exports={loginCard:"loginCard___29ISC",title:"title___1Nywl",appList:"appList___3WcLg",appItem:"appItem___3n4xF",appIcon:"appIcon___3I5gJ",info:"info___AECmK",name:"name___1p-lf",icon:"icon___3Ijcm",desc:"desc___1DhqV",rightArrow:"rightArrow___Np2km",getWallet:"getWallet___3Nr1f",modalContainer:"modalContainer___2uiYJ",logo:"logo___3P-qd"}},28633:function(C){C.exports={selectContainer:"selectContainer___1_GbB",selectHeader:"selectHeader___9PjRk",selectHeaderSectionTitle:"selectHeaderSectionTitle___2UWhg",fromNetwork:"fromNetwork___3jU-L",fromNetworkIcon:"fromNetworkIcon___39QEQ",selectWrapper:"selectWrapper___3-vMT",selectItem:"selectItem___3K2bP",itemInfo:"itemInfo___5kjKy",itemInfoIcon:"itemInfoIcon___1gcUp",itemNameSymbol:"itemNameSymbol___1Vl81",itemName:"itemName___2dXQJ",itemSymbol:"itemSymbol___3oD6j",itemBalance:"itemBalance___36hic"}},76824:function(C){C.exports={modal:"modal___2kgj1",spinContainer:"spinContainer___1KYK8",alertContainer:"alertContainer___3owY0",buttons:"buttons___En-Xg",button:"button___SXVEF",fieldsContainer:"fieldsContainer___XT086",field:"field___22Tmv",label:"label___2u_4k",small:"small___1wJL4",labelIcon:"labelIcon___2JQT2",value:"value___1L63r"}},57129:function(C){C.exports={bridgeContainer:"bridgeContainer___KUa_y",leftContainer:"leftContainer___BhZ7T",innerWrapper:"innerWrapper___bZZx8",description:"description___3-8tl",points:"points___35dws",bottomSection:"bottomSection___3tOew",background:"background___8FvqH",rightContainer:"rightContainer___SWVmp",bridgeTabs:"bridgeTabs___1q5d5",bridgeTabsItem:"bridgeTabsItem___2dz-9",active:"active___1gpqP",bridgeBody:"bridgeBody___K06_-",fromLabel:"fromLabel___36_v-",toLabel:"toLabel___nk7uU",destinationLabel:"destinationLabel___2BpNo",formSection:"formSection___38r3Z",chainAndBalanceDetails:"chainAndBalanceDetails___2tWhw",tokenAndAmountDetails:"tokenAndAmountDetails___2QCCc",tokenDetails:"tokenDetails___5YGpq",chainIcon:"chainIcon___1kqp4",tokenDetailsTokenName:"tokenDetailsTokenName___2ZJGy",tokenDetailsArrow:"tokenDetailsArrow___1MP8-",amountDetails:"amountDetails___1ebLK",amountDetailsMaxButton:"amountDetailsMaxButton___1FzoW",downArrowSection:"downArrowSection___2uyH-",toChainAndBalanceDetails:"toChainAndBalanceDetails___16F2K",chainDetails:"chainDetails___1CxCG",chainDetailsChainName:"chainDetailsChainName___25YMo",balanceDetails:"balanceDetails___3lQpW",balanceDetailsLabel:"balanceDetailsLabel___39XMY",balanceDetailsBalance:"balanceDetailsBalance___1gKPg",transferButton:"transferButton___1hXV4",destinationDetails:"destinationDetails___Ut9dq",destinationMyAddressButton:"destinationMyAddressButton___5f5Zy",processContainer:"processContainer___3kyyc",title:"title___32jxA",cardContainer:"cardContainer___2qpms",listHash:"listHash___3ya_j",field:"field___vgM6V",value:"value___1DSzY"}},24787:function(C){C.exports={mainContainer:"mainContainer___VzUCC",mainBgContainer:"mainBgContainer___2Nlq7",mainIndexContainer:"mainIndexContainer___1Mqvq",background:"background___25786",logoMark:"logoMark___153gX",mainTopContainer:"mainTopContainer___2Cw6K",pageContainer:"pageContainer___2ssxe",stepContainer:"stepContainer___LPJXV",contentContainer:"contentContainer___2e-al",badge:"badge___3vf4B",dashboardCard:"dashboardCard___3oOcj",windowCard:"windowCard___3FjX2",windowCardBody:"windowCardBody___2zSRs",field:"field___3q5d2",title:"title___1BPSo",value:"value___1TvCY",rowField:"rowField___1vUg5",switchButton:"switchButton___3EjXy",statistic:"statistic___2TWER",modalBody:"modalBody___3SJQA",dividerTitle:"dividerTitle___1UTj3",table:"table___1zfPw",withAfterInput:"withAfterInput___3UZxJ",tabSelector:"tabSelector___2tj32",tabItem:"tabItem___3ymbk",inactive:"inactive___12iuZ",noAssets:"noAssets___FcwbD",topImage:"topImage___mHPfd"}},97409:function(C,z,a){"use strict";var ye=a(71153),x=a(60331),fe=a(12968),f=a(62462),ge=a(67294),$=a(43581),o=a(72643),r=a(73218),t=a(85893);function q(I){var le=I.theme,s=I.supportedChainId,de=(0,$.tT)("web3"),S=de.Account,_e=de.ChainName,c=de.ChainId,oe=s&&c&&s!==c;return(0,t.jsx)(t.Fragment,{children:S&&(0,t.jsxs)("div",{className:"addressContainer ".concat(le!=null?le:"wallet"," ").concat(oe?"notSupported":""),children:[oe&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"error",children:[(0,t.jsx)(r.Z,{className:"error-icon"}),"Network Type Error"]}),(0,t.jsxs)("div",{className:"error-msg",children:["Please switch to ",o.i[s],"."]})]}),!oe&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"ethLogo",children:[(0,t.jsx)(f.Z,{src:"/images/crypto/eth-circle.svg",preview:!1,className:"ethLogoImg"}),"ETH Address"]}),!!c&&c!==1&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(x.Z,{color:"orange",children:_e})}),(0,t.jsxs)("div",{className:"currentAddress",children:[(0,t.jsx)("span",{className:"prefix",children:"Current Address:"}),(0,t.jsx)("span",{className:"address",children:S})]})]})]})})}z.Z=q},69764:function(C,z,a){"use strict";var ye=a(71194),x=a(50146),fe=a(57663),f=a(71577),ge=a(402),$=a(3887),o=a(67294),r=a(55133),t=a.n(r),q=a(54549),I=a(85893),le=$.Z.Title,s=function(S){var _e=S.visable,c=S.title,oe=S.content,ce=S.footer,D=S.close,W=S.bodyStyle,pe=S.width;return(0,I.jsx)(x.Z,{title:c?(0,I.jsx)(le,{level:5,className:t().title,children:c}):null,closable:!!D,closeIcon:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(f.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,I.jsx)(q.Z,{onClick:D})})}),className:t().modal,centered:!0,visible:_e,width:pe!=null?pe:650,footer:ce,bodyStyle:W,children:oe})};z.Z=s},3548:function(C,z,a){"use strict";var ye=a(67294),x=a(31639),fe=a.n(x),f=a(96534),ge=a(85893),$=function(r){var t=r.value,q=r.style;return(0,ge.jsxs)("div",{className:fe().ad3,style:q,children:[t?(0,f.MP)(t):"--",(0,ge.jsx)("span",{className:fe().unit,children:"\xA0$AD3"})]})};z.Z=$},38655:function(C,z,a){"use strict";var ye=a(58024),x=a(39144),fe=a(57663),f=a(71577),ge=a(48736),$=a(27049),o=a(3182),r=a(402),t=a(3887),q=a(94043),I=a.n(q),le=a(67294),s=a(43581),de=a(24787),S=a.n(de),_e=a(76705),c=a.n(_e),oe=a(8812),ce=a(89583),D=a(85893),W=function(){var ee=(0,s.tT)("web3"),Ue=ee.connect,M=(0,s.YB)(),Pe=t.Z.Title;return(0,D.jsx)("div",{className:S().mainContainer,children:(0,D.jsx)("div",{className:S().contentContainer,children:(0,D.jsxs)(x.Z,{className:c().loginCard,bodyStyle:{padding:32,width:"100%"},children:[(0,D.jsx)(Pe,{level:4,className:c().title,children:M.formatMessage({id:"dashboard.bridge.login",defaultMessage:"Login"})}),(0,D.jsx)("div",{className:c().appList,children:(0,D.jsxs)("div",{className:c().appItem,onClick:(0,o.Z)(I().mark(function Ie(){return I().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Ue();case 2:case"end":return ae.stop()}},Ie)})),children:[(0,D.jsx)("div",{className:c().info,children:(0,D.jsxs)("span",{className:c().name,children:[(0,D.jsx)(ce.OZg,{className:c().icon}),"Connect Wallet"]})}),(0,D.jsx)(oe.Z,{className:c().rightArrow})]})}),(0,D.jsx)($.Z,{}),(0,D.jsxs)("div",{className:c().getWallet,children:[M.formatMessage({id:"dashboard.bridge.dontHaveWallet",defaultMessage:"Don't have wallet?"}),(0,D.jsx)(f.Z,{type:"link",size:"middle",children:M.formatMessage({id:"dashboard.bridge.downloadHere",defaultMessage:"Download here"})})]})]})})})};z.Z=W},79245:function(C,z,a){"use strict";a.r(z),a.d(z,{default:function(){return Pa}});var ye=a(12968),x=a(62462),fe=a(74379),f=a(38648),ge=a(402),$=a(3887),o=a(2824),r=a(67294),t=a(43581),q=a(24787),I=a.n(q),le=a(57129),s=a.n(le),de=a(94184),S=a.n(de),_e=a(57663),c=a(71577),oe=a(47673),ce=a(32787),D=a(22385),W=a(31097),pe=a(91220),ee=a(3182),Ue=a(94043),M=a.n(Ue),Pe=a(57254),Ie=a(21059),we=a(49101),ae=a(2593),Ke=a(7290),Ve=a(77616),Re={bridge:{destId:0,destinationChainId:233,address:"0xDb59E0cA1644D1F93D1b85261c0D414656bA98F9"},resource:{id:"0x000000000000000000000000000000a56889c89dddcbb363cbd6a8d11de9e100"},ERC20HandlerContract:{address:"0x4A00CC0DA9333658CAC63Ddc074681BfF218aeFD"}},me=a(3548),H=a(59749),ta=a(96534),na=a(75397),ia=a(28633),N=a.n(ia),Ge=a(69764),e=a(85893),ra=function(i){var v=i.selectModal,h=i.setSelectModal,n=i.chain,g=(0,t.tT)("web3"),b=g.ChainName,m=(0,t.YB)();return(0,e.jsx)(Ge.Z,{title:void 0,visable:v,content:(0,e.jsxs)("div",{className:N().selectContainer,children:[(0,e.jsx)("div",{className:N().selectHeader,children:(0,e.jsx)("div",{className:N().selectHeaderSectionTitle,children:m.formatMessage({id:"dashboard.bridge.selectToken",defaultMessage:"Select a token from {chain}"},{chain:n==="ethereum"?(0,e.jsxs)("div",{className:N().fromNetwork,children:[(0,e.jsx)(x.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:N().fromNetworkIcon}),(0,e.jsx)("span",{className:N().chainDetailsChainName,children:b})]}):(0,e.jsxs)("div",{className:N().fromNetwork,children:[(0,e.jsx)(x.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:N().fromNetworkIcon}),(0,e.jsx)("span",{className:N().chainDetailsChainName,children:"Parami chain"})]})})})}),(0,e.jsx)("div",{className:N().selectWrapper,children:(0,e.jsxs)("div",{className:N().selectItem,children:[(0,e.jsxs)("div",{className:N().itemInfo,children:[(0,e.jsx)(x.Z,{src:"/images/crypto/usdt-circle.svg",preview:!1,className:N().itemInfoIcon}),(0,e.jsxs)("div",{className:N().itemNameSymbol,children:[(0,e.jsx)("div",{className:N().itemName,children:"USDT"}),(0,e.jsx)("div",{className:N().itemSymbol,children:"Tether USD"})]})]}),(0,e.jsx)("div",{className:N().itemBalance,children:"0"})]})})]}),footer:!1,close:function(){h(!1)},bodyStyle:{padding:0}})},qe=ra,la=a(6221),da=a(48352),oa=a(48764).Buffer,ca=function(i){var v=i.setLoading,h=i.setStep,n=i.setETHHash,g=i.setParamiHash,b=(0,t.tT)("apiWs"),m=(0,t.tT)("currentUser"),u=m.dashboard,L=(0,t.tT)("web3"),B=L.Account,w=L.ChainName,K=L.Provider,se=L.Signer,R=L.ChainId,Y=(0,t.tT)("paramiEvents"),F=Y.Events,p=Y.SubParamiEvents,je=(0,r.useState)(),E=(0,o.Z)(je,2),X=E[0],te=E[1],J=(0,t.tT)("dashboard.balance"),Q=J.balance,ne=(0,t.tT)("contracts"),j=ne.Ad3Contract,ve=ne.BridgeContract,Ce=(0,r.useState)(""),De=(0,o.Z)(Ce,2),xe=De[0],Ze=De[1],ze=(0,r.useState)(BigInt(0)),Ne=(0,o.Z)(ze,2),ie=Ne[0],Oe=Ne[1],$e=(0,r.useState)(""),Ee=(0,o.Z)($e,2),V=Ee[0],Te=Ee[1],Ye=(0,r.useState)(!1),Se=(0,o.Z)(Ye,2),Le=Se[0],Ae=Se[1],Xe=(0,r.useState)(""),Be=(0,o.Z)(Xe,2),he=Be[0],Me=Be[1],G=(0,r.useState)(!1),We=(0,o.Z)(G,2),Je=We[0],He=We[1],_=(0,t.YB)(),Z,re=function(y,P){return"".concat(y.event.section,":").concat(y.event.method)==="chainBridge:ProposalSucceeded"&&BigInt(y.event.data[1].toString())===P},k=function(){var O=(0,ee.Z)(M().mark(function y(){var P;return M().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(!K||!se)){T.next=2;break}return T.abrupt("return");case 2:return T.prev=2,T.next=5,j==null?void 0:j.balanceOf(B);case 5:P=T.sent,Ze(ae.O$.from(P).toString()),T.next=12;break;case 9:T.prev=9,T.t0=T.catch(2),f.default.error({message:T.t0.message||T.t0,duration:null});case 12:case"end":return T.stop()}},y,null,[[2,9]])}));return function(){return O.apply(this,arguments)}}(),d=function(){var O=(0,ee.Z)(M().mark(function y(){var P,be,T,Qe,sa;return M().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!K||!se)){l.next=2;break}return l.abrupt("return");case 2:if(P=he,!(he.indexOf("did:ad3")>-1)){l.next=15;break}return l.prev=4,l.next=7,(0,na.Ob)(he);case 7:be=l.sent,be||f.default.error({message:"Invalid DID",duration:null}),P=be.account,l.next=15;break;case 12:l.prev=12,l.t0=l.catch(4),f.default.error({message:l.t0.message||l.t0,duration:null});case 15:return P="0x".concat(oa.from((0,la.m)(P)).toString("hex")),T="0x"+Ke.$m(ae.O$.from(Ve.vz(V,18)).toHexString(),32).substring(2)+Ke.$m(Ke.Dv((P.length-2)/2),32).substring(2)+P.substring(2),l.prev=17,v(!0),f.default.info({message:"Approve Token Access"}),l.next=22,j==null?void 0:j.approve(da.q7.erc20handler[R],ae.O$.from(Ve.vz(V.toString(),18)));case 22:return l.next=24,l.sent.wait();case 24:return f.default.info({message:"Deposit Token"}),l.next=27,ve==null?void 0:ve.deposit(Re.bridge.destinationChainId,Re.resource.id,T);case 27:return l.next=29,l.sent.wait();case 29:return Qe=l.sent,sa=BigInt(Qe.logs[2].topics[3]),Oe(sa),n(Qe.transactionHash),h(2),Ae(!0),l.next=37,p();case 37:Z=l.sent,te(function(){return Z}),l.next=45;break;case 41:l.prev=41,l.t1=l.catch(17),f.default.error({message:l.t1.message||l.t1,duration:null}),v(!1);case 45:case"end":return l.stop()}},y,null,[[4,12],[17,41]])}));return function(){return O.apply(this,arguments)}}();return(0,r.useEffect)(function(){if(Le){var O=(0,pe.Z)(F),y;try{for(O.s();!(y=O.n()).done;){var P=y.value;console.log("event","".concat(P.event.section,":").concat(P.event.method)),re(P,ie)&&(Ae(!1),h(3),X&&X(),f.default.success({message:"Deposit Success"}),g(P.blockHash))}}catch(be){O.e(be)}finally{O.f()}}},[F,ie,Le,X]),(0,r.useEffect)(function(){!B||!j||b&&k()},[se,K,j,B,b]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:s().fromLabel,children:_.formatMessage({id:"dashboard.bridge.from",defaultMessage:"From"})}),(0,e.jsxs)("div",{className:s().formSection,children:[(0,e.jsxs)("div",{className:s().chainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(x.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:w})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[_.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(W.Z,{placement:"top",title:(0,H.mI)(xe,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(me.Z,{value:xe})})})]})]}),(0,e.jsxs)("div",{className:s().tokenAndAmountDetails,children:[(0,e.jsxs)("div",{className:s().tokenDetails,onClick:function(){He(!0)},children:[(0,e.jsx)(x.Z,{src:"/images/logo-round-core.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().tokenDetailsTokenName,children:"AD3"}),(0,e.jsx)(Pe.Z,{className:s().tokenDetailsArrow})]}),(0,e.jsxs)("div",{className:s().amountDetails,children:[(0,e.jsx)(ce.Z,{placeholder:"0.00",type:"number",size:"large",value:V,onChange:function(y){Te(y.target.value)}}),(0,e.jsx)(c.Z,{className:s().amountDetailsMaxButton,type:"link",size:"small",onClick:function(){Te((0,H.mI)(xe,18))},children:_.formatMessage({id:"dashboard.bridge.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(Ie.Z,{})}),(0,e.jsx)("div",{className:s().toLabel,children:_.formatMessage({id:"dashboard.bridge.to",defaultMessage:"To"})}),(0,e.jsxs)("div",{className:s().toChainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(x.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:"Parami chain"})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[_.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(W.Z,{placement:"top",title:(0,H.mI)(Q==null?void 0:Q.total,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(me.Z,{value:Q==null?void 0:Q.total})})})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(we.Z,{})}),(0,e.jsx)("div",{className:s().destinationLabel,children:_.formatMessage({id:"dashboard.bridge.destinationAddress",defaultMessage:"Destination Address"})}),(0,e.jsxs)("div",{className:s().destinationDetails,children:[(0,e.jsx)(ce.Z,{placeholder:"did:ad3:......",type:"text",size:"large",value:he,onChange:function(y){Me(y.target.value)}}),(0,e.jsx)(c.Z,{className:s().destinationMyAddressButton,type:"default",size:"small",onClick:function(){Me((0,ta.st)(u.did))},children:_.formatMessage({id:"dashboard.bridge.me",defaultMessage:"ME"})})]}),(0,e.jsx)(c.Z,{block:!0,type:"primary",size:"large",shape:"round",className:s().transferButton,onClick:function(){d()},disabled:!V||!he||(0,H.HM)(V,18)<=BigInt(0),children:_.formatMessage({id:"dashboard.bridge.transfer",defaultMessage:"Transfer"})}),(0,e.jsx)(qe,{selectModal:Je,setSelectModal:He,chain:"ethereum"})]})},ua=ca,Ia=a(34792),ma=a(48086),va=a(81773),ha=a(81603),fa=function(){var U=(0,ee.Z)(M().mark(function i(v,h,n){var g,b;return M().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,va.R0)(v.meta.source);case 2:return g=u.sent,b=window.apiWs.tx.xAssets.transferNative(h,n,Re.bridge.destId),u.next=6,(0,ha.u)(b,g,v);case 6:return u.abrupt("return",u.sent);case 7:case"end":return u.stop()}},i)}));return function(v,h,n){return U.apply(this,arguments)}}(),ga=function(){var U=(0,ee.Z)(M().mark(function i(){var v;return M().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.apiWs.query.xAssets.nativeFee();case 3:if(v=n.sent,!v.isEmpty){n.next=7;break}return f.default.error({message:"Query nativeFee Error",description:"result is empty"}),n.abrupt("return");case 7:return n.abrupt("return",{fee:v.toHuman()});case 10:return n.prev=10,n.t0=n.catch(0),f.default.error({message:"Query nativeFee Error",description:JSON.stringify(n.t0)}),n.abrupt("return");case 14:case"end":return n.stop()}},i,null,[[0,10]])}));return function(){return U.apply(this,arguments)}}(),_a=function(i){return/^0x[a-fA-F0-9]{40}$/.test(i)},Za=function(i){return/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{25,39}$/.test(i)},Oa=function(i){try{return encodeAddress(isHex(i)?hexToU8a(i):decodeAddress(i)),!0}catch(v){return!1}},La=a(71194),pa=a(50146),Wa=a(17462),ja=a(76772),Ha=a(20228),Fe=a(11382),Ca=a(76824),A=a.n(Ca),xa=$.Z.Title,Ma=function(i){var v=i.onCancel,h=i.onConfirm,n=i.amount,g=(0,r.useState)(),b=(0,o.Z)(g,2),m=b[0],u=b[1],L=(0,r.useState)(),B=(0,o.Z)(L,2),w=B[0],K=B[1],se=(0,r.useState)(!1),R=(0,o.Z)(se,2),Y=R[0],F=R[1];return(0,r.useEffect)(function(){ga().then(function(p){u(p)})},[n]),(0,r.useEffect)(function(){if(m){var p=((0,H.HM)(n,18)-BigInt(m.fee.replaceAll(",",""))).toString();K(p),F(!!p&&BigInt(p)<=0)}},[m]),(0,e.jsxs)(pa.Z,{title:(0,e.jsx)(xa,{level:3,style:{marginBottom:0},children:"Confirm Transaction"}),closable:!1,className:A().modal,centered:!0,visible:!0,width:400,footer:(0,e.jsxs)("div",{className:A().buttons,children:[(0,e.jsx)(c.Z,{type:"text",shape:"round",size:"large",className:A().button,onClick:v,children:"Decline"}),(0,e.jsx)(c.Z,{type:"primary",shape:"round",size:"large",className:A().button,onClick:h,disabled:!m||Y,children:"Confirm"})]}),children:[!m&&(0,e.jsx)("div",{className:A().spinContainer,children:(0,e.jsx)(Fe.Z,{})}),m&&(0,e.jsxs)(e.Fragment,{children:[Y&&(0,e.jsx)(ja.Z,{description:"Insufficient Amount",type:"error",showIcon:!0,banner:!0,className:A().alertContainer}),(0,e.jsxs)("div",{className:A().fieldsContainer,children:[(0,e.jsxs)("div",{className:A().field,children:[(0,e.jsx)("div",{className:A().label,children:"Transfer Amount:"}),(0,e.jsx)("div",{className:A().value,children:(0,e.jsx)(me.Z,{value:(0,H.HM)(n,18).toString(),style:{fontSize:"0.8rem",fontWeight:900}})})]}),(0,e.jsxs)("div",{className:A().field,children:[(0,e.jsx)("div",{className:A().label,children:"Fee:"}),(0,e.jsx)("div",{className:A().value,children:(0,e.jsx)(me.Z,{value:m.fee.replaceAll(",",""),style:{fontSize:"0.8rem",fontWeight:900}})})]}),(0,e.jsxs)("div",{className:A().field,children:[(0,e.jsx)("div",{className:A().label,children:"Will Receive:"}),(0,e.jsx)("div",{className:A().value,children:(0,e.jsx)(me.Z,{value:w!=null?w:"",style:{fontSize:"0.8rem",fontWeight:900,color:Y?"red":""}})})]})]})]})]})},ba=Ma,Da=function(i){var v=i.setLoading,h=i.setStep,n=i.setETHHash,g=i.setParamiHash,b=(0,t.tT)("apiWs"),m=(0,t.tT)("web3"),u=m.Account,L=m.ChainName,B=m.Provider,w=m.Signer,K=(0,t.tT)("currentUser"),se=K.dashboard,R=(0,t.tT)("dashboard.bridgeEvents"),Y=R.SubBridgeEvents,F=R.UnsubBridgeEvents,p=R.ProposalEvent,je=(0,t.tT)("dashboard.balance"),E=je.balance,X=(0,t.tT)("contracts"),te=X.Ad3Contract,J=X.BridgeContract,Q=(0,r.useState)(""),ne=(0,o.Z)(Q,2),j=ne[0],ve=ne[1],Ce=(0,r.useState)(BigInt(0)),De=(0,o.Z)(Ce,2),xe=De[0],Ze=De[1],ze=(0,r.useState)(""),Ne=(0,o.Z)(ze,2),ie=Ne[0],Oe=Ne[1],$e=(0,r.useState)(),Ee=(0,o.Z)($e,2),V=Ee[0],Te=Ee[1],Ye=(0,r.useState)(!1),Se=(0,o.Z)(Ye,2),Le=Se[0],Ae=Se[1],Xe=(0,r.useState)(!1),Be=(0,o.Z)(Xe,2),he=Be[0],Me=Be[1],G=(0,t.YB)(),We=function(){var _=(0,ee.Z)(M().mark(function Z(){var re;return M().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(!B||!w)){d.next=2;break}return d.abrupt("return");case 2:return d.prev=2,d.next=5,te==null?void 0:te.balanceOf(u);case 5:re=d.sent,ve(ae.O$.from(re).toString()),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(2),f.default.error({message:d.t0.message||d.t0,duration:null});case 12:case"end":return d.stop()}},Z,null,[[2,9]])}));return function(){return _.apply(this,arguments)}}(),Je=function(){var _=(0,ee.Z)(M().mark(function Z(){return M().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!(!B||!w)){k.next=2;break}return k.abrupt("return");case 2:if(_a(V)){k.next=6;break}return ma.default.error("Please input ETH Address!"),v(!1),k.abrupt("return");case 6:Me(!0);case 7:case"end":return k.stop()}},Z)}));return function(){return _.apply(this,arguments)}}(),He=function(){var _=(0,ee.Z)(M().mark(function Z(){var re;return M().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,v(!0),d.next=4,fa(JSON.parse(se.accountMeta),(0,H.HM)(ie,18).toString(),V);case 4:re=d.sent,Ze(BigInt(re.chainBridge.FungibleTransfer[0][1])),g(re.blockHash),h(2),J?Y(J):f.default.error({message:"No bridge contract"}),d.next=16;break;case 12:d.prev=12,d.t0=d.catch(0),f.default.error({message:d.t0.message||d.t0,duration:null}),v(!1);case 16:case"end":return d.stop()}},Z,null,[[0,12]])}));return function(){return _.apply(this,arguments)}}();return(0,r.useEffect)(function(){(p==null?void 0:p.depositNonce)===xe&&(p==null?void 0:p.status)==="Executed"&&(h(3),Ze(BigInt(0)),f.default.success({message:"Withdraw Success"}),p.txHash&&n(p.txHash),J&&F(J))},[J,p,F,xe]),(0,r.useEffect)(function(){!u||!te||b&&We()},[w,B,te,u,b]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:s().fromLabel,children:G.formatMessage({id:"dashboard.bridge.from",defaultMessage:"From"})}),(0,e.jsxs)("div",{className:s().formSection,children:[(0,e.jsxs)("div",{className:s().chainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(x.Z,{src:"/images/logo-core-colored-fit-into-round.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:"Parami chain"})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[G.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance Available"}),":"]}),(0,e.jsx)(W.Z,{placement:"top",title:(0,H.mI)(E==null?void 0:E.free,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(me.Z,{value:E==null?void 0:E.free})})})]})]}),(0,e.jsxs)("div",{className:s().tokenAndAmountDetails,children:[(0,e.jsxs)("div",{className:s().tokenDetails,onClick:function(){Ae(!0)},children:[(0,e.jsx)(x.Z,{src:"/images/logo-round-core.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().tokenDetailsTokenName,children:"AD3"}),(0,e.jsx)(Pe.Z,{className:s().tokenDetailsArrow})]}),(0,e.jsxs)("div",{className:s().amountDetails,children:[(0,e.jsx)(ce.Z,{placeholder:"0.00",type:"number",size:"large",value:ie,onChange:function(Z){Oe(Z.target.value)}}),(0,e.jsx)(c.Z,{className:s().amountDetailsMaxButton,type:"link",size:"small",onClick:function(){Oe((0,H.mI)(E==null?void 0:E.free,18))},children:G.formatMessage({id:"dashboard.bridge.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(Ie.Z,{})}),(0,e.jsx)("div",{className:s().toLabel,children:G.formatMessage({id:"dashboard.bridge.to",defaultMessage:"To"})}),(0,e.jsxs)("div",{className:s().toChainAndBalanceDetails,children:[(0,e.jsxs)("div",{className:s().chainDetails,children:[(0,e.jsx)(x.Z,{src:"/images/crypto/ethereum-eth-logo.svg",preview:!1,className:s().chainIcon}),(0,e.jsx)("span",{className:s().chainDetailsChainName,children:L})]}),(0,e.jsxs)("div",{className:s().balanceDetails,children:[(0,e.jsxs)("span",{className:s().balanceDetailsLabel,children:[G.formatMessage({id:"dashboard.bridge.balance",defaultMessage:"Balance"}),":"]}),(0,e.jsx)(W.Z,{placement:"top",title:(0,H.mI)(j,18),children:(0,e.jsx)("span",{className:s().balanceDetailsBalance,children:(0,e.jsx)(me.Z,{value:j})})})]})]}),(0,e.jsx)("div",{className:s().downArrowSection,children:(0,e.jsx)(we.Z,{})}),(0,e.jsx)("div",{className:s().destinationLabel,children:G.formatMessage({id:"dashboard.bridge.destinationAddress",defaultMessage:"Destination Address"})}),(0,e.jsxs)("div",{className:s().destinationDetails,children:[(0,e.jsx)(ce.Z,{placeholder:"0x......",type:"text",size:"large",value:V,onChange:function(Z){Te(Z.target.value)}}),(0,e.jsx)(c.Z,{className:s().destinationMyAddressButton,type:"default",size:"small",onClick:function(){Te(u)},children:G.formatMessage({id:"dashboard.bridge.me",defaultMessage:"ME"})})]}),(0,e.jsx)(c.Z,{block:!0,type:"primary",size:"large",shape:"round",className:s().transferButton,onClick:function(){Je()},disabled:!ie||!V||(0,H.HM)(ie,18)<=BigInt(0)||(0,H.HM)(ie,18)>BigInt(E==null?void 0:E.free),children:G.formatMessage({id:"dashboard.bridge.transfer",defaultMessage:"Transfer"})}),(0,e.jsx)(qe,{selectModal:Le,setSelectModal:Ae,chain:"parami"}),he&&(0,e.jsx)(ba,{onCancel:function(){return Me(!1)},onConfirm:function(){Me(!1),He()},amount:ie})]})},Na=Da,Ea=a(38655),Ua=a(35556),ke=a(97880),ea=a(51625),aa=a(7085),Ta=a(72643),ue=ke.Z.Step,Sa=function(i){var v=i.tab,h=i.step,n=i.ethHash,g=i.paramiHash,b=i.onClose,m=(0,t.tT)("web3"),u=m.ChainId,L=(0,r.useCallback)(function(){window.open("".concat(Ta.E[u!=null?u:1]).concat(n),"_blank")},[u,n]);return(0,e.jsx)(Ge.Z,{visable:!0,content:(0,e.jsxs)("div",{className:s().processContainer,children:[v==="deposit"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ke.Z,{progressDot:!0,size:"small",current:h,children:[(0,e.jsx)(ue,{title:"Enter information"}),(0,e.jsx)(ue,{title:"Ethereum chain"}),(0,e.jsx)(ue,{title:"Parami chain"}),(0,e.jsx)(ue,{title:"Tokens transferred"})]}),(0,e.jsxs)("div",{className:s().title,children:[h===1&&(0,e.jsx)("span",{children:"Ethereum chain"}),h===2&&(0,e.jsx)("span",{children:"Parami chain"}),h===3&&(0,e.jsx)("span",{children:"Tokens transferred"})]}),(0,e.jsx)("div",{className:s().cardContainer,children:n&&g?(0,e.jsxs)("div",{className:s().listHash,children:[(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"Parami chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("".concat(ea.Z.explorer.block,"/").concat(g),"_blank")},children:(0,e.jsx)(W.Z,{placement:"topLeft",title:g,children:g})})]}),(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"ETH chain"}),(0,e.jsx)("span",{className:s().value,onClick:L,children:(0,e.jsx)(W.Z,{placement:"topLeft",title:n,children:n})})]})]}):(0,e.jsx)(Fe.Z,{indicator:(0,e.jsx)(aa.Z,{style:{fontSize:24},spin:!0}),tip:"Transfering..."})})]}),v==="withdraw"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ke.Z,{progressDot:!0,size:"small",current:h,children:[(0,e.jsx)(ue,{title:"Enter information"}),(0,e.jsx)(ue,{title:"Parami chain"}),(0,e.jsx)(ue,{title:"Ethereum chain"}),(0,e.jsx)(ue,{title:"Tokens transferred"})]}),(0,e.jsxs)("div",{className:s().title,children:[h===1&&(0,e.jsx)("span",{children:"Parami chain"}),h===2&&(0,e.jsx)("span",{children:"Ethereum chain"}),h===3&&(0,e.jsx)("span",{children:"Tokens transferred"})]}),(0,e.jsx)("div",{className:s().cardContainer,children:n&&g?(0,e.jsxs)("div",{className:s().listHash,children:[(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"Parami chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("".concat(ea.Z.explorer.block,"/").concat(g),"_blank")},children:(0,e.jsx)(W.Z,{placement:"topLeft",title:g,children:g})})]}),(0,e.jsxs)("div",{className:s().field,children:[(0,e.jsx)("span",{className:s().title,children:"ETH chain"}),(0,e.jsx)("span",{className:s().value,onClick:function(){window.open("https://etherscan.io/tx/".concat(n),"_blank")},children:(0,e.jsx)(W.Z,{placement:"topLeft",title:n,children:n})})]})]}):(0,e.jsx)(Fe.Z,{indicator:(0,e.jsx)(aa.Z,{style:{fontSize:24},spin:!0}),tip:"Transfering..."})})]})]}),footer:!1,close:n&&g?b:void 0})},Aa=Sa,Ba=a(97409),ya=function(){var i=(0,t.tT)("web3"),v=i.Account,h=i.connect,n=i.ChainId,g=(0,r.useState)("deposit"),b=(0,o.Z)(g,2),m=b[0],u=b[1],L=(0,r.useState)(!1),B=(0,o.Z)(L,2),w=B[0],K=B[1],se=(0,r.useState)(1),R=(0,o.Z)(se,2),Y=R[0],F=R[1],p=(0,r.useState)(),je=(0,o.Z)(p,2),E=je[0],X=je[1],te=(0,r.useState)(),J=(0,o.Z)(te,2),Q=J[0],ne=J[1],j=(0,t.YB)(),ve=$.Z.Title;return(0,r.useEffect)(function(){h()},[]),(0,r.useEffect)(function(){n&&n!==3&&f.default.warning({message:"Parami Bridge currently only supports Ropsten Testnet",description:"Please switch network in your wallet"})},[n]),(0,e.jsxs)(e.Fragment,{children:[v?(0,e.jsx)("div",{className:I().mainBgContainer,children:(0,e.jsxs)("div",{className:I().contentContainer,children:[(0,e.jsx)(Ba.Z,{theme:"dashboard"}),(0,e.jsxs)("div",{className:s().bridgeContainer,children:[(0,e.jsxs)("div",{className:s().leftContainer,children:[(0,e.jsxs)("div",{className:s().innerWrapper,children:[(0,e.jsx)(ve,{level:2,children:j.formatMessage({id:"dashboard.bridge.title",defaultMessage:"Parami Bridge"})}),(0,e.jsx)("span",{className:s().description,children:j.formatMessage({id:"dashboard.bridge.description",defaultMessage:"The safe, fast and most secure way to bring cross-chain assets to Parami chain."})}),(0,e.jsxs)("div",{className:s().points,children:[(0,e.jsx)("a",{children:j.formatMessage({id:"dashboard.bridge.howItWorks",defaultMessage:"How it works?"})}),(0,e.jsx)("a",{children:j.formatMessage({id:"dashboard.bridge.faq",defaultMessage:"FAQ"})}),(0,e.jsx)("a",{children:j.formatMessage({id:"dashboard.bridge.userGuide",defaultMessage:"User guide"})})]})]}),(0,e.jsx)("div",{className:s().bottomSection,children:(0,e.jsx)(x.Z,{src:"/images/background/chainbridge.svg",preview:!1,className:s().background})})]}),(0,e.jsxs)("div",{className:s().rightContainer,children:[(0,e.jsxs)("div",{className:s().bridgeTabs,children:[(0,e.jsx)("div",{className:S()(s().bridgeTabsItem,m==="deposit"?s().active:""),onClick:function(){return u("deposit")},children:j.formatMessage({id:"dashboard.bridge.deposit",defaultMessage:"Deposit"})}),(0,e.jsx)("div",{className:S()(s().bridgeTabsItem,m==="withdraw"?s().active:""),onClick:function(){return u("withdraw")},children:j.formatMessage({id:"dashboard.bridge.withdraw",defaultMessage:"Withdraw"})})]}),(0,e.jsxs)("div",{className:s().bridgeBody,children:[m==="deposit"&&(0,e.jsx)(ua,{setLoading:K,setStep:F,setETHHash:X,setParamiHash:ne}),m==="withdraw"&&(0,e.jsx)(Na,{setLoading:K,setStep:F,setETHHash:X,setParamiHash:ne})]})]})]})]})}):(0,e.jsx)(Ea.Z,{}),w&&(0,e.jsx)(Aa,{tab:m,step:Y,ethHash:E,paramiHash:Q,onClose:function(){K(!1),F(1),X(""),ne("")}})]})},Pa=ya}}]);
