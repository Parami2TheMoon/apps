(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{44019:function(B){B.exports={trade:"trade___5DCR_",pairCoins:"pairCoins___30AFB",pairCoinsItem:"pairCoinsItem___3j3Cy",tokenCoin:"tokenCoin___Rj0cZ",pairCoin:"pairCoin___1fXNK",downIcon:"downIcon___x0UKv",pairCoinsSelect:"pairCoinsSelect___1Mxk8",pairCoinsItemIcon:"pairCoinsItemIcon___2cM1U",pairCoinsItemLabel:"pairCoinsItemLabel___2VXNO",pairCoinsItemText:"pairCoinsItemText___2P6QM",pairCoinsItemInput:"pairCoinsItemInput___2Z-fh",pairCoinsBalance:"pairCoinsBalance___2quET",balance:"balance___gTvLr",warning:"warning___3GZFj",warningText:"warningText___1yrSa",maxButton:"maxButton___k7yah",pairCoinsSwitchButton:"pairCoinsSwitchButton___3ewlN",pairCoinsFlat:"pairCoinsFlat___3k2iZ",submitButton:"submitButton___qNSug"}},32177:function(B){B.exports={container:"container___1ImOP"}},17290:function(B,O,s){"use strict";s.r(O),s.d(O,{default:function(){return wa}});var re=s(58024),pa=s(39144),i=s(67294),Sa=s(51615),A=s(43581),ga=s(55909),R=s.n(ga),ha=s(32177),Ca=s.n(ha),le=s(49111),Ta=s(19650),ie=s(57663),H=s(71577),oe=s(77883),X=s(70507),ue=s(12968),$=s(62462),de=s(74379),w=s(38648),P=s(3182),g=s(2824),ce=s(402),Ia=s(3887),ya=s(94043),x=s.n(ya),ja=s(44019),n=s.n(ja),Aa=s(13580),xa=s(32689),b=s(33044),Ma=s(96534),G=s(1615),K=s(3548),Q=s(57254),Y=s(57651),Na=s(46656),Za=s(86326),o=s(59749),a=s(85893),ba=Ia.Z.Title;function ka(M){var h,F,r=M.assetId,J=M.onSelectAsset,q=M.onSwapped,_=M.canSelectAsset,Fa=_===void 0?!0:_,E=M.initTokenNumber,C=(0,A.YB)(),aa=(0,A.tT)("apiWs"),Da=(0,A.tT)("currentUser"),d=Da.wallet,Pa=(0,A.tT)("balance"),m=Pa.balance,ea=(0,A.tT)("assets"),T=ea.assets,sa=ea.getAssets,Ea=(0,i.useState)(""),na=(0,g.Z)(Ea,2),za=na[0],ta=na[1],La=(0,i.useState)(),ra=(0,g.Z)(La,2),p=ra[0],Wa=ra[1],Ua=(0,i.useState)(),la=(0,g.Z)(Ua,2),z=la[0],Va=la[1],Oa=(0,i.useState)("ad3ToToken"),ia=(0,g.Z)(Oa,2),u=ia[0],Ra=ia[1],Xa=(0,i.useState)(""),oa=(0,g.Z)(Xa,2),I=oa[0],N=oa[1],$a=(0,i.useState)(""),ua=(0,g.Z)($a,2),y=ua[0],j=ua[1],Ga=(0,i.useState)(!1),da=(0,g.Z)(Ga,2),Ka=da[0],ca=da[1],Qa=(0,i.useState)(""),va=(0,g.Z)(Qa,2),L=va[0],Ya=va[1],Ja=(0,i.useState)(!1),ma=(0,g.Z)(Ja,2),qa=ma[0],W=ma[1],_a=(0,i.useState)(!1),fa=(0,g.Z)(_a,2),k=fa[0],U=fa[1];(0,i.useEffect)(function(){d&&sa(d.account)},[sa,d]);var ae=function(){var t=(0,P.Z)(x().mark(function l(c){var f,S;return x().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return ta(""),v.prev=1,v.next=4,(0,xa.T9)(c);case 4:f=v.sent,S=f.data,S!=null&&S.token&&ta(S.token.icon),v.next=12;break;case 9:v.prev=9,v.t0=v.catch(1),console.error(v.t0);case 12:case"end":return v.stop()}},l,null,[[1,9]])}));return function(c){return t.apply(this,arguments)}}(),ee=function(){var t=(0,P.Z)(x().mark(function l(c){var f,S,Z;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Aa.Ay)(c);case 2:if(f=e.sent,!f.isEmpty){e.next=6;break}return w.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(c)}),e.abrupt("return");case 6:return S=f.toHuman(),Wa(S),e.next=10,(0,b.Vo)(c,(0,Ma.Vm)("1"));case 10:Z=e.sent,Va(Z.toString());case 12:case"end":return e.stop()}},l)}));return function(c){return t.apply(this,arguments)}}();(0,i.useEffect)(function(){aa&&r&&(ee(r),ae(r),N(""),E?(j(E),D(E)):j(""))},[r,aa]);var se=function(){var t=(0,P.Z)(x().mark(function l(c,f){var S,Z;return x().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!!d&&!!(d!=null&&d.keystore)&&!!r)){e.next=33;break}e.t0=u,e.next=e.t0==="ad3ToToken"?4:e.t0==="tokenToAd3"?17:30;break;case 4:return e.prev=4,e.next=7,(0,G.Ht)(r,(0,o.HM)(y,18).toString(),(0,o.HM)(I,18).toString(),L,d==null?void 0:d.keystore,c,f);case 7:if(S=e.sent,!(c&&f)){e.next=10;break}return e.abrupt("return",S);case 10:e.next=16;break;case 12:return e.prev=12,e.t1=e.catch(4),w.default.error({message:e.t1.message||e.t1,duration:null}),e.abrupt("return");case 16:return e.abrupt("break",30);case 17:return e.prev=17,e.next=20,(0,G.Ro)(r,(0,o.HM)(y,18).toString(),(0,o.HM)(I,18).toString(),L,d==null?void 0:d.keystore,c,f);case 20:if(Z=e.sent,!(c&&f)){e.next=23;break}return e.abrupt("return",Z);case 23:e.next=29;break;case 25:return e.prev=25,e.t2=e.catch(17),w.default.error({message:e.t2.message||e.t2,duration:null}),e.abrupt("return");case 29:return e.abrupt("break",30);case 30:q&&q(),e.next=34;break;case 33:w.default.error({key:"accessDenied",message:C.formatMessage({id:"error.accessDenied"}),duration:null});case 34:case"end":return e.stop()}},l,null,[[4,12],[17,25]])}));return function(c,f){return t.apply(this,arguments)}}(),V=(0,i.useCallback)(function(t){r&&(u==="ad3ToToken"&&(0,b.hM)(r,(0,o.HM)(t,18).toString()).then(function(l){j((0,o.mI)(l,18))}),u==="tokenToAd3"&&(0,b.__)(r,(0,o.HM)(t,18).toString()).then(function(l){j((0,o.mI)(l,18))}))},[r,u]),D=(0,i.useCallback)(function(t){r&&(u==="tokenToAd3"&&(0,b.Vo)(r,(0,o.HM)(t,18).toString()).then(function(l){N((0,o.mI)(l,18))}),u==="ad3ToToken"&&(0,b.UG)(r,(0,o.HM)(t,18).toString()).then(function(l){N((0,o.mI)(l,18))}))},[r,u]),ne=(0,i.useCallback)(function(){var t=(0,o.mI)(m==null?void 0:m.free,18);N(t),V(t)},[m,u,V]),te=(0,i.useCallback)(function(){if(r&&T){var t,l=(0,o.mI)((t=T.get(r))===null||t===void 0?void 0:t.balance,18);j(l),D(l)}},[u,r,T,D]);return(0,i.useEffect)(function(){if(u==="ad3ToToken"){if(m!=null&&m.free&&I){U((0,o.HM)(I,18)>BigInt(m.free));return}}else if(r&&T&&y){var t;U((0,o.HM)(y,18)>BigInt((t=T.get(r))===null||t===void 0?void 0:t.balance));return}U(!1)},[u,m,I,y,r,T]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:n().trade,children:[(0,a.jsx)(ba,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:R().title,children:C.formatMessage({id:"creator.explorer.trade"})}),(0,a.jsxs)("div",{className:n().pairCoins,style:{flexFlow:u==="ad3ToToken"?"column":"column-reverse"},children:[(0,a.jsxs)("div",{className:n().pairCoinsItem,children:[(0,a.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:n().pairCoin,children:[(0,a.jsx)($.Z,{src:"/images/logo-round-core.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,a.jsx)("span",{className:n().pairCoinsItemLabel,children:"AD3"})]}),(0,a.jsx)(X.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:I,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(l){N(l),V(l)}})]}),(0,a.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(n().balance," ").concat(u==="ad3ToToken"&&k?n().warning:""),children:[C.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)(K.Z,{value:m==null?void 0:m.free}),u==="ad3ToToken"&&k&&(0,a.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(H.Z,{type:"link",size:"middle",className:n().maxButton,onClick:ne,children:C.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,a.jsx)(H.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,a.jsx)(Q.Z,{}),className:n().pairCoinsSwitchButton,onClick:function(){Ra(u==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),N(""),j("")}}),(0,a.jsxs)("div",{className:"".concat(n().pairCoinsItem," ").concat(n().tokenCoin),children:[(0,a.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,a.jsxs)("div",{className:n().pairCoin,onClick:function(){return Fa&&W(!0)},children:[p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.Z,{src:za||"/images/default-avatar.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,a.jsx)("span",{className:n().pairCoinsItemLabel,children:p==null?void 0:p.symbol})]}),!p&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:n().pairCoinsItemText,children:"Select Asset"})}),(0,a.jsx)(Q.Z,{className:n().downIcon})]}),(0,a.jsx)(X.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:y,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(l){j(l),D(l)}})]}),(0,a.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,a.jsxs)("span",{className:"".concat(n().balance," ").concat(u==="tokenToAd3"&&k?n().warning:""),children:[C.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,a.jsx)(Y.Z,{value:(h=(F=T.get(r!=null?r:""))===null||F===void 0?void 0:F.balance)!==null&&h!==void 0?h:"",symbol:p==null?void 0:p.symbol}),u==="tokenToAd3"&&k&&(0,a.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,a.jsx)(H.Z,{type:"link",size:"middle",className:n().maxButton,onClick:te,children:C.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,a.jsx)("div",{className:n().pairCoinsFlat,children:(0,a.jsxs)(Ta.Z,{children:[(0,a.jsx)(Y.Z,{value:(0,o.HM)("1",18).toString(),symbol:p==null?void 0:p.symbol}),(0,a.jsx)("span",{children:"\u2248"}),(0,a.jsx)(K.Z,{value:z!=null?z:""})]})}),(0,a.jsx)(H.Z,{block:!0,type:"primary",size:"large",shape:"round",className:n().submitButton,disabled:!I||!y||k||!r,onClick:function(){ca(!0)},children:C.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]}),(0,a.jsx)(Na.Z,{visable:Ka,setVisable:ca,passphrase:L,setPassphrase:Ya,func:se}),qa&&(0,a.jsx)(Za.Z,{onClose:function(){return W(!1)},onSelectAsset:function(l){W(!1),J&&J(l)}})]})}var Ba=ka,Ha=function(){var h=(0,Sa.UO)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:Ca().container,children:(0,a.jsx)(pa.Z,{className:R().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,a.jsx)(Ba,{assetId:h==null?void 0:h.assetId,onSelectAsset:function(r){A.m8.push("/swap/".concat(r.id))}})})})})},wa=Ha}}]);
