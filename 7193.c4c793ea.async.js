(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7193],{84391:function(t,a,s){"use strict";s.d(a,{Z:function(){return c}});var r=s(28991),e=s(67294),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=n,o=s(27029),f=function(d,l){return e.createElement(o.Z,(0,r.Z)((0,r.Z)({},d),{},{ref:l,icon:i}))};f.displayName="UploadOutlined";var c=e.forwardRef(f)},41741:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return imageCompression}});function _mergeNamespaces(t,a){return a.forEach(function(s){Object.keys(s).forEach(function(r){if(r!=="default"&&!(r in t)){var e=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return s[r]}})}})}),Object.freeze(t)}function ownKeys(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function _objectSpread2(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?ownKeys(Object(s),!0).forEach(function(r){_defineProperty(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty(t,a,s){return a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_unsupportedIterableToArray(t,a)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,a){var s=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var r,e,n=[],i=!0,o=!1;try{for(s=s.call(t);!(i=(r=s.next()).done)&&(n.push(r.value),!a||n.length!==a);i=!0);}catch(f){o=!0,e=f}finally{try{i||s.return==null||s.return()}finally{if(o)throw e}}return n}}function _unsupportedIterableToArray(t,a){if(t){if(typeof t=="string")return _arrayLikeToArray(t,a);var s=Object.prototype.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(t,a):void 0}}function _arrayLikeToArray(t,a){(a==null||a>t.length)&&(a=t.length);for(var s=0,r=new Array(a);s<a;s++)r[s]=t[s];return r}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function createCommonjsModule(t){var a={exports:{}};return t(a,a.exports),a.exports}var UZIP_1=createCommonjsModule(function(t){var a,s,r={};t.exports=r,r.parse=function(e,n){for(var i=r.bin.readUshort,o=r.bin.readUint,f=0,c={},h=new Uint8Array(e),d=h.length-4;o(h,d)!=101010256;)d--;f=d,f+=4;var l=i(h,f+=4);i(h,f+=2);var u=o(h,f+=2),A=o(h,f+=4);f+=4,f=A;for(var g=0;g<l;g++){o(h,f),f+=4,f+=4,f+=4,o(h,f+=4),u=o(h,f+=4);var m=o(h,f+=4),b=i(h,f+=4),_=i(h,f+2),U=i(h,f+4);f+=6;var y=o(h,f+=8);f+=4,f+=b+_+U,r._readLocal(h,y,c,u,m,n)}return c},r._readLocal=function(e,n,i,o,f,c){var h=r.bin.readUshort,d=r.bin.readUint;d(e,n),h(e,n+=4),h(e,n+=2);var l=h(e,n+=2);d(e,n+=2),d(e,n+=4),n+=4;var u=h(e,n+=8),A=h(e,n+=2);n+=2;var g=r.bin.readUTF8(e,n,u);if(n+=u,n+=A,c)i[g]={size:f,csize:o};else{var m=new Uint8Array(e.buffer,n);if(l==0)i[g]=new Uint8Array(m.buffer.slice(n,n+o));else{if(l!=8)throw"unknown compression method: "+l;var b=new Uint8Array(f);r.inflateRaw(m,b),i[g]=b}}},r.inflateRaw=function(e,n){return r.F.inflate(e,n)},r.inflate=function(e,n){return e[0],e[1],r.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},r.deflate=function(e,n){n==null&&(n={level:6});var i=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[i]=120,o[i+1]=156,i+=2,i=r.F.deflateRaw(e,o,i,n.level);var f=r.adler(e,0,e.length);return o[i+0]=f>>>24&255,o[i+1]=f>>>16&255,o[i+2]=f>>>8&255,o[i+3]=f>>>0&255,new Uint8Array(o.buffer,0,i+4)},r.deflateRaw=function(e,n){n==null&&(n={level:6});var i=new Uint8Array(50+Math.floor(1.1*e.length)),o=r.F.deflateRaw(e,i,o,n.level);return new Uint8Array(i.buffer,0,o)},r.encode=function(e,n){n==null&&(n=!1);var i=0,o=r.bin.writeUint,f=r.bin.writeUshort,c={};for(var h in e){var d=!r._noNeed(h)&&!n,l=e[h],u=r.crc.crc(l,0,l.length);c[h]={cpr:d,usize:l.length,crc:u,file:d?r.deflateRaw(l):l}}for(var h in c)i+=c[h].file.length+30+46+2*r.bin.sizeUTF8(h);i+=22;var A=new Uint8Array(i),g=0,m=[];for(var h in c){var b=c[h];m.push(g),g=r._writeHeader(A,g,h,b,0)}var _=0,U=g;for(var h in c)b=c[h],m.push(g),g=r._writeHeader(A,g,h,b,1,m[_++]);var y=g-U;return o(A,g,101010256),g+=4,f(A,g+=4,_),f(A,g+=2,_),o(A,g+=2,y),o(A,g+=4,U),g+=4,g+=2,A.buffer},r._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},r._writeHeader=function(e,n,i,o,f,c){var h=r.bin.writeUint,d=r.bin.writeUshort,l=o.file;return h(e,n,f==0?67324752:33639248),n+=4,f==1&&(n+=2),d(e,n,20),d(e,n+=2,0),d(e,n+=2,o.cpr?8:0),h(e,n+=2,0),h(e,n+=4,o.crc),h(e,n+=4,l.length),h(e,n+=4,o.usize),d(e,n+=4,r.bin.sizeUTF8(i)),d(e,n+=2,0),n+=2,f==1&&(n+=2,n+=2,h(e,n+=6,c),n+=4),n+=r.bin.writeUTF8(e,n,i),f==0&&(e.set(l,n),n+=l.length),n},r.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var i=n,o=0;o<8;o++)1&i?i=3988292384^i>>>1:i>>>=1;e[n]=i}return e}(),update:function(e,n,i,o){for(var f=0;f<o;f++)e=r.crc.table[255&(e^n[i+f])]^e>>>8;return e},crc:function(e,n,i){return 4294967295^r.crc.update(4294967295,e,n,i)}},r.adler=function(e,n,i){for(var o=1,f=0,c=n,h=n+i;c<h;){for(var d=Math.min(c+5552,h);c<d;)f+=o+=e[c++];o%=65521,f%=65521}return f<<16|o},r.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,i){e[n]=255&i,e[n+1]=i>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,i){e[n]=255&i,e[n+1]=i>>8&255,e[n+2]=i>>16&255,e[n+3]=i>>24&255},readASCII:function(e,n,i){for(var o="",f=0;f<i;f++)o+=String.fromCharCode(e[n+f]);return o},writeASCII:function(e,n,i){for(var o=0;o<i.length;o++)e[n+o]=i.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,i){for(var o,f="",c=0;c<i;c++)f+="%"+r.bin.pad(e[n+c].toString(16));try{o=decodeURIComponent(f)}catch(h){return r.bin.readASCII(e,n,i)}return o},writeUTF8:function(e,n,i){for(var o=i.length,f=0,c=0;c<o;c++){var h=i.charCodeAt(c);if((4294967168&h)==0)e[n+f]=h,f++;else if((4294965248&h)==0)e[n+f]=192|h>>6,e[n+f+1]=128|h>>0&63,f+=2;else if((4294901760&h)==0)e[n+f]=224|h>>12,e[n+f+1]=128|h>>6&63,e[n+f+2]=128|h>>0&63,f+=3;else{if((4292870144&h)!=0)throw"e";e[n+f]=240|h>>18,e[n+f+1]=128|h>>12&63,e[n+f+2]=128|h>>6&63,e[n+f+3]=128|h>>0&63,f+=4}}return f},sizeUTF8:function(e){for(var n=e.length,i=0,o=0;o<n;o++){var f=e.charCodeAt(o);if((4294967168&f)==0)i++;else if((4294965248&f)==0)i+=2;else if((4294901760&f)==0)i+=3;else{if((4292870144&f)!=0)throw"e";i+=4}}return i}},r.F={},r.F.deflateRaw=function(e,n,i,o){var f=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],c=r.F.U,h=r.F._goodIndex;r.F._hash;var d=r.F._putsE,l=0,u=i<<3,A=0,g=e.length;if(o==0){for(;l<g;)d(n,u,l+(F=Math.min(65535,g-l))==g?1:0),u=r.F._copyExact(e,l,F,n,u+8),l+=F;return u>>>3}var m=c.lits,b=c.strt,_=c.prev,U=0,y=0,N=0,p=0,w=0,v=0;for(g>2&&(b[v=r.F._hash(e,0)]=0),l=0;l<g;l++){if(w=v,l+1<g-2){v=r.F._hash(e,l+1);var E=l+1&32767;_[E]=b[v],b[v]=E}if(A<=l){(U>14e3||y>26697)&&g-l>100&&(A<l&&(m[U]=l-A,U+=2,A=l),u=r.F._writeBlock(l==g-1||A==g?1:0,m,U,p,e,N,l-N,n,u),U=y=p=0,N=l);var P=0;l<g-2&&(P=r.F._bestMatch(e,l,_,w,Math.min(f[2],g-l),f[3]));var F=P>>>16,I=65535&P;if(P!=0){I=65535&P;var G=h(F=P>>>16,c.of0);c.lhst[257+G]++;var B=h(I,c.df0);c.dhst[B]++,p+=c.exb[G]+c.dxb[B],m[U]=F<<23|l-A,m[U+1]=I<<16|G<<8|B,U+=2,A=l+F}else c.lhst[e[l]]++;y++}}for(N==l&&e.length!=0||(A<l&&(m[U]=l-A,U+=2,A=l),u=r.F._writeBlock(1,m,U,p,e,N,l-N,n,u),U=0,y=0,U=y=p=0,N=l);(7&u)!=0;)u++;return u>>>3},r.F._bestMatch=function(e,n,i,o,f,c){var h=32767&n,d=i[h],l=h-d+32768&32767;if(d==h||o!=r.F._hash(e,n-l))return 0;for(var u=0,A=0,g=Math.min(32767,n);l<=g&&--c!=0&&d!=h;){if(u==0||e[n+u]==e[n+u-l]){var m=r.F._howLong(e,n,l);if(m>u){if(A=l,(u=m)>=f)break;l+2<m&&(m=l+2);for(var b=0,_=0;_<m-2;_++){var U=n-l+_+32768&32767,y=U-i[U]+32768&32767;y>b&&(b=y,d=U)}}}l+=(h=d)-(d=i[h])+32768&32767}return u<<16|A},r.F._howLong=function(e,n,i){if(e[n]!=e[n-i]||e[n+1]!=e[n+1-i]||e[n+2]!=e[n+2-i])return 0;var o=n,f=Math.min(e.length,n+258);for(n+=3;n<f&&e[n]==e[n-i];)n++;return n-o},r.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(e,n,i,o,f,c,h,d,l){var u,A,g,m,b,_,U,y,N,p=r.F.U,w=r.F._putsF,v=r.F._putsE;p.lhst[256]++,A=(u=r.F.getTrees())[0],g=u[1],m=u[2],b=u[3],_=u[4],U=u[5],y=u[6],N=u[7];var E=32+((l+3&7)==0?0:8-(l+3&7))+(h<<3),P=o+r.F.contSize(p.fltree,p.lhst)+r.F.contSize(p.fdtree,p.dhst),F=o+r.F.contSize(p.ltree,p.lhst)+r.F.contSize(p.dtree,p.dhst);F+=14+3*U+r.F.contSize(p.itree,p.ihst)+(2*p.ihst[16]+3*p.ihst[17]+7*p.ihst[18]);for(var I=0;I<286;I++)p.lhst[I]=0;for(I=0;I<30;I++)p.dhst[I]=0;for(I=0;I<19;I++)p.ihst[I]=0;var G=E<P&&E<F?0:P<F?1:2;if(w(d,l,e),w(d,l+1,G),l+=3,G==0){for(;(7&l)!=0;)l++;l=r.F._copyExact(f,c,h,d,l)}else{var B,M;if(G==1&&(B=p.fltree,M=p.fdtree),G==2){r.F.makeCodes(p.ltree,A),r.F.revCodes(p.ltree,A),r.F.makeCodes(p.dtree,g),r.F.revCodes(p.dtree,g),r.F.makeCodes(p.itree,m),r.F.revCodes(p.itree,m),B=p.ltree,M=p.dtree,v(d,l,b-257),v(d,l+=5,_-1),v(d,l+=5,U-4),l+=4;for(var C=0;C<U;C++)v(d,l+3*C,p.itree[1+(p.ordr[C]<<1)]);l+=3*U,l=r.F._codeTiny(y,p.itree,d,l),l=r.F._codeTiny(N,p.itree,d,l)}for(var H=c,R=0;R<i;R+=2){for(var O=n[R],S=O>>>23,x=H+(8388607&O);H<x;)l=r.F._writeLit(f[H++],B,d,l);if(S!=0){var Q=n[R+1],Z=Q>>16,T=Q>>8&255,z=255&Q;v(d,l=r.F._writeLit(257+T,B,d,l),S-p.of0[T]),l+=p.exb[T],w(d,l=r.F._writeLit(z,M,d,l),Z-p.df0[z]),l+=p.dxb[z],H+=S}}l=r.F._writeLit(256,B,d,l)}return l},r.F._copyExact=function(e,n,i,o,f){var c=f>>>3;return o[c]=i,o[c+1]=i>>>8,o[c+2]=255-o[c],o[c+3]=255-o[c+1],c+=4,o.set(new Uint8Array(e.buffer,n,i),c),f+(i+4<<3)},r.F.getTrees=function(){for(var e=r.F.U,n=r.F._hufTree(e.lhst,e.ltree,15),i=r.F._hufTree(e.dhst,e.dtree,15),o=[],f=r.F._lenCodes(e.ltree,o),c=[],h=r.F._lenCodes(e.dtree,c),d=0;d<o.length;d+=2)e.ihst[o[d]]++;for(d=0;d<c.length;d+=2)e.ihst[c[d]]++;for(var l=r.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&e.itree[1+(e.ordr[u-1]<<1)]==0;)u--;return[n,i,l,f,h,u,o,c]},r.F.getSecond=function(e){for(var n=[],i=0;i<e.length;i+=2)n.push(e[i+1]);return n},r.F.nonZero=function(e){for(var n="",i=0;i<e.length;i+=2)e[i+1]!=0&&(n+=(i>>1)+",");return n},r.F.contSize=function(e,n){for(var i=0,o=0;o<n.length;o++)i+=n[o]*e[1+(o<<1)];return i},r.F._codeTiny=function(e,n,i,o){for(var f=0;f<e.length;f+=2){var c=e[f],h=e[f+1];o=r.F._writeLit(c,n,i,o);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(i,o,h,d),o+=d)}return o},r.F._lenCodes=function(e,n){for(var i=e.length;i!=2&&e[i-1]==0;)i-=2;for(var o=0;o<i;o+=2){var f=e[o+1],c=o+3<i?e[o+3]:-1,h=o+5<i?e[o+5]:-1,d=o==0?-1:e[o-1];if(f==0&&c==f&&h==f){for(var l=o+5;l+2<i&&e[l+2]==f;)l+=2;(u=Math.min(l+1-o>>>1,138))<11?n.push(17,u-3):n.push(18,u-11),o+=2*u-2}else if(f==d&&c==f&&h==f){for(l=o+5;l+2<i&&e[l+2]==f;)l+=2;var u=Math.min(l+1-o>>>1,6);n.push(16,u-3),o+=2*u-2}else n.push(f,0)}return i>>>1},r.F._hufTree=function(e,n,i){var o=[],f=e.length,c=n.length,h=0;for(h=0;h<c;h+=2)n[h]=0,n[h+1]=0;for(h=0;h<f;h++)e[h]!=0&&o.push({lit:h,f:e[h]});var d=o.length,l=o.slice(0);if(d==0)return 0;if(d==1){var u=o[0].lit;return l=u==0?1:0,n[1+(u<<1)]=1,n[1+(l<<1)]=1,1}o.sort(function(y,N){return y.f-N.f});var A=o[0],g=o[1],m=0,b=1,_=2;for(o[0]={lit:-1,f:A.f+g.f,l:A,r:g,d:0};b!=d-1;)A=m!=b&&(_==d||o[m].f<o[_].f)?o[m++]:o[_++],g=m!=b&&(_==d||o[m].f<o[_].f)?o[m++]:o[_++],o[b++]={lit:-1,f:A.f+g.f,l:A,r:g};var U=r.F.setDepth(o[b-1],0);for(U>i&&(r.F.restrictDepth(l,i,U),U=i),h=0;h<d;h++)n[1+(l[h].lit<<1)]=l[h].d;return U},r.F.setDepth=function(e,n){return e.lit!=-1?(e.d=n,n):Math.max(r.F.setDepth(e.l,n+1),r.F.setDepth(e.r,n+1))},r.F.restrictDepth=function(e,n,i){var o=0,f=1<<i-n,c=0;for(e.sort(function(d,l){return l.d==d.d?d.f-l.f:l.d-d.d}),o=0;o<e.length&&e[o].d>n;o++){var h=e[o].d;e[o].d=n,c+=f-(1<<i-h)}for(c>>>=i-n;c>0;)(h=e[o].d)<n?(e[o].d++,c-=1<<n-h-1):o++;for(;o>=0;o--)e[o].d==n&&c<0&&(e[o].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(e,n){var i=0;return n[16|i]<=e&&(i|=16),n[8|i]<=e&&(i|=8),n[4|i]<=e&&(i|=4),n[2|i]<=e&&(i|=2),n[1|i]<=e&&(i|=1),i},r.F._writeLit=function(e,n,i,o){return r.F._putsF(i,o,n[e<<1]),o+n[1+(e<<1)]},r.F.inflate=function(e,n){var i=Uint8Array;if(e[0]==3&&e[1]==0)return n||new i(0);var o=r.F,f=o._bitsF,c=o._bitsE,h=o._decodeTiny,d=o.makeCodes,l=o.codes2map,u=o._get17,A=o.U,g=n==null;g&&(n=new i(e.length>>>2<<3));for(var m,b,_=0,U=0,y=0,N=0,p=0,w=0,v=0,E=0,P=0;_==0;)if(_=f(e,P,1),U=f(e,P+1,2),P+=3,U!=0){if(g&&(n=r.F._check(n,E+(1<<17))),U==1&&(m=A.flmap,b=A.fdmap,w=511,v=31),U==2){y=c(e,P,5)+257,N=c(e,P+5,5)+1,p=c(e,P+10,4)+4,P+=14;for(var F=0;F<38;F+=2)A.itree[F]=0,A.itree[F+1]=0;var I=1;for(F=0;F<p;F++){var G=c(e,P+3*F,3);A.itree[1+(A.ordr[F]<<1)]=G,G>I&&(I=G)}P+=3*p,d(A.itree,I),l(A.itree,I,A.imap),m=A.lmap,b=A.dmap,P=h(A.imap,(1<<I)-1,y+N,e,P,A.ttree);var B=o._copyOut(A.ttree,0,y,A.ltree);w=(1<<B)-1;var M=o._copyOut(A.ttree,y,N,A.dtree);v=(1<<M)-1,d(A.ltree,B),l(A.ltree,B,m),d(A.dtree,M),l(A.dtree,M,b)}for(;;){var C=m[u(e,P)&w];P+=15&C;var H=C>>>4;if(H>>>8==0)n[E++]=H;else{if(H==256)break;var R=E+H-254;if(H>264){var O=A.ldef[H-257];R=E+(O>>>3)+c(e,P,7&O),P+=7&O}var S=b[u(e,P)&v];P+=15&S;var x=S>>>4,Q=A.ddef[x],Z=(Q>>>4)+f(e,P,15&Q);for(P+=15&Q,g&&(n=r.F._check(n,E+(1<<17)));E<R;)n[E]=n[E++-Z],n[E]=n[E++-Z],n[E]=n[E++-Z],n[E]=n[E++-Z];E=R}}}else{(7&P)!=0&&(P+=8-(7&P));var T=4+(P>>>3),z=e[T-4]|e[T-3]<<8;g&&(n=r.F._check(n,E+z)),n.set(new i(e.buffer,e.byteOffset+T,z),E),P=T+z<<3,E+=z}return n.length==E?n:n.slice(0,E)},r.F._check=function(e,n){var i=e.length;if(n<=i)return e;var o=new Uint8Array(Math.max(i<<1,n));return o.set(e,0),o},r.F._decodeTiny=function(e,n,i,o,f,c){for(var h=r.F._bitsE,d=r.F._get17,l=0;l<i;){var u=e[d(o,f)&n];f+=15&u;var A=u>>>4;if(A<=15)c[l]=A,l++;else{var g=0,m=0;A==16?(m=3+h(o,f,2),f+=2,g=c[l-1]):A==17?(m=3+h(o,f,3),f+=3):A==18&&(m=11+h(o,f,7),f+=7);for(var b=l+m;l<b;)c[l]=g,l++}}return f},r.F._copyOut=function(e,n,i,o){for(var f=0,c=0,h=o.length>>>1;c<i;){var d=e[c+n];o[c<<1]=0,o[1+(c<<1)]=d,d>f&&(f=d),c++}for(;c<h;)o[c<<1]=0,o[1+(c<<1)]=0,c++;return f},r.F.makeCodes=function(e,n){for(var i,o,f,c,h=r.F.U,d=e.length,l=h.bl_count,u=0;u<=n;u++)l[u]=0;for(u=1;u<d;u+=2)l[e[u]]++;var A=h.next_code;for(i=0,l[0]=0,o=1;o<=n;o++)i=i+l[o-1]<<1,A[o]=i;for(f=0;f<d;f+=2)(c=e[f+1])!=0&&(e[f]=A[c],A[c]++)},r.F.codes2map=function(e,n,i){for(var o=e.length,f=r.F.U.rev15,c=0;c<o;c+=2)if(e[c+1]!=0)for(var h=c>>1,d=e[c+1],l=h<<4|d,u=n-d,A=e[c]<<u,g=A+(1<<u);A!=g;)i[f[A]>>>15-n]=l,A++},r.F.revCodes=function(e,n){for(var i=r.F.U.rev15,o=15-n,f=0;f<e.length;f+=2){var c=e[f]<<n-e[f+1];e[f]=i[c]>>>o}},r.F._putsE=function(e,n,i){i<<=7&n;var o=n>>>3;e[o]|=i,e[o+1]|=i>>>8},r.F._putsF=function(e,n,i){i<<=7&n;var o=n>>>3;e[o]|=i,e[o+1]|=i>>>8,e[o+2]|=i>>>16},r.F._bitsE=function(e,n,i){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<i)-1},r.F._bitsF=function(e,n,i){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<i)-1},r.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},r.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},r.F.U=(a=Uint16Array,s=Uint32Array,{next_code:new a(16),bl_count:new a(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new a(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new s(32),flmap:new a(512),fltree:[],fdmap:new a(32),fdtree:[],lmap:new a(32768),ltree:[],ttree:[],dmap:new a(32768),dtree:[],imap:new a(512),itree:[],rev15:new a(32768),lhst:new s(286),dhst:new s(30),ihst:new s(19),lits:new s(15e3),strt:new a(65536),prev:new a(32768)}),function(){for(var e=r.F.U,n=0;n<32768;n++){var i=n;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,e.rev15[n]=(i>>>16|i<<16)>>>17}function o(f,c,h){for(;c--!=0;)f.push(0,h)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),r.F.makeCodes(e.fltree,9),r.F.codes2map(e.fltree,9,e.flmap),r.F.revCodes(e.fltree,9),o(e.fdtree,32,5),r.F.makeCodes(e.fdtree,5),r.F.codes2map(e.fdtree,5,e.fdmap),r.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()}),UZIP=Object.freeze(_mergeNamespaces({__proto__:null,default:UZIP_1},[UZIP_1])),UPNG={},N,W,H;UPNG.toRGBA8=function(t){var a=t.width,s=t.height;if(t.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(t.data,a,s,t).buffer];var r=[];t.frames[0].data==null&&(t.frames[0].data=t.data);for(var e=a*s*4,n=new Uint8Array(e),i=new Uint8Array(e),o=new Uint8Array(e),f=0;f<t.frames.length;f++){var c=t.frames[f],h=c.rect.x,d=c.rect.y,l=c.rect.width,u=c.rect.height,A=UPNG.toRGBA8.decodeImage(c.data,l,u,t);if(f!=0)for(var g=0;g<e;g++)o[g]=n[g];if(c.blend==0?UPNG._copyTile(A,l,u,n,a,s,h,d,0):c.blend==1&&UPNG._copyTile(A,l,u,n,a,s,h,d,1),r.push(n.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)UPNG._copyTile(i,l,u,n,a,s,h,d,0);else if(c.dispose==2)for(g=0;g<e;g++)n[g]=o[g]}}return r},UPNG.toRGBA8.decodeImage=function(t,a,s,r){var e=a*s,n=UPNG.decode._getBPP(r),i=Math.ceil(a*n/8),o=new Uint8Array(4*e),f=new Uint32Array(o.buffer),c=r.ctype,h=r.depth,d=UPNG._bin.readUshort;if(c==6){var l=e<<2;if(h==8)for(var u=0;u<l;u+=4)o[u]=t[u],o[u+1]=t[u+1],o[u+2]=t[u+2],o[u+3]=t[u+3];if(h==16)for(u=0;u<l;u++)o[u]=t[u<<1]}else if(c==2){var A=r.tabs.tRNS;if(A==null){if(h==8)for(u=0;u<e;u++){var g=3*u;f[u]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g]}if(h==16)for(u=0;u<e;u++)g=6*u,f[u]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g]}else{var m=A[0],b=A[1],_=A[2];if(h==8)for(u=0;u<e;u++){var U=u<<2;g=3*u,f[u]=255<<24|t[g+2]<<16|t[g+1]<<8|t[g],t[g]==m&&t[g+1]==b&&t[g+2]==_&&(o[U+3]=0)}if(h==16)for(u=0;u<e;u++)U=u<<2,g=6*u,f[u]=255<<24|t[g+4]<<16|t[g+2]<<8|t[g],d(t,g)==m&&d(t,g+2)==b&&d(t,g+4)==_&&(o[U+3]=0)}}else if(c==3){var y=r.tabs.PLTE,N=r.tabs.tRNS,p=N?N.length:0;if(h==1)for(var w=0;w<s;w++){var v=w*i,E=w*a;for(u=0;u<a;u++){U=E+u<<2;var P=3*(F=t[v+(u>>3)]>>7-((7&u)<<0)&1);o[U]=y[P],o[U+1]=y[P+1],o[U+2]=y[P+2],o[U+3]=F<p?N[F]:255}}if(h==2)for(w=0;w<s;w++)for(v=w*i,E=w*a,u=0;u<a;u++)U=E+u<<2,P=3*(F=t[v+(u>>2)]>>6-((3&u)<<1)&3),o[U]=y[P],o[U+1]=y[P+1],o[U+2]=y[P+2],o[U+3]=F<p?N[F]:255;if(h==4)for(w=0;w<s;w++)for(v=w*i,E=w*a,u=0;u<a;u++)U=E+u<<2,P=3*(F=t[v+(u>>1)]>>4-((1&u)<<2)&15),o[U]=y[P],o[U+1]=y[P+1],o[U+2]=y[P+2],o[U+3]=F<p?N[F]:255;if(h==8)for(u=0;u<e;u++){var F;U=u<<2,P=3*(F=t[u]),o[U]=y[P],o[U+1]=y[P+1],o[U+2]=y[P+2],o[U+3]=F<p?N[F]:255}}else if(c==4){if(h==8)for(u=0;u<e;u++){U=u<<2;var I=t[G=u<<1];o[U]=I,o[U+1]=I,o[U+2]=I,o[U+3]=t[G+1]}if(h==16)for(u=0;u<e;u++){var G;U=u<<2,I=t[G=u<<2],o[U]=I,o[U+1]=I,o[U+2]=I,o[U+3]=t[G+2]}}else if(c==0)for(m=r.tabs.tRNS?r.tabs.tRNS:-1,w=0;w<s;w++){var B=w*i,M=w*a;if(h==1)for(var C=0;C<a;C++){var H=(I=255*(t[B+(C>>>3)]>>>7-(7&C)&1))==255*m?0:255;f[M+C]=H<<24|I<<16|I<<8|I}else if(h==2)for(C=0;C<a;C++)H=(I=85*(t[B+(C>>>2)]>>>6-((3&C)<<1)&3))==85*m?0:255,f[M+C]=H<<24|I<<16|I<<8|I;else if(h==4)for(C=0;C<a;C++)H=(I=17*(t[B+(C>>>1)]>>>4-((1&C)<<2)&15))==17*m?0:255,f[M+C]=H<<24|I<<16|I<<8|I;else if(h==8)for(C=0;C<a;C++)H=(I=t[B+C])==m?0:255,f[M+C]=H<<24|I<<16|I<<8|I;else if(h==16)for(C=0;C<a;C++)I=t[B+(C<<1)],H=d(t,B+(C<<u))==m?0:255,f[M+C]=H<<24|I<<16|I<<8|I}return o},UPNG.decode=function(t){for(var a,s=new Uint8Array(t),r=8,e=UPNG._bin,n=e.readUshort,i=e.readUint,o={tabs:{},frames:[]},f=new Uint8Array(s.length),c=0,h=0,d=[137,80,78,71,13,10,26,10],l=0;l<8;l++)if(s[l]!=d[l])throw"The input is not a PNG file!";for(;r<s.length;){var u=e.readUint(s,r);r+=4;var A=e.readASCII(s,r,4);if(r+=4,A=="IHDR")UPNG.decode._IHDR(s,r,o);else if(A=="CgBI")o.tabs[A]=s.slice(r,r+4);else if(A=="IDAT"){for(l=0;l<u;l++)f[c+l]=s[r+l];c+=u}else if(A=="acTL")o.tabs[A]={num_frames:i(s,r),num_plays:i(s,r+4)},a=new Uint8Array(s.length);else if(A=="fcTL"){var g;h!=0&&((g=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,a.slice(0,h),g.rect.width,g.rect.height),h=0);var m={x:i(s,r+12),y:i(s,r+16),width:i(s,r+4),height:i(s,r+8)},b=n(s,r+22);b=n(s,r+20)/(b==0?100:b);var _={rect:m,delay:Math.round(1e3*b),dispose:s[r+24],blend:s[r+25]};o.frames.push(_)}else if(A=="fdAT"){for(l=0;l<u-4;l++)a[h+l]=s[r+l+4];h+=u-4}else if(A=="pHYs")o.tabs[A]=[e.readUint(s,r),e.readUint(s,r+4),s[r+8]];else if(A=="cHRM")for(o.tabs[A]=[],l=0;l<8;l++)o.tabs[A].push(e.readUint(s,r+4*l));else if(A=="tEXt"||A=="zTXt"){o.tabs[A]==null&&(o.tabs[A]={});var U=e.nextZero(s,r),y=e.readASCII(s,r,U-r),N=r+u-U-1;if(A=="tEXt")v=e.readASCII(s,U+1,N);else{var p=UPNG.decode._inflate(s.slice(U+2,U+2+N));v=e.readUTF8(p,0,p.length)}o.tabs[A][y]=v}else if(A=="iTXt"){o.tabs[A]==null&&(o.tabs[A]={}),U=0;var w=r;U=e.nextZero(s,w),y=e.readASCII(s,w,U-w);var v,E=s[w=U+1];s[w+1],w+=2,U=e.nextZero(s,w),e.readASCII(s,w,U-w),w=U+1,U=e.nextZero(s,w),e.readUTF8(s,w,U-w),N=u-((w=U+1)-r),E==0?v=e.readUTF8(s,w,N):(p=UPNG.decode._inflate(s.slice(w,w+N)),v=e.readUTF8(p,0,p.length)),o.tabs[A][y]=v}else if(A=="PLTE")o.tabs[A]=e.readBytes(s,r,u);else if(A=="hIST"){var P=o.tabs.PLTE.length/3;for(o.tabs[A]=[],l=0;l<P;l++)o.tabs[A].push(n(s,r+2*l))}else if(A=="tRNS")o.ctype==3?o.tabs[A]=e.readBytes(s,r,u):o.ctype==0?o.tabs[A]=n(s,r):o.ctype==2&&(o.tabs[A]=[n(s,r),n(s,r+2),n(s,r+4)]);else if(A=="gAMA")o.tabs[A]=e.readUint(s,r)/1e5;else if(A=="sRGB")o.tabs[A]=s[r];else if(A=="bKGD")o.ctype==0||o.ctype==4?o.tabs[A]=[n(s,r)]:o.ctype==2||o.ctype==6?o.tabs[A]=[n(s,r),n(s,r+2),n(s,r+4)]:o.ctype==3&&(o.tabs[A]=s[r]);else if(A=="IEND")break;r+=u,e.readUint(s,r),r+=4}return h!=0&&((g=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,a.slice(0,h),g.rect.width,g.rect.height),h=0),o.data=UPNG.decode._decompress(o,f,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},UPNG.decode._decompress=function(t,a,s,r){var e=UPNG.decode._getBPP(t),n=Math.ceil(s*e/8),i=new Uint8Array((n+1+t.interlace)*r);return a=t.tabs.CgBI?UPNG.inflateRaw(a,i):UPNG.decode._inflate(a,i),t.interlace==0?a=UPNG.decode._filterZero(a,t,0,s,r):t.interlace==1&&(a=UPNG.decode._readInterlace(a,t)),a},UPNG.decode._inflate=function(t,a){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),a)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(t,a){var s,r,e=Uint8Array,n=0,i=0,o=0,f=0,c=0,h=0,d=0,l=0,u=0;if(t[0]==3&&t[1]==0)return a||new e(0);var A=H.H,g=A.b,m=A.e,b=A.R,_=A.n,U=A.A,y=A.Z,N=A.m,p=a==null;for(p&&(a=new e(t.length>>>2<<5));n==0;)if(n=g(t,u,1),i=g(t,u+1,2),u+=3,i!=0){if(p&&(a=H.H.W(a,l+(1<<17))),i==1&&(s=N.J,r=N.h,h=511,d=31),i==2){o=m(t,u,5)+257,f=m(t,u+5,5)+1,c=m(t,u+10,4)+4,u+=14;for(var w=1,v=0;v<38;v+=2)N.Q[v]=0,N.Q[v+1]=0;for(v=0;v<c;v++){var E=m(t,u+3*v,3);N.Q[1+(N.X[v]<<1)]=E,E>w&&(w=E)}u+=3*c,_(N.Q,w),U(N.Q,w,N.u),s=N.w,r=N.d,u=b(N.u,(1<<w)-1,o+f,t,u,N.v);var P=A.V(N.v,0,o,N.C);h=(1<<P)-1;var F=A.V(N.v,o,f,N.D);d=(1<<F)-1,_(N.C,P),U(N.C,P,s),_(N.D,F),U(N.D,F,r)}for(;;){var I=s[y(t,u)&h];u+=15&I;var G=I>>>4;if(G>>>8==0)a[l++]=G;else{if(G==256)break;var B=l+G-254;if(G>264){var M=N.q[G-257];B=l+(M>>>3)+m(t,u,7&M),u+=7&M}var C=r[y(t,u)&d];u+=15&C;var H=C>>>4,R=N.c[H],O=(R>>>4)+g(t,u,15&R);for(u+=15&R;l<B;)a[l]=a[l++-O],a[l]=a[l++-O],a[l]=a[l++-O],a[l]=a[l++-O];l=B}}}else{(7&u)!=0&&(u+=8-(7&u));var S=4+(u>>>3),x=t[S-4]|t[S-3]<<8;p&&(a=H.H.W(a,l+x)),a.set(new e(t.buffer,t.byteOffset+S,x),l),u=S+x<<3,l+=x}return a.length==l?a:a.slice(0,l)},H.H.W=function(t,a){var s=t.length;if(a<=s)return t;var r=new Uint8Array(s<<1);return r.set(t,0),r},H.H.R=function(t,a,s,r,e,n){for(var i=H.H.e,o=H.H.Z,f=0;f<s;){var c=t[o(r,e)&a];e+=15&c;var h=c>>>4;if(h<=15)n[f]=h,f++;else{var d=0,l=0;h==16?(l=3+i(r,e,2),e+=2,d=n[f-1]):h==17?(l=3+i(r,e,3),e+=3):h==18&&(l=11+i(r,e,7),e+=7);for(var u=f+l;f<u;)n[f]=d,f++}}return e},H.H.V=function(t,a,s,r){for(var e=0,n=0,i=r.length>>>1;n<s;){var o=t[n+a];r[n<<1]=0,r[1+(n<<1)]=o,o>e&&(e=o),n++}for(;n<i;)r[n<<1]=0,r[1+(n<<1)]=0,n++;return e},H.H.n=function(t,a){for(var s,r,e,n,i=H.H.m,o=t.length,f=i.j,c=0;c<=a;c++)f[c]=0;for(c=1;c<o;c+=2)f[t[c]]++;var h=i.K;for(s=0,f[0]=0,r=1;r<=a;r++)s=s+f[r-1]<<1,h[r]=s;for(e=0;e<o;e+=2)(n=t[e+1])!=0&&(t[e]=h[n],h[n]++)},H.H.A=function(t,a,s){for(var r=t.length,e=H.H.m.r,n=0;n<r;n+=2)if(t[n+1]!=0)for(var i=n>>1,o=t[n+1],f=i<<4|o,c=a-o,h=t[n]<<c,d=h+(1<<c);h!=d;)s[e[h]>>>15-a]=f,h++},H.H.l=function(t,a){for(var s=H.H.m.r,r=15-a,e=0;e<t.length;e+=2){var n=t[e]<<a-t[e+1];t[e]=s[n]>>>r}},H.H.M=function(t,a,s){s<<=7&a;var r=a>>>3;t[r]|=s,t[r+1]|=s>>>8},H.H.I=function(t,a,s){s<<=7&a;var r=a>>>3;t[r]|=s,t[r+1]|=s>>>8,t[r+2]|=s>>>16},H.H.e=function(t,a,s){return(t[a>>>3]|t[1+(a>>>3)]<<8)>>>(7&a)&(1<<s)-1},H.H.b=function(t,a,s){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)&(1<<s)-1},H.H.Z=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)},H.H.i=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16|t[3+(a>>>3)]<<24)>>>(7&a)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var t=H.H.m,a=0;a<32768;a++){var s=a;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,t.r[a]=(s>>>16|s<<16)>>>17}function r(e,n,i){for(;n--!=0;)e.push(0,i)}for(a=0;a<32;a++)t.q[a]=t.S[a]<<3|t.T[a],t.c[a]=t.p[a]<<4|t.z[a];r(t._,144,8),r(t._,112,9),r(t._,24,7),r(t._,8,8),H.H.n(t._,9),H.H.A(t._,9,t.J),H.H.l(t._,9),r(t.$,32,5),H.H.n(t.$,5),H.H.A(t.$,5,t.h),H.H.l(t.$,5),r(t.Q,19,0),r(t.C,286,0),r(t.D,30,0),r(t.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(t,a){for(var s=a.width,r=a.height,e=UPNG.decode._getBPP(a),n=e>>3,i=Math.ceil(s*e/8),o=new Uint8Array(r*i),f=0,c=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],l=[8,8,4,4,2,2,1],u=0;u<7;){for(var A=d[u],g=l[u],m=0,b=0,_=c[u];_<r;)_+=A,b++;for(var U=h[u];U<s;)U+=g,m++;var y=Math.ceil(m*e/8);UPNG.decode._filterZero(t,a,f,m,b);for(var N=0,p=c[u];p<r;){for(var w=h[u],v=f+N*y<<3;w<s;){var E;if(e==1&&(E=(E=t[v>>3])>>7-(7&v)&1,o[p*i+(w>>3)]|=E<<7-((7&w)<<0)),e==2&&(E=(E=t[v>>3])>>6-(7&v)&3,o[p*i+(w>>2)]|=E<<6-((3&w)<<1)),e==4&&(E=(E=t[v>>3])>>4-(7&v)&15,o[p*i+(w>>1)]|=E<<4-((1&w)<<2)),e>=8)for(var P=p*i+w*n,F=0;F<n;F++)o[P+F]=t[(v>>3)+F];v+=e,w+=g}N++,p+=A}m*b!=0&&(f+=b*(1+y)),u+=1}return o},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,a,s,r,e){var n=UPNG.decode._getBPP(a),i=Math.ceil(r*n/8),o=UPNG.decode._paeth;n=Math.ceil(n/8);var f=0,c=1,h=t[s],d=0;if(h>1&&(t[s]=[0,0,1][h-2]),h==3)for(d=n;d<i;d++)t[d+1]=t[d+1]+(t[d+1-n]>>>1)&255;for(var l=0;l<e;l++)if(d=0,(h=t[(c=(f=s+l*i)+l+1)-1])==0)for(;d<i;d++)t[f+d]=t[c+d];else if(h==1){for(;d<n;d++)t[f+d]=t[c+d];for(;d<i;d++)t[f+d]=t[c+d]+t[f+d-n]}else if(h==2)for(;d<i;d++)t[f+d]=t[c+d]+t[f+d-i];else if(h==3){for(;d<n;d++)t[f+d]=t[c+d]+(t[f+d-i]>>>1);for(;d<i;d++)t[f+d]=t[c+d]+(t[f+d-i]+t[f+d-n]>>>1)}else{for(;d<n;d++)t[f+d]=t[c+d]+o(0,t[f+d-i],0);for(;d<i;d++)t[f+d]=t[c+d]+o(t[f+d-n],t[f+d-i],t[f+d-n-i])}return t},UPNG.decode._paeth=function(t,a,s){var r=t+a-s,e=r-t,n=r-a,i=r-s;return e*e<=n*n&&e*e<=i*i?t:n*n<=i*i?a:s},UPNG.decode._IHDR=function(t,a,s){var r=UPNG._bin;s.width=r.readUint(t,a),a+=4,s.height=r.readUint(t,a),a+=4,s.depth=t[a],a++,s.ctype=t[a],a++,s.compress=t[a],a++,s.filter=t[a],a++,s.interlace=t[a],a++},UPNG._bin={nextZero:function(a,s){for(;a[s]!=0;)s++;return s},readUshort:function(a,s){return a[s]<<8|a[s+1]},writeUshort:function(a,s,r){a[s]=r>>8&255,a[s+1]=255&r},readUint:function(a,s){return 16777216*a[s]+(a[s+1]<<16|a[s+2]<<8|a[s+3])},writeUint:function(a,s,r){a[s]=r>>24&255,a[s+1]=r>>16&255,a[s+2]=r>>8&255,a[s+3]=255&r},readASCII:function(a,s,r){for(var e="",n=0;n<r;n++)e+=String.fromCharCode(a[s+n]);return e},writeASCII:function(a,s,r){for(var e=0;e<r.length;e++)a[s+e]=r.charCodeAt(e)},readBytes:function(a,s,r){for(var e=[],n=0;n<r;n++)e.push(a[s+n]);return e},pad:function(a){return a.length<2?"0".concat(a):a},readUTF8:function(a,s,r){for(var e,n="",i=0;i<r;i++)n+="%".concat(UPNG._bin.pad(a[s+i].toString(16)));try{e=decodeURIComponent(n)}catch(o){return UPNG._bin.readASCII(a,s,r)}return e}},UPNG._copyTile=function(t,a,s,r,e,n,i,o,f){for(var c=Math.min(a,e),h=Math.min(s,n),d=0,l=0,u=0;u<h;u++)for(var A=0;A<c;A++)if(i>=0&&o>=0?(d=u*a+A<<2,l=(o+u)*e+i+A<<2):(d=(-o+u)*a-i+A<<2,l=u*e+A<<2),f==0)r[l]=t[d],r[l+1]=t[d+1],r[l+2]=t[d+2],r[l+3]=t[d+3];else if(f==1){var g=t[d+3]*(1/255),m=t[d]*g,b=t[d+1]*g,_=t[d+2]*g,U=r[l+3]*(1/255),y=r[l]*U,N=r[l+1]*U,p=r[l+2]*U,w=1-g,v=g+U*w,E=v==0?0:1/v;r[l+3]=255*v,r[l+0]=(m+y*w)*E,r[l+1]=(b+N*w)*E,r[l+2]=(_+p*w)*E}else if(f==2)g=t[d+3],m=t[d],b=t[d+1],_=t[d+2],U=r[l+3],y=r[l],N=r[l+1],p=r[l+2],g==U&&m==y&&b==N&&_==p?(r[l]=0,r[l+1]=0,r[l+2]=0,r[l+3]=0):(r[l]=m,r[l+1]=b,r[l+2]=_,r[l+3]=g);else if(f==3){if(g=t[d+3],m=t[d],b=t[d+1],_=t[d+2],U=r[l+3],y=r[l],N=r[l+1],p=r[l+2],g==U&&m==y&&b==N&&_==p)continue;if(g<220&&U>20)return!1}return!0},UPNG.encode=function(t,a,s,r,e,n,i){r==null&&(r=0),i==null&&(i=!1);var o=UPNG.encode.compress(t,a,s,r,[!1,!1,!1,0,i]);return UPNG.encode.compressPNG(o,-1),UPNG.encode._main(o,a,s,e,n)},UPNG.encodeLL=function(t,a,s,r,e,n,i,o){for(var f={ctype:0+(r==1?0:2)+(e==0?0:4),depth:n,frames:[]},c=(r+e)*n,h=c*a,d=0;d<t.length;d++)f.frames.push({rect:{x:0,y:0,width:a,height:s},img:new Uint8Array(t[d]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(h/8)});return UPNG.encode.compressPNG(f,0,!0),UPNG.encode._main(f,a,s,i,o)},UPNG.encode._main=function(t,a,s,r,e){e==null&&(e={});var n=UPNG.crc.crc,i=UPNG._bin.writeUint,o=UPNG._bin.writeUshort,f=UPNG._bin.writeASCII,c=8,h=t.frames.length>1,d=!1,l=33+(h?20:0);if(e.sRGB!=null&&(l+=13),e.pHYs!=null&&(l+=21),t.ctype==3){for(var u=t.plte.length,A=0;A<u;A++)t.plte[A]>>>24!=255&&(d=!0);l+=8+3*u+4+(d?8+1*u+4:0)}for(var g=0;g<t.frames.length;g++)h&&(l+=38),l+=(v=t.frames[g]).cimg.length+12,g!=0&&(l+=4);l+=12;var m=new Uint8Array(l),b=[137,80,78,71,13,10,26,10];for(A=0;A<8;A++)m[A]=b[A];if(i(m,c,13),f(m,c+=4,"IHDR"),i(m,c+=4,a),i(m,c+=4,s),m[c+=4]=t.depth,m[++c]=t.ctype,m[++c]=0,m[++c]=0,m[++c]=0,i(m,++c,n(m,c-17,17)),c+=4,e.sRGB!=null&&(i(m,c,1),f(m,c+=4,"sRGB"),m[c+=4]=e.sRGB,i(m,++c,n(m,c-5,5)),c+=4),e.pHYs!=null&&(i(m,c,9),f(m,c+=4,"pHYs"),i(m,c+=4,e.pHYs[0]),i(m,c+=4,e.pHYs[1]),m[c+=4]=e.pHYs[2],i(m,++c,n(m,c-13,13)),c+=4),h&&(i(m,c,8),f(m,c+=4,"acTL"),i(m,c+=4,t.frames.length),i(m,c+=4,e.loop!=null?e.loop:0),i(m,c+=4,n(m,c-12,12)),c+=4),t.ctype==3){for(i(m,c,3*(u=t.plte.length)),f(m,c+=4,"PLTE"),c+=4,A=0;A<u;A++){var _=3*A,U=t.plte[A],y=255&U,N=U>>>8&255,p=U>>>16&255;m[c+_+0]=y,m[c+_+1]=N,m[c+_+2]=p}if(i(m,c+=3*u,n(m,c-3*u-4,3*u+4)),c+=4,d){for(i(m,c,u),f(m,c+=4,"tRNS"),c+=4,A=0;A<u;A++)m[c+A]=t.plte[A]>>>24&255;i(m,c+=u,n(m,c-u-4,u+4)),c+=4}}var w=0;for(g=0;g<t.frames.length;g++){var v=t.frames[g];h&&(i(m,c,26),f(m,c+=4,"fcTL"),i(m,c+=4,w++),i(m,c+=4,v.rect.width),i(m,c+=4,v.rect.height),i(m,c+=4,v.rect.x),i(m,c+=4,v.rect.y),o(m,c+=4,r[g]),o(m,c+=2,1e3),m[c+=2]=v.dispose,m[++c]=v.blend,i(m,++c,n(m,c-30,30)),c+=4);var E=v.cimg;i(m,c,(u=E.length)+(g==0?0:4));var P=c+=4;f(m,c,g==0?"IDAT":"fdAT"),c+=4,g!=0&&(i(m,c,w++),c+=4),m.set(E,c),i(m,c+=u,n(m,P,c-P)),c+=4}return i(m,c,0),f(m,c+=4,"IEND"),i(m,c+=4,n(m,c-4,4)),c+=4,m.buffer},UPNG.encode.compressPNG=function(t,a,s){for(var r=0;r<t.frames.length;r++){var e=t.frames[r];e.rect.width;var n=e.rect.height,i=new Uint8Array(n*e.bpl+n);e.cimg=UPNG.encode._filterZero(e.img,n,e.bpp,e.bpl,i,a,s)}},UPNG.encode.compress=function(t,a,s,r,e){for(var n=e[0],i=e[1],o=e[2],f=e[3],c=e[4],h=6,d=8,l=255,u=0;u<t.length;u++)for(var A=new Uint8Array(t[u]),g=A.length,m=0;m<g;m+=4)l&=A[m+3];var b=l!=255,_=UPNG.encode.framize(t,a,s,n,i,o),U={},y=[],N=[];if(r!=0){var p=[];for(m=0;m<_.length;m++)p.push(_[m].img.buffer);var w=UPNG.encode.concatRGBA(p),v=UPNG.quantize(w,r),E=0,P=new Uint8Array(v.abuf);for(m=0;m<_.length;m++){var F=(k=_[m].img).length;for(N.push(new Uint8Array(v.inds.buffer,E>>2,F>>2)),u=0;u<F;u+=4)k[u]=P[E+u],k[u+1]=P[E+u+1],k[u+2]=P[E+u+2],k[u+3]=P[E+u+3];E+=F}for(m=0;m<v.plte.length;m++)y.push(v.plte[m].est.rgba)}else for(u=0;u<_.length;u++){var I=_[u],G=new Uint32Array(I.img.buffer),B=I.rect.width,M=(g=G.length,new Uint8Array(g));for(N.push(M),m=0;m<g;m++){var C=G[m];if(m!=0&&C==G[m-1])M[m]=M[m-1];else if(m>B&&C==G[m-B])M[m]=M[m-B];else{var H=U[C];if(H==null&&(U[C]=H=y.length,y.push(C),y.length>=300))break;M[m]=H}}}var R=y.length;for(R<=256&&c==0&&(d=R<=2?1:R<=4?2:R<=16?4:8,d=Math.max(d,f)),u=0;u<_.length;u++){(I=_[u]).rect.x,I.rect.y,B=I.rect.width;var O=I.rect.height,S=I.img;new Uint32Array(S.buffer);var x=4*B,Q=4;if(R<=256&&c==0){x=Math.ceil(d*B/8);for(var Z=new Uint8Array(x*O),T=N[u],z=0;z<O;z++){m=z*x;var D=z*B;if(d==8)for(var W=0;W<B;W++)Z[m+W]=T[D+W];else if(d==4)for(W=0;W<B;W++)Z[m+(W>>1)]|=T[D+W]<<4-4*(1&W);else if(d==2)for(W=0;W<B;W++)Z[m+(W>>2)]|=T[D+W]<<6-2*(3&W);else if(d==1)for(W=0;W<B;W++)Z[m+(W>>3)]|=T[D+W]<<7-1*(7&W)}S=Z,h=3,Q=1}else if(b==0&&_.length==1){Z=new Uint8Array(B*O*3);var V=B*O;for(m=0;m<V;m++){var k,L=4*m;Z[k=3*m]=S[L],Z[k+1]=S[L+1],Z[k+2]=S[L+2]}S=Z,h=2,Q=3,x=3*B}I.img=S,I.bpl=x,I.bpp=Q}return{ctype:h,depth:d,plte:y,frames:_}},UPNG.encode.framize=function(t,a,s,r,e,n){for(var i=[],o=0;o<t.length;o++){var f,c=new Uint8Array(t[o]),h=new Uint32Array(c.buffer),d=0,l=0,u=a,A=s,g=r?1:0;if(o!=0){for(var m=n||r||o==1||i[o-2].dispose!=0?1:2,b=0,_=1e9,U=0;U<m;U++){for(var y=new Uint8Array(t[o-1-U]),N=new Uint32Array(t[o-1-U]),p=a,w=s,v=-1,E=-1,P=0;P<s;P++)for(var F=0;F<a;F++)h[R=P*a+F]!=N[R]&&(F<p&&(p=F),F>v&&(v=F),P<w&&(w=P),P>E&&(E=P));v==-1&&(p=w=v=E=0),e&&((1&p)==1&&p--,(1&w)==1&&w--);var I=(v-p+1)*(E-w+1);I<_&&(_=I,b=U,d=p,l=w,u=v-p+1,A=E-w+1)}y=new Uint8Array(t[o-1-b]),b==1&&(i[o-1].dispose=2),f=new Uint8Array(u*A*4),UPNG._copyTile(y,a,s,f,u,A,-d,-l,0),(g=UPNG._copyTile(c,a,s,f,u,A,-d,-l,3)?1:0)==1?UPNG.encode._prepareDiff(c,a,s,f,{x:d,y:l,width:u,height:A}):UPNG._copyTile(c,a,s,f,u,A,-d,-l,0)}else f=c.slice(0);i.push({rect:{x:d,y:l,width:u,height:A},img:f,blend:g,dispose:0})}if(r){for(o=0;o<i.length;o++)if((O=i[o]).blend!=1){var G=O.rect,B=i[o-1].rect,M=Math.min(G.x,B.x),C=Math.min(G.y,B.y),H={x:M,y:C,width:Math.max(G.x+G.width,B.x+B.width)-M,height:Math.max(G.y+G.height,B.y+B.height)-C};i[o-1].dispose=1,o-1!=0&&UPNG.encode._updateFrame(t,a,s,i,o-1,H,e),UPNG.encode._updateFrame(t,a,s,i,o,H,e)}}if(t.length!=1)for(var R=0;R<i.length;R++){var O;(O=i[R]).rect.width*O.rect.height}return i},UPNG.encode._updateFrame=function(t,a,s,r,e,n,i){for(var o=Uint8Array,f=Uint32Array,c=new o(t[e-1]),h=new f(t[e-1]),d=e+1<t.length?new o(t[e+1]):null,l=new o(t[e]),u=new f(l.buffer),A=a,g=s,m=-1,b=-1,_=0;_<n.height;_++)for(var U=0;U<n.width;U++){var y=n.x+U,N=n.y+_,p=N*a+y,w=u[p];w==0||r[e-1].dispose==0&&h[p]==w&&(d==null||d[4*p+3]!=0)||(y<A&&(A=y),y>m&&(m=y),N<g&&(g=N),N>b&&(b=N))}m==-1&&(A=g=m=b=0),i&&((1&A)==1&&A--,(1&g)==1&&g--),n={x:A,y:g,width:m-A+1,height:b-g+1};var v=r[e];v.rect=n,v.blend=1,v.img=new Uint8Array(n.width*n.height*4),r[e-1].dispose==0?(UPNG._copyTile(c,a,s,v.img,n.width,n.height,-n.x,-n.y,0),UPNG.encode._prepareDiff(l,a,s,v.img,n)):UPNG._copyTile(l,a,s,v.img,n.width,n.height,-n.x,-n.y,0)},UPNG.encode._prepareDiff=function(t,a,s,r,e){UPNG._copyTile(t,a,s,r,e.width,e.height,-e.x,-e.y,2)},UPNG.encode._filterZero=function(t,a,s,r,e,n,i){var o,f=[],c=[0,1,2,3,4];n!=-1?c=[n]:(a*r>5e5||s==1)&&(c=[0]),i&&(o={level:0});for(var h,d=UZIP,l=0;l<c.length;l++){for(var u=0;u<a;u++)UPNG.encode._filterLine(e,t,u,r,s,c[l]);f.push(d.deflate(e,o))}var A=1e9;for(l=0;l<f.length;l++)f[l].length<A&&(h=l,A=f[l].length);return f[h]},UPNG.encode._filterLine=function(t,a,s,r,e,n){var i=s*r,o=i+s,f=UPNG.decode._paeth;if(t[o]=n,o++,n==0)if(r<500)for(var c=0;c<r;c++)t[o+c]=a[i+c];else t.set(new Uint8Array(a.buffer,i,r),o);else if(n==1){for(c=0;c<e;c++)t[o+c]=a[i+c];for(c=e;c<r;c++)t[o+c]=a[i+c]-a[i+c-e]+256&255}else if(s==0){for(c=0;c<e;c++)t[o+c]=a[i+c];if(n==2)for(c=e;c<r;c++)t[o+c]=a[i+c];if(n==3)for(c=e;c<r;c++)t[o+c]=a[i+c]-(a[i+c-e]>>1)+256&255;if(n==4)for(c=e;c<r;c++)t[o+c]=a[i+c]-f(a[i+c-e],0,0)+256&255}else{if(n==2)for(c=0;c<r;c++)t[o+c]=a[i+c]+256-a[i+c-r]&255;if(n==3){for(c=0;c<e;c++)t[o+c]=a[i+c]+256-(a[i+c-r]>>1)&255;for(c=e;c<r;c++)t[o+c]=a[i+c]+256-(a[i+c-r]+a[i+c-e]>>1)&255}if(n==4){for(c=0;c<e;c++)t[o+c]=a[i+c]+256-f(0,a[i+c-r],0)&255;for(c=e;c<r;c++)t[o+c]=a[i+c]+256-f(a[i+c-e],a[i+c-r],a[i+c-e-r])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),a=0;a<256;a++){for(var s=a,r=0;r<8;r++)1&s?s=3988292384^s>>>1:s>>>=1;t[a]=s}return t}(),update:function(a,s,r,e){for(var n=0;n<e;n++)a=UPNG.crc.table[255&(a^s[r+n])]^a>>>8;return a},crc:function(a,s,r){return 4294967295^UPNG.crc.update(4294967295,a,s,r)}},UPNG.quantize=function(t,a){var s,r=new Uint8Array(t),e=r.slice(0),n=new Uint32Array(e.buffer),i=UPNG.quantize.getKDtree(e,a),o=i[0],f=i[1],c=UPNG.quantize.planeDst,h=r,d=n,l=h.length,u=new Uint8Array(r.length>>2);if(r.length<2e7)for(var A=0;A<l;A+=4){var g=h[A]*(1/255),m=h[A+1]*(1/255),b=h[A+2]*(1/255),_=h[A+3]*(1/255);s=UPNG.quantize.getNearest(o,g,m,b,_),u[A>>2]=s.ind,d[A>>2]=s.est.rgba}else for(A=0;A<l;A+=4){for(g=h[A]*(1/255),m=h[A+1]*(1/255),b=h[A+2]*(1/255),_=h[A+3]*(1/255),s=o;s.left;)s=c(s.est,g,m,b,_)<=0?s.left:s.right;u[A>>2]=s.ind,d[A>>2]=s.est.rgba}return{abuf:e.buffer,inds:u,plte:f}},UPNG.quantize.getKDtree=function(t,a,s){s==null&&(s=1e-4);var r=new Uint32Array(t.buffer),e={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};e.bst=UPNG.quantize.stats(t,e.i0,e.i1),e.est=UPNG.quantize.estats(e.bst);for(var n=[e];n.length<a;){for(var i=0,o=0,f=0;f<n.length;f++)n[f].est.L>i&&(i=n[f].est.L,o=f);if(i<s)break;var c=n[o],h=UPNG.quantize.splitPixels(t,r,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=h||c.i1<=h)c.est.L=0;else{var d={i0:c.i0,i1:h,bst:null,est:null,tdst:0,left:null,right:null};d.bst=UPNG.quantize.stats(t,d.i0,d.i1),d.est=UPNG.quantize.estats(d.bst);var l={i0:h,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};for(l.bst={R:[],m:[],N:c.bst.N-d.bst.N},f=0;f<16;f++)l.bst.R[f]=c.bst.R[f]-d.bst.R[f];for(f=0;f<4;f++)l.bst.m[f]=c.bst.m[f]-d.bst.m[f];l.est=UPNG.quantize.estats(l.bst),c.left=d,c.right=l,n[o]=d,n.push(l)}}for(n.sort(function(u,A){return A.bst.N-u.bst.N}),f=0;f<n.length;f++)n[f].ind=f;return[e,n]},UPNG.quantize.getNearest=function(t,a,s,r,e){if(t.left==null)return t.tdst=UPNG.quantize.dist(t.est.q,a,s,r,e),t;var n=UPNG.quantize.planeDst(t.est,a,s,r,e),i=t.left,o=t.right;n>0&&(i=t.right,o=t.left);var f=UPNG.quantize.getNearest(i,a,s,r,e);if(f.tdst<=n*n)return f;var c=UPNG.quantize.getNearest(o,a,s,r,e);return c.tdst<f.tdst?c:f},UPNG.quantize.planeDst=function(t,a,s,r,e){var n=t.e;return n[0]*a+n[1]*s+n[2]*r+n[3]*e-t.eMq},UPNG.quantize.dist=function(t,a,s,r,e){var n=a-t[0],i=s-t[1],o=r-t[2],f=e-t[3];return n*n+i*i+o*o+f*f},UPNG.quantize.splitPixels=function(t,a,s,r,e,n){var i=UPNG.quantize.vecDot;for(r-=4;s<r;){for(;i(t,s,e)<=n;)s+=4;for(;i(t,r,e)>n;)r-=4;if(s>=r)break;var o=a[s>>2];a[s>>2]=a[r>>2],a[r>>2]=o,s+=4,r-=4}for(;i(t,s,e)>n;)s-=4;return s+4},UPNG.quantize.vecDot=function(t,a,s){return t[a]*s[0]+t[a+1]*s[1]+t[a+2]*s[2]+t[a+3]*s[3]},UPNG.quantize.stats=function(t,a,s){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0],n=s-a>>2,i=a;i<s;i+=4){var o=t[i]*(1/255),f=t[i+1]*(1/255),c=t[i+2]*(1/255),h=t[i+3]*(1/255);e[0]+=o,e[1]+=f,e[2]+=c,e[3]+=h,r[0]+=o*o,r[1]+=o*f,r[2]+=o*c,r[3]+=o*h,r[5]+=f*f,r[6]+=f*c,r[7]+=f*h,r[10]+=c*c,r[11]+=c*h,r[15]+=h*h}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:e,N:n}},UPNG.quantize.estats=function(t){var a=t.R,s=t.m,r=t.N,e=s[0],n=s[1],i=s[2],o=s[3],f=r==0?0:1/r,c=[a[0]-e*e*f,a[1]-e*n*f,a[2]-e*i*f,a[3]-e*o*f,a[4]-n*e*f,a[5]-n*n*f,a[6]-n*i*f,a[7]-n*o*f,a[8]-i*e*f,a[9]-i*n*f,a[10]-i*i*f,a[11]-i*o*f,a[12]-o*e*f,a[13]-o*n*f,a[14]-o*i*f,a[15]-o*o*f],h=c,d=UPNG.M4,l=[Math.random(),Math.random(),Math.random(),Math.random()],u=0,A=0;if(r!=0)for(var g=0;g<16&&(l=d.multVec(h,l),A=Math.sqrt(d.dot(l,l)),l=d.sml(1/A,l),!(g!=0&&Math.abs(A-u)<1e-9));g++)u=A;var m=[e*f,n*f,i*f,o*f];return{Cov:c,q:m,e:l,L:u,eMq255:d.dot(d.sml(255,m),l),eMq:d.dot(l,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}},UPNG.M4={multVec:function(a,s){return[a[0]*s[0]+a[1]*s[1]+a[2]*s[2]+a[3]*s[3],a[4]*s[0]+a[5]*s[1]+a[6]*s[2]+a[7]*s[3],a[8]*s[0]+a[9]*s[1]+a[10]*s[2]+a[11]*s[3],a[12]*s[0]+a[13]*s[1]+a[14]*s[2]+a[15]*s[3]]},dot:function(a,s){return a[0]*s[0]+a[1]*s[1]+a[2]*s[2]+a[3]*s[3]},sml:function(a,s){return[a*s[0],a*s[1],a*s[2],a*s[3]]}},UPNG.encode.concatRGBA=function(t){for(var a=0,s=0;s<t.length;s++)a+=t[s].byteLength;var r=new Uint8Array(a),e=0;for(s=0;s<t.length;s++){for(var n=new Uint8Array(t[s]),i=n.length,o=0;o<i;o+=4){var f=n[o],c=n[o+1],h=n[o+2],d=n[o+3];d==0&&(f=c=h=0),r[e+o]=f,r[e+o+1]=c,r[e+o+2]=h,r[e+o+3]=d}e+=i}return r.buffer};var BROWSER_NAME={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",MOBILE_SAFARI:"MOBILE_SAFARI",ETC:"ETC"},_BROWSER_NAME$CHROME$,MAX_CANVAS_SIZE=(_BROWSER_NAME$CHROME$={},_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.CHROME,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.FIREFOX,11180),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.DESKTOP_SAFARI,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.IE,8192),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.MOBILE_SAFARI,4096),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.ETC,8192),_BROWSER_NAME$CHROME$),isBrowser=typeof window!="undefined",moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||window.File!==void 0&&File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||window.FileReader!==void 0&&FileReader);function getFilefromDataUrl(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Date.now();return new Promise(function(r){for(var e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=globalThis.atob(e[1]),o=i.length,f=new Uint8Array(o);o--;)f[o]=i.charCodeAt(o);var c=new Blob([f],{type:n});c.name=a,c.lastModified=s,r(c)})}function getDataUrlFromFile(t){return new Promise(function(a,s){var r=new CustomFileReader;r.onload=function(){return a(r.result)},r.onerror=function(e){return s(e)},r.readAsDataURL(t)})}function loadImage(t){return new Promise(function(a,s){var r=new Image;r.onload=function(){return a(r)},r.onerror=function(e){return s(e)},r.src=t})}function getBrowserName(){if(getBrowserName.cachedResult!==void 0)return getBrowserName.cachedResult;var t=BROWSER_NAME.ETC,a=navigator.userAgent;return/Chrom(e|ium)/i.test(a)?t=BROWSER_NAME.CHROME:/iP(ad|od|hone)/i.test(a)&&/WebKit/i.test(a)&&!/(CriOS|FxiOS|OPiOS|mercury)/i.test(a)?t=BROWSER_NAME.MOBILE_SAFARI:/Safari/i.test(a)?t=BROWSER_NAME.DESKTOP_SAFARI:/Firefox/i.test(a)?t=BROWSER_NAME.FIREFOX:(/MSIE/i.test(a)||!!document.documentMode)&&(t=BROWSER_NAME.IE),getBrowserName.cachedResult=t,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(t,a){for(var s=getBrowserName(),r=MAX_CANVAS_SIZE[s],e=t,n=a,i=e*n,o=e>n?n/e:e/n;i>r*r;){var f=(r+e)/2,c=(r+n)/2;f<c?(n=c,e=c*o):(n=f*o,e=f),i=e*n}return{width:e,height:n}}function getNewCanvasAndCtx(t,a){var s,r;try{if((r=(s=new OffscreenCanvas(t,a)).getContext("2d"))===null)throw new Error("getContext of OffscreenCanvas returns null")}catch(e){r=(s=document.createElement("canvas")).getContext("2d")}return s.width=t,s.height=a,[s,r]}function drawImageInCanvas(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=approximateBelowMaximumCanvasSizeOfBrowser(t.width,t.height),r=s.width,e=s.height,n=getNewCanvasAndCtx(r,e),i=_slicedToArray(n,2),o=i[0],f=i[1];return a&&/jpe?g/.test(a)&&(f.fillStyle="white",f.fillRect(0,0,o.width,o.height)),f.drawImage(t,0,0,o.width,o.height),o}function isIOS(){return isIOS.cachedResult!==void 0||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document!="undefined"&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(s,r){var e,n,i=function(){try{return n=drawImageInCanvas(e,a.fileType||t.type),s([e,n])}catch(c){return r(c)}},o=function(c){try{var h=function(l){try{throw l}catch(u){return r(u)}};try{return getDataUrlFromFile(t).then(function(d){try{return loadImage(d).then(function(l){try{return e=l,function(){try{return i()}catch(A){return r(A)}}()}catch(u){return h(u)}},h)}catch(l){return h(l)}},h)}catch(d){h(d)}}catch(d){return r(d)}};try{if(isIOS()||[BROWSER_NAME.DESKTOP_SAFARI,BROWSER_NAME.MOBILE_SAFARI].includes(getBrowserName()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(f){try{return e=f,i()}catch(c){return o()}},o)}catch(f){o()}})}function canvasToFile(t,a,s,r){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;return new Promise(function(n,i){var o,f,c;if(a==="image/png")return f=t.getContext("2d").getImageData(0,0,t.width,t.height).data,c=UPNG.encode([f],t.width,t.height,256*e),(o=new Blob([c],{type:a})).name=s,o.lastModified=r,h.call(this);{let d=function(){return h.call(this)};return typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas?t.convertToBlob({type:a,quality:e}).then(function(l){try{return(o=l).name=s,o.lastModified=r,d.call(this)}catch(u){return i(u)}}.bind(this),i):getFilefromDataUrl(t.toDataURL(a,e),s,r).then(function(l){try{return o=l,d.call(this)}catch(u){return i(u)}}.bind(this),i)}function h(){return n(o)}})}function cleanupCanvasMemory(t){t.width=0,t.height=0}function isAutoOrientationInBrowser(){return new Promise(function(t,a){var s,r,e,n;return isAutoOrientationInBrowser.cachedResult!==void 0?t(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(i){try{return drawFileInCanvas(s=i).then(function(o){try{return canvasToFile(r=o[1],s.type,s.name,s.lastModified).then(function(f){try{return e=f,cleanupCanvasMemory(r),drawFileInCanvas(e).then(function(c){try{return n=c[0],isAutoOrientationInBrowser.cachedResult=n.width===1&&n.height===2,t(isAutoOrientationInBrowser.cachedResult)}catch(h){return a(h)}},a)}catch(c){return a(c)}},a)}catch(f){return a(f)}},a)}catch(o){return a(o)}},a)})}function getExifOrientation(t){return new Promise(function(a,s){var r=new CustomFileReader;r.onload=function(e){var n=new DataView(e.target.result);if(n.getUint16(0,!1)!=65496)return a(-2);for(var i=n.byteLength,o=2;o<i;){if(n.getUint16(o+2,!1)<=8)return a(-1);var f=n.getUint16(o,!1);if(o+=2,f==65505){if(n.getUint32(o+=2,!1)!=1165519206)return a(-1);var c=n.getUint16(o+=6,!1)==18761;o+=n.getUint32(o+4,c);var h=n.getUint16(o,c);o+=2;for(var d=0;d<h;d++)if(n.getUint16(o+12*d,c)==274)return a(n.getUint16(o+12*d+8,c))}else{if((65280&f)!=65280)break;o+=n.getUint16(o,!1)}}return a(-1)},r.onerror=function(e){return s(e)},r.readAsArrayBuffer(t)})}function handleMaxWidthOrHeight(t,a){var s,r=t.width,e=t.height,n=a.maxWidthOrHeight,i=t;if(isFinite(n)&&(r>n||e>n)){var o=_slicedToArray(getNewCanvasAndCtx(r,e),2);i=o[0],s=o[1],r>e?(i.width=n,i.height=e/r*n):(i.width=r/e*n,i.height=n),s.drawImage(t,0,0,i.width,i.height),cleanupCanvasMemory(t)}return i}function followExifOrientation(t,a){var s=t.width,r=t.height,e=_slicedToArray(getNewCanvasAndCtx(s,r),2),n=e[0],i=e[1];switch(a>4&&a<9?(n.width=r,n.height=s):(n.width=s,n.height=r),a){case 2:i.transform(-1,0,0,1,s,0);break;case 3:i.transform(-1,0,0,-1,s,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,s);break;case 8:i.transform(0,-1,1,0,0,s)}return i.drawImage(t,0,0,s,r),cleanupCanvasMemory(t),n}function compress(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return new Promise(function(r,e){var n,i,o,f,c,h,d,l,u,A,g,m,b,_,U,y,N,p,w;function v(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;if(a.signal&&a.signal.aborted)throw a.signal.reason;n+=P,a.onProgress(Math.min(n,100))}function E(P){if(a.signal&&a.signal.aborted)throw a.signal.reason;n=Math.min(Math.max(P,n),100),a.onProgress(n)}return n=s,i=a.maxIteration||10,o=1024*a.maxSizeMB*1024,v(),drawFileInCanvas(t,a).then(function(P){try{var F=_slicedToArray(P,2);return f=F[1],v(),c=handleMaxWidthOrHeight(f,a),v(),new Promise(function(I,G){var B;if(!(B=a.exifOrientation))return getExifOrientation(t).then(function(C){try{return B=C,M.call(this)}catch(H){return G(H)}}.bind(this),G);function M(){return I(B)}return M.call(this)}).then(function(I){try{return h=I,v(),isAutoOrientationInBrowser().then(function(G){try{return d=G?c:followExifOrientation(c,h),v(),l=a.initialQuality||1,u=a.fileType||t.type,canvasToFile(d,u,t.name,t.lastModified,l).then(function(B){try{{let C=function(){if(i--&&(U>o||U>b)){var R,O,S=_slicedToArray(getNewCanvasAndCtx(R=w?.95*p.width:p.width,O=w?.95*p.height:p.height),2);return N=S[0],S[1].drawImage(p,0,0,R,O),l*=.95,canvasToFile(N,u,t.name,t.lastModified,l).then(function(x){try{return y=x,cleanupCanvasMemory(p),p=N,U=y.size,E(Math.min(99,Math.floor((_-U)/(_-o)*100))),C}catch(Q){return e(Q)}},e)}return[1]},H=function(){return cleanupCanvasMemory(p),cleanupCanvasMemory(N),cleanupCanvasMemory(c),cleanupCanvasMemory(d),cleanupCanvasMemory(f),E(100),r(y)};if(A=B,v(),g=A.size>o,m=A.size>t.size,!g&&!m)return E(100),r(A);var M;return b=t.size,_=A.size,U=_,p=d,w=!a.alwaysKeepResolution&&g,(M=function(R){for(;R;){if(R.then)return void R.then(M,e);try{if(R.pop){if(R.length)return R.pop()?H.call(this):R;R=C}else R=R.call(this)}catch(O){return e(O)}}}.bind(this))(C)}}catch(C){return e(C)}}.bind(this),e)}catch(B){return e(B)}}.bind(this),e)}catch(G){return e(G)}}.bind(this),e)}catch(I){return e(I)}}.bind(this),e)})}var cnt=0,imageCompressionLibUrl,worker;function createWorker(t){var a=[];return typeof t=="function"?a.push("(".concat(t,")()")):a.push(t),new Worker(URL.createObjectURL(new Blob(a)))}function createSourceObject(t){return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}function stringify(t){return JSON.stringify(t,function(a,s){return typeof s=="function"?"BIC_FN:::(function () { return ".concat(s.toString()," })()"):s})}function parse(o){if(typeof o=="string")return o;var result={};return Object.entries(o).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(typeof value=="string"&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(t){throw t}else result[key]=parse(value)}),result}function generateLib(){return createSourceObject(`
    // reconstruct library
    function imageCompression (){return (`.concat(imageCompression,`).apply(null, arguments)}

    imageCompression.getDataUrlFromFile = `).concat(imageCompression.getDataUrlFromFile,`
    imageCompression.getFilefromDataUrl = `).concat(imageCompression.getFilefromDataUrl,`
    imageCompression.loadImage = `).concat(imageCompression.loadImage,`
    imageCompression.drawImageInCanvas = `).concat(imageCompression.drawImageInCanvas,`
    imageCompression.drawFileInCanvas = `).concat(imageCompression.drawFileInCanvas,`
    imageCompression.canvasToFile = `).concat(imageCompression.canvasToFile,`
    imageCompression.getExifOrientation = `).concat(imageCompression.getExifOrientation,`
    imageCompression.handleMaxWidthOrHeight = `).concat(imageCompression.handleMaxWidthOrHeight,`
    imageCompression.followExifOrientation = `).concat(imageCompression.followExifOrientation,`
    imageCompression.cleanupCanvasMemory = `).concat(imageCompression.cleanupCanvasMemory,`
    imageCompression.isAutoOrientationInBrowser = `).concat(imageCompression.isAutoOrientationInBrowser,`
    imageCompression.approximateBelowMaximumCanvasSizeOfBrowser = `).concat(imageCompression.approximateBelowMaximumCanvasSizeOfBrowser,`
    imageCompression.getBrowserName = `).concat(imageCompression.getBrowserName,`

    // functions / objects
    getDataUrlFromFile = imageCompression.getDataUrlFromFile
    getFilefromDataUrl = imageCompression.getFilefromDataUrl
    loadImage = imageCompression.loadImage
    drawImageInCanvas = imageCompression.drawImageInCanvas
    drawFileInCanvas = imageCompression.drawFileInCanvas
    canvasToFile = imageCompression.canvasToFile
    getExifOrientation = imageCompression.getExifOrientation
    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight
    followExifOrientation = imageCompression.followExifOrientation
    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory
    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser
    approximateBelowMaximumCanvasSizeOfBrowser = imageCompression.approximateBelowMaximumCanvasSizeOfBrowser
    getBrowserName = imageCompression.getBrowserName
    isIOS = `).concat(isIOS,`
    
    getNewCanvasAndCtx = `).concat(getNewCanvasAndCtx,`
    CustomFileReader = FileReader
    CustomFile = File
    MAX_CANVAS_SIZE = `).concat(JSON.stringify(MAX_CANVAS_SIZE),`
    BROWSER_NAME = `).concat(JSON.stringify(BROWSER_NAME),`
    function compress (){return (`).concat(compress,`).apply(null, arguments)}

    // core-js
    function _slicedToArray(arr, n) { return arr }
    function _typeof(a) { return typeof a }
    function _objectSpread2(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
  
        Object.assign(target, source)
      }
  
      return target;
    }

    // Libraries
    const parse = `).concat(parse,`
    const UPNG = {}
    UPNG.toRGBA8 = `).concat(UPNG.toRGBA8,`
    UPNG.toRGBA8.decodeImage = `).concat(UPNG.toRGBA8.decodeImage,`
    UPNG.decode = `).concat(UPNG.decode,`
    UPNG.decode._decompress = `).concat(UPNG.decode._decompress,`
    UPNG.decode._inflate = `).concat(UPNG.decode._inflate,`
    UPNG.decode._readInterlace = `).concat(UPNG.decode._readInterlace,`
    UPNG.decode._getBPP = `).concat(UPNG.decode._getBPP,` 
    UPNG.decode._filterZero = `).concat(UPNG.decode._filterZero,`
    UPNG.decode._paeth = `).concat(UPNG.decode._paeth,`
    UPNG.decode._IHDR = `).concat(UPNG.decode._IHDR,`
    UPNG._bin = parse(`).concat(stringify(UPNG._bin),`)
    UPNG._copyTile = `).concat(UPNG._copyTile,`
    UPNG.encode = `).concat(UPNG.encode,`
    UPNG.encodeLL = `).concat(UPNG.encodeLL,` 
    UPNG.encode._main = `).concat(UPNG.encode._main,`
    UPNG.encode.compressPNG = `).concat(UPNG.encode.compressPNG,` 
    UPNG.encode.compress = `).concat(UPNG.encode.compress,`
    UPNG.encode.framize = `).concat(UPNG.encode.framize,` 
    UPNG.encode._updateFrame = `).concat(UPNG.encode._updateFrame,` 
    UPNG.encode._prepareDiff = `).concat(UPNG.encode._prepareDiff,` 
    UPNG.encode._filterZero = `).concat(UPNG.encode._filterZero,` 
    UPNG.encode._filterLine = `).concat(UPNG.encode._filterLine,`
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.crc = parse(`).concat(stringify(UPNG.crc),`)
    UPNG.crc.table = ( function() {
    var tab = new Uint32Array(256);
    for (var n=0; n<256; n++) {
      var c = n;
      for (var k=0; k<8; k++) {
        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
        else        c = c >>> 1;
      }
      tab[n] = c;  }
    return tab;  })()
    UPNG.quantize = `).concat(UPNG.quantize,` 
    UPNG.quantize.getKDtree = `).concat(UPNG.quantize.getKDtree,` 
    UPNG.quantize.getNearest = `).concat(UPNG.quantize.getNearest,` 
    UPNG.quantize.planeDst = `).concat(UPNG.quantize.planeDst,` 
    UPNG.quantize.dist = `).concat(UPNG.quantize.dist,`     
    UPNG.quantize.splitPixels = `).concat(UPNG.quantize.splitPixels,` 
    UPNG.quantize.vecDot = `).concat(UPNG.quantize.vecDot,` 
    UPNG.quantize.stats = `).concat(UPNG.quantize.stats,` 
    UPNG.quantize.estats = `).concat(UPNG.quantize.estats,`
    UPNG.M4 = parse(`).concat(stringify(UPNG.M4),`)
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.inflateRaw=function(){
    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;
      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;
      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);
        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;
        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;
        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;
                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;
        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);
        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;
        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);
        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};
      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};
      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;
        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);
          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;
        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};
      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;
        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];
          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);
        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;
                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};
      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};
      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};
      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;
        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();
      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;
        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;
        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];
        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);
        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);
        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()
    
    const UZIP = {}
    UZIP["parse"] = `).concat(UZIP_1.parse,`
    UZIP._readLocal = `).concat(UZIP_1._readLocal,`
    UZIP.inflateRaw = `).concat(UZIP_1.inflateRaw,`
    UZIP.inflate = `).concat(UZIP_1.inflate,`
    UZIP.deflate = `).concat(UZIP_1.deflate,`
    UZIP.deflateRaw = `).concat(UZIP_1.deflateRaw,`
    UZIP.encode = `).concat(UZIP_1.encode,`
    UZIP._noNeed = `).concat(UZIP_1._noNeed,`
    UZIP._writeHeader = `).concat(UZIP_1._writeHeader,`
    UZIP.crc = parse(`).concat(stringify(UZIP_1.crc),`)
    UZIP.crc.table = ( function() {
      var tab = new Uint32Array(256);
      for (var n=0; n<256; n++) {
        var c = n;
        for (var k=0; k<8; k++) {
          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
          else        c = c >>> 1;
        }
        tab[n] = c;  }
      return tab;  })()
    
    UZIP.adler = `).concat(UZIP_1.adler,`
    UZIP.bin = parse(`).concat(stringify(UZIP_1.bin),`)
    UZIP.F = {}
    UZIP.F.deflateRaw = `).concat(UZIP_1.F.deflateRaw,`
    UZIP.F._bestMatch = `).concat(UZIP_1.F._bestMatch,`
    UZIP.F._howLong = `).concat(UZIP_1.F._howLong,`
    UZIP.F._hash = `).concat(UZIP_1.F._hash,`
    UZIP.saved = `).concat(UZIP_1.saved,`
    UZIP.F._writeBlock = `).concat(UZIP_1.F._writeBlock,`
    UZIP.F._copyExact = `).concat(UZIP_1.F._copyExact,`
    UZIP.F.getTrees = `).concat(UZIP_1.F.getTrees,`
    UZIP.F.getSecond = `).concat(UZIP_1.F.getSecond,`
    UZIP.F.nonZero = `).concat(UZIP_1.F.nonZero,`
    UZIP.F.contSize = `).concat(UZIP_1.F.contSize,`
    UZIP.F._codeTiny = `).concat(UZIP_1.F._codeTiny,` 
    UZIP.F._lenCodes = `).concat(UZIP_1.F._lenCodes,` 
    UZIP.F._hufTree = `).concat(UZIP_1.F._hufTree,` 
    UZIP.F.setDepth = `).concat(UZIP_1.F.setDepth,` 
    UZIP.F.restrictDepth = `).concat(UZIP_1.F.restrictDepth,`
    UZIP.F._goodIndex = `).concat(UZIP_1.F._goodIndex,` 
    UZIP.F._writeLit = `).concat(UZIP_1.F._writeLit,` 
    UZIP.F.inflate = `).concat(UZIP_1.F.inflate,` 
    UZIP.F._check = `).concat(UZIP_1.F._check,` 
    UZIP.F._decodeTiny = `).concat(UZIP_1.F._decodeTiny,` 
    UZIP.F._copyOut = `).concat(UZIP_1.F._copyOut,` 
    UZIP.F.makeCodes = `).concat(UZIP_1.F.makeCodes,` 
    UZIP.F.codes2map = `).concat(UZIP_1.F.codes2map,` 
    UZIP.F.revCodes = `).concat(UZIP_1.F.revCodes,` 

    // used only in deflate
    UZIP.F._putsE = `).concat(UZIP_1.F._putsE,`
    UZIP.F._putsF = `).concat(UZIP_1.F._putsF,`
  
    UZIP.F._bitsE = `).concat(UZIP_1.F._bitsE,`
    UZIP.F._bitsF = `).concat(UZIP_1.F._bitsF,`

    UZIP.F._get17 = `).concat(UZIP_1.F._get17,`
    UZIP.F._get25 = `).concat(UZIP_1.F._get25,`
    UZIP.F.U = function(){
      var u16=Uint16Array, u32=Uint32Array;
      return {
        next_code : new u16(16),
        bl_count  : new u16(16),
        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],
        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],
        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],
        ldef : new u16(32),
        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],
        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],
        ddef : new u32(32),
        flmap: new u16(  512),  fltree: [],
        fdmap: new u16(   32),  fdtree: [],
        lmap : new u16(32768),  ltree : [],  ttree:[],
        dmap : new u16(32768),  dtree : [],
        imap : new u16(  512),  itree : [],
        //rev9 : new u16(  512)
        rev15: new u16(1<<15),
        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),
        lits : new u32(15000),
        strt : new u16(1<<16),
        prev : new u16(1<<15)
      };
    } ();

    (function(){
      var U = UZIP.F.U;
      var len = 1<<15;
      for(var i=0; i<len; i++) {
        var x = i;
        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));
        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));
        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));
        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));
        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;
      }
  
      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }
  
      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }
  
      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);
      /*
        var i = 0;
        for(; i<=143; i++) U.fltree.push(0,8);
        for(; i<=255; i++) U.fltree.push(0,9);
        for(; i<=279; i++) U.fltree.push(0,7);
        for(; i<=287; i++) U.fltree.push(0,8);
        */
      UZIP.F.makeCodes(U.fltree, 9);
      UZIP.F.codes2map(U.fltree, 9, U.flmap);
      UZIP.F.revCodes (U.fltree, 9)
  
      pushV(U.fdtree,32,5);
      //for(i=0;i<32; i++) U.fdtree.push(0,5);
      UZIP.F.makeCodes(U.fdtree, 5);
      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);
      UZIP.F.revCodes (U.fdtree, 5)
  
      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);
      /*
        for(var i=0; i< 19; i++) U.itree.push(0,0);
        for(var i=0; i<286; i++) U.ltree.push(0,0);
        for(var i=0; i< 30; i++) U.dtree.push(0,0);
        for(var i=0; i<320; i++) U.ttree.push(0,0);
        */
    })()
    `))}function generateWorkerScript(){return createWorker(`
    let scriptImported = false
    self.addEventListener('message', async (e) => {
      const { file, id, imageCompressionLibUrl, options } = e.data
      options.onProgress = (progress) => self.postMessage({ progress, id })
      try {
        if (!scriptImported) {
          // console.log('[worker] importScripts', imageCompressionLibUrl)
          self.importScripts(imageCompressionLibUrl)
          scriptImported = true
        }
        // console.log('[worker] self', self)
        const compressedFile = await imageCompression(file, options)
        self.postMessage({ file: compressedFile, id })
      } catch (e) {
        // console.error('[worker] error', e)
        self.postMessage({ error: e.message + '\\n' + e.stack, id })
      }
    })
  `)}function compressOnWebWorker(t,a){return new Promise(function(s,r){var e=cnt+=1;imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",function n(i){if(i.data.id===e){if(a.signal&&a.signal.aborted)return;if(i.data.progress!==void 0)return void a.onProgress(i.data.progress);worker.removeEventListener("message",n),i.data.error&&r(new Error(i.data.error)),s(i.data.file)}}),worker.addEventListener("error",r),a.signal&&a.signal.addEventListener("abort",function(){worker.terminate(),r(a.signal.reason)}),worker.postMessage({file:t,id:e,imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},a),{},{onProgress:void 0,signal:void 0})})})}function imageCompression(t,a){return new Promise(function(s,r){var e,n,i,o,f,c;if(e=_objectSpread2({},a),i=0,o=e.onProgress,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,f=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=function(u){i=u,typeof o=="function"&&o(i)},!(t instanceof Blob||t instanceof CustomFile))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,!f||typeof Worker!="function"||c)return compress(t,e).then(function(u){try{return n=u,l.call(this)}catch(A){return r(A)}}.bind(this),r);var h=function(){try{return l.call(this)}catch(u){return r(u)}}.bind(this),d=function(A){try{return compress(t,e).then(function(g){try{return n=g,h()}catch(m){return r(m)}},r)}catch(g){return r(g)}};try{return compressOnWebWorker(t,e).then(function(u){try{return n=u,h()}catch(A){return d()}},d)}catch(u){d()}function l(){try{n.name=t.name,n.lastModified=t.lastModified}catch(u){}return s(n)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.getBrowserName=getBrowserName,imageCompression.version="2.0.0"}}]);
