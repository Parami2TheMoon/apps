(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(Z){Z.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemText:"pairCoinsItemText___nXyHJ",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",warning:"warning___3rkcG",warningText:"warningText___4BREX",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},11385:function(Z,R,e){"use strict";e.r(R);var N=e(20228),H=e(11382),B=e(58024),G=e(39144),g=e(49111),F=e(19650),na=e(57663),y=e(71577),ra=e(77883),K=e(70507),C=e(12968),d=e(62462),c=e(74379),p=e(38648),h=e(3182),n=e(2824),$=e(402),m=e(3887),z=e(94043),w=e.n(z),o=e(67294),x=e(43581),Da=e(51615),wa=e(55909),V=e.n(wa),Pa=e(32177),r=e.n(Pa),L=e(33044),ia=e(3548),Ta=e(46656),la=e(57254),oa=e(57651),pa=e(1615),Oa=e(13580),Aa=e(96534),u=e(59749),ba=e(1115),Ba=e(32689),s=e(85893),ya=m.Z.Title,xa=function(){var X,J,Q,da=(0,x.tT)("apiWs"),Ua=(0,x.tT)("currentUser"),D=Ua.wallet,ja=(0,x.tT)("balance"),S=ja.balance,Wa=(0,x.tT)("assets"),T=Wa.assets,La=(0,o.useState)(""),ca=(0,n.Z)(La,2),ka=ca[0],ua=ca[1],Ra=(0,o.useState)(),_a=(0,n.Z)(Ra,2),M=_a[0],Ka=_a[1],Za=(0,o.useState)(),ma=(0,n.Z)(Za,2),Y=ma[0],Na=ma[1],Ha=(0,o.useState)(!1),va=(0,n.Z)(Ha,2),Ga=va[0],O=va[1],Fa=(0,o.useState)("ad3ToToken"),fa=(0,n.Z)(Fa,2),_=fa[0],$a=fa[1],za=(0,o.useState)(""),Sa=(0,n.Z)(za,2),A=Sa[0],U=Sa[1],Va=(0,o.useState)(""),Ea=(0,n.Z)(Va,2),b=Ea[0],j=Ea[1],Xa=(0,o.useState)(!1),ga=(0,n.Z)(Xa,2),Ja=ga[0],ha=ga[1],Qa=(0,o.useState)(""),Ma=(0,n.Z)(Qa,2),q=Ma[0],Ya=Ma[1],qa=(0,o.useState)(!1),Ia=(0,n.Z)(qa,2),ae=Ia[0],aa=Ia[1],ee=(0,o.useState)(!1),Ca=(0,n.Z)(ee,2),k=Ca[0],ea=Ca[1],P=(0,x.YB)(),a=(0,Da.UO)(),se=function(){var i=(0,h.Z)(w().mark(function l(v){var E,I;return w().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return ua(""),f.prev=1,f.next=4,(0,Ba.T9)(v);case 4:E=f.sent,I=E.data,I!=null&&I.token&&ua(I.token.icon),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(1),console.error(f.t0);case 12:case"end":return f.stop()}},l,null,[[1,9]])}));return function(v){return i.apply(this,arguments)}}(),te=function(){var i=(0,h.Z)(w().mark(function l(v){var E,I,W;return w().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Oa.Ay)(v);case 2:if(E=t.sent,!E.isEmpty){t.next=6;break}return p.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(v)}),t.abrupt("return");case 6:return I=E.toHuman(),Ka(I),t.next=10,(0,L.Vo)(v,(0,Aa.Vm)("1"));case 10:W=t.sent,Na(W.toString()),O(!1);case 13:case"end":return t.stop()}},l)}));return function(v){return i.apply(this,arguments)}}();(0,o.useEffect)(function(){da&&a!==null&&a!==void 0&&a.assetId&&(te(a==null?void 0:a.assetId),se(a==null?void 0:a.assetId),U(""),j(""))},[a,da]);var ne=function(){var i=(0,h.Z)(w().mark(function l(v,E){var I,W;return w().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!!D&&!!(D!=null&&D.keystore)&&!!(a!=null&&a.assetId))){t.next=37;break}O(!0),t.t0=_,t.next=t.t0==="ad3ToToken"?5:t.t0==="tokenToAd3"?20:35;break;case 5:return t.prev=5,t.next=8,(0,pa.Ht)(a==null?void 0:a.assetId,(0,u.HM)(b,18).toString(),(0,u.HM)(A,18).toString(),q,D==null?void 0:D.keystore,v,E);case 8:if(I=t.sent,O(!1),!(v&&E)){t.next=12;break}return t.abrupt("return",I);case 12:t.next=19;break;case 14:return t.prev=14,t.t1=t.catch(5),p.default.error({message:t.t1.message||t.t1,duration:null}),O(!1),t.abrupt("return");case 19:return t.abrupt("break",35);case 20:return t.prev=20,t.next=23,(0,pa.Ro)(a==null?void 0:a.assetId,(0,u.HM)(b,18).toString(),(0,u.HM)(A,18).toString(),q,D==null?void 0:D.keystore,v,E);case 23:if(W=t.sent,O(!1),!(v&&E)){t.next=27;break}return t.abrupt("return",W);case 27:t.next=34;break;case 29:return t.prev=29,t.t2=t.catch(20),p.default.error({message:t.t2.message||t.t2,duration:null}),O(!1),t.abrupt("return");case 34:return t.abrupt("break",35);case 35:t.next=39;break;case 37:p.default.error({key:"accessDenied",message:P.formatMessage({id:"error.accessDenied"}),duration:null}),O(!1);case 39:case"end":return t.stop()}},l,null,[[5,14],[20,29]])}));return function(v,E){return i.apply(this,arguments)}}(),sa=(0,o.useCallback)(function(i){a!=null&&a.assetId&&(_==="ad3ToToken"&&(0,L.hM)(a==null?void 0:a.assetId,(0,u.HM)(i,18).toString()).then(function(l){j((0,u.mI)(l,18))}),_==="tokenToAd3"&&(0,L.__)(a==null?void 0:a.assetId,(0,u.HM)(i,18).toString()).then(function(l){j((0,u.mI)(l,18))}))},[a,_]),ta=(0,o.useCallback)(function(i){a!=null&&a.assetId&&(_==="tokenToAd3"&&(0,L.Vo)(a==null?void 0:a.assetId,(0,u.HM)(i,18).toString()).then(function(l){U((0,u.mI)(l,18))}),_==="ad3ToToken"&&(0,L.UG)(a==null?void 0:a.assetId,(0,u.HM)(i,18).toString()).then(function(l){U((0,u.mI)(l,18))}))},[a,_]),re=(0,o.useCallback)(function(){var i=(0,u.mI)(S==null?void 0:S.free,18);U(i),sa(i)},[S,_,sa]),ie=(0,o.useCallback)(function(){if(a!=null&&a.assetId&&T){var i,l=(0,u.mI)((i=T.get(a==null?void 0:a.assetId))===null||i===void 0?void 0:i.balance,18);j(l),ta(l)}},[_,a,T,ta]);return(0,o.useEffect)(function(){if(_==="ad3ToToken"){if(S!=null&&S.free&&A){ea((0,u.HM)(A,18)>BigInt(S.free));return}}else if(a!=null&&a.assetId&&T&&b){var i;ea((0,u.HM)(b,18)>BigInt((i=T.get(a==null?void 0:a.assetId))===null||i===void 0?void 0:i.balance));return}ea(!1)},[_,S,A,b,a,T]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.Z,{"data-inspector-line":"201","data-inspector-column":"12","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",tip:P.formatMessage({id:"common.loading"}),spinning:Ga,wrapperClassName:V().spinContainer,children:(0,s.jsx)(G.Z,{"data-inspector-line":"208","data-inspector-column":"16","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:V().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,s.jsxs)("div",{"data-inspector-line":"219","data-inspector-column":"20","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().trade,children:[(0,s.jsx)(ya,{"data-inspector-line":"220","data-inspector-column":"24","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",level:5,style:{fontWeight:"bold",textAlign:"center"},className:V().title,children:P.formatMessage({id:"creator.explorer.trade"})}),(0,s.jsxs)("div",{"data-inspector-line":"232","data-inspector-column":"24","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoins,style:{flexFlow:_==="ad3ToToken"?"column":"column-reverse"},children:[(0,s.jsxs)("div",{"data-inspector-line":"238","data-inspector-column":"28","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsItem,children:[(0,s.jsxs)("div",{"data-inspector-line":"239","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsSelect,children:[(0,s.jsxs)("div",{"data-inspector-line":"240","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoin,children:[(0,s.jsx)(d.Z,{"data-inspector-line":"241","data-inspector-column":"40","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",src:"/images/logo-round-core.svg",preview:!1,className:r().pairCoinsItemIcon}),(0,s.jsx)("span",{"data-inspector-line":"246","data-inspector-column":"40","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsItemLabel,children:"AD3"})]}),(0,s.jsx)(K.Z,{"data-inspector-line":"248","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:A,className:r().pairCoinsItemInput,stringMode:!0,onChange:function(l){U(l),sa(l)}})]}),(0,s.jsxs)("div",{"data-inspector-line":"262","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsBalance,children:[(0,s.jsxs)("span",{"data-inspector-line":"263","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:"".concat(r().balance," ").concat(_==="ad3ToToken"&&k?r().warning:""),children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,s.jsx)(ia.Z,{"data-inspector-line":"267","data-inspector-column":"45","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",value:S==null?void 0:S.free}),_==="ad3ToToken"&&k&&(0,s.jsx)("span",{"data-inspector-line":"268","data-inspector-column":"84","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().warningText,children:"(insufficient balance)"})]}),(0,s.jsx)(y.Z,{"data-inspector-line":"270","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",type:"link",size:"middle",className:r().maxButton,onClick:re,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,s.jsx)(y.Z,{"data-inspector-line":"283","data-inspector-column":"28","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",type:"primary",shape:"circle",size:"middle",icon:(0,s.jsx)(la.Z,{"data-inspector-line":"287","data-inspector-column":"38","data-inspector-relative-path":"src/pages/Swap/Swap.tsx"}),className:r().pairCoinsSwitchButton,onClick:function(){$a(_==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),U(""),j("")}}),(0,s.jsxs)("div",{"data-inspector-line":"295","data-inspector-column":"28","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:"".concat(r().pairCoinsItem," ").concat(r().tokenCoin),children:[(0,s.jsxs)("div",{"data-inspector-line":"296","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsSelect,children:[(0,s.jsxs)("div",{"data-inspector-line":"297","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoin,onClick:function(){return aa(!0)},children:[M&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{"data-inspector-line":"299","data-inspector-column":"44","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",src:ka||"/images/default-avatar.svg",preview:!1,className:r().pairCoinsItemIcon}),(0,s.jsx)("span",{"data-inspector-line":"304","data-inspector-column":"44","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsItemLabel,children:M==null?void 0:M.symbol})]}),!M&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{"data-inspector-line":"307","data-inspector-column":"44","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsItemText,children:"Select Asset"})}),(0,s.jsx)(la.Z,{"data-inspector-line":"309","data-inspector-column":"40","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().downIcon})]}),(0,s.jsx)(K.Z,{"data-inspector-line":"311","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:b,className:r().pairCoinsItemInput,stringMode:!0,onChange:function(l){j(l),ta(l)}})]}),(0,s.jsxs)("div",{"data-inspector-line":"325","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsBalance,children:[(0,s.jsxs)("span",{"data-inspector-line":"326","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:"".concat(r().balance," ").concat(_==="tokenToAd3"&&k?r().warning:""),children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,s.jsx)(oa.Z,{"data-inspector-line":"330","data-inspector-column":"45","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",value:(X=(J=T.get((Q=a==null?void 0:a.assetId)!==null&&Q!==void 0?Q:""))===null||J===void 0?void 0:J.balance)!==null&&X!==void 0?X:"",symbol:M==null?void 0:M.symbol}),_==="tokenToAd3"&&k&&(0,s.jsx)("span",{"data-inspector-line":"331","data-inspector-column":"84","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().warningText,children:"(insufficient balance)"})]}),(0,s.jsx)(y.Z,{"data-inspector-line":"333","data-inspector-column":"36","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",type:"link",size:"middle",className:r().maxButton,onClick:ie,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,s.jsx)("div",{"data-inspector-line":"347","data-inspector-column":"24","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",className:r().pairCoinsFlat,children:(0,s.jsxs)(F.Z,{"data-inspector-line":"348","data-inspector-column":"28","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",children:[(0,s.jsx)(oa.Z,{"data-inspector-line":"349","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",value:(0,u.HM)("1",18).toString(),symbol:M==null?void 0:M.symbol}),(0,s.jsx)("span",{"data-inspector-line":"350","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",children:"\u2248"}),(0,s.jsx)(ia.Z,{"data-inspector-line":"351","data-inspector-column":"32","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",value:Y!=null?Y:""})]})}),(0,s.jsx)(y.Z,{"data-inspector-line":"354","data-inspector-column":"24","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",block:!0,type:"primary",size:"large",shape:"round",className:r().submitButton,disabled:!A||!b||k||!(a!=null&&a.assetId),onClick:function(){ha(!0)},children:P.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,s.jsx)(Ta.Z,{"data-inspector-line":"374","data-inspector-column":"12","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",visable:Ja,setVisable:ha,passphrase:q,setPassphrase:Ya,func:ne}),ae&&(0,s.jsx)(ba.Z,{"data-inspector-line":"382","data-inspector-column":"33","data-inspector-relative-path":"src/pages/Swap/Swap.tsx",onClose:function(){return aa(!1)},onSelectAsset:function(l){x.m8.push("/swap/".concat(l.id)),aa(!1)}})]})};R.default=xa},13580:function(Z,R,e){"use strict";e.d(R,{Ay:function(){return F},f5:function(){return na},r7:function(){return y},L7:function(){return ra},jd:function(){return K}});var N=e(11849),H=e(2824),B=e(3182),G=e(94043),g=e.n(G),F=function(){var C=(0,B.Z)(g().mark(function d(c){var p;return g().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.metadata(Number(c));case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},d)}));return function(c){return C.apply(this,arguments)}}(),na=function(){var C=(0,B.Z)(g().mark(function d(c){var p;return g().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.asset(Number(c));case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},d)}));return function(c){return C.apply(this,arguments)}}(),y=function(){var C=(0,B.Z)(g().mark(function d(c){var p;return g().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.account.entries(c);case 2:return p=n.sent,n.abrupt("return",p);case 4:case"end":return n.stop()}},d)}));return function(c){return C.apply(this,arguments)}}(),ra=function(){var C=(0,B.Z)(g().mark(function d(c,p){var h,n;return g().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,window.apiWs.query.assets.account(Number(p),c);case 2:if(h=m.sent,!h.isEmpty){m.next=5;break}return m.abrupt("return",null);case 5:return n=h.toHuman(),m.abrupt("return",n);case 7:case"end":return m.stop()}},d)}));return function(c,p){return C.apply(this,arguments)}}(),K=function(){var C=(0,B.Z)(g().mark(function d(){var c,p;return g().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.apiWs.query.assets.metadata.entries();case 2:return c=n.sent,p=(c!=null?c:[]).map(function($){var m=(0,H.Z)($,2),z=m[0],w=m[1],o=z.toHuman();return o?(0,N.Z)((0,N.Z)({},w.toHuman()),{},{id:o[0].replaceAll(",","")}):null}).filter(Boolean),n.abrupt("return",p);case 5:case"end":return n.stop()}},d)}));return function(){return C.apply(this,arguments)}}()}}]);
