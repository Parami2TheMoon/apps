(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[4505,5613,9728],{55133:function(Z){Z.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(Z){Z.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},4155:function(Z){Z.exports={indexContainer:"indexContainer___1oKuT",left:"left___3h0Sa",right:"right___1o7kr",sideCard:"sideCard___1WisH",topIcon:"topIcon___3HsoF",title:"title___fC196",input:"input___2YdZV",fiatAmount:"fiatAmount___3Fcll",selectAssets:"selectAssets___2QI7M",availableBalance:"availableBalance___1hgnr",token:"token___36NVd",icon:"icon___15HZU",name:"name___1E7m9",balance:"balance___3ic9z",fiat:"fiat___2AQA8",buttons:"buttons___3YNL6",button:"button___12z9a",listBtn:"listBtn___3O45P",field:"field___2anem",value:"value___D7eFr",fromQRCode:"fromQRCode___1dfEK",qrcode:"qrcode___3MC3N",exchanges:"exchanges___30zpx",searchBar:"searchBar___ieTJx",searchInput:"searchInput___3ngcE",assetsList:"assetsList___vjhB1",charge:"charge___sf44S",tabSelector:"tabSelector___2h6RI",tabItem:"tabItem___vWoCN",inactive:"inactive___2BWVU",card:"card___1JX6j"}},46656:function(Z,R,e){"use strict";var fe=e(71194),$=e(50146),M=e(47673),Q=e(32787),T=e(22385),b=e(31097),D=e(17462),I=e(76772),O=e(57663),B=e(71577),t=e(74379),de=e(38648),ne=e(3182),_e=e(2824),W=e(402),De=e(3887),te=e(94043),P=e.n(te),J=e(67294),j=e(43581),pe=e(55133),h=e.n(pe),re=e(3548),s=e(68855),he=e(47832),ge=e(55347),xe=e(51625),p=e(85893),ye=De.Z.Title,Ae=function(G){var L=G.visable,ue=G.setVisable,a=G.passphrase,K=G.setPassphrase,X=G.func,Y=G.changePassphrase,le=(0,j.tT)("apiWs"),Ee=(0,j.tT)("currentUser"),l=Ee.wallet,Pe=(0,j.tT)("balance"),Te=Pe.balance,Ie=(0,J.useState)(!1),ce=(0,_e.Z)(Ie,2),ie=ce[0],q=ce[1],be=(0,J.useState)(),me=(0,_e.Z)(be,2),w=me[0],Me=me[1],N=(0,j.YB)(),Ce=function(u){K(u?u.target.value:"")},ve=function(){var d=(0,ne.Z)(P().mark(function u(){var i,c,n,v,f;return P().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(q(!0),l!=null&&l.passphrase&&K(l==null?void 0:l.passphrase),!((!a||a.length<6)&&!(l!=null&&l.passphrase))){o.next=5;break}return q(!1),o.abrupt("return");case 5:if(i=(l==null?void 0:l.passphrase)||a,!(i&&l!==null&&l!==void 0&&l.keystore)){o.next=16;break}if(c=(0,he.Gh)(i,l.keystore),c){o.next=13;break}return de.default.error({key:"passphraseError",message:N.formatMessage({id:"error.passphrase.error"}),duration:null}),K(""),q(!1),o.abrupt("return");case 13:n=new ge.ZP({type:"sr25519"}),v=n.addFromUri(c),f=v.address,l!=null&&l.account&&l.account!==f&&(localStorage.clear(),sessionStorage.clear(),window.location.href=xe.Z.page.homePage);case 16:if(!X){o.next=25;break}return o.prev=17,o.next=20,X();case 20:o.next=25;break;case 22:o.prev=22,o.t0=o.catch(17),console.log("security modal submit func error fallback",o.t0);case 25:ue(!1),q(!1);case 27:case"end":return o.stop()}},u,null,[[17,22]])}));return function(){return d.apply(this,arguments)}}(),S=function(){var d=(0,ne.Z)(P().mark(function u(){var i;return P().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!!le&&!!l.account)){n.next=11;break}return n.next=3,X(!0,l.account);case 3:if(i=n.sent,!i){n.next=8;break}Me(i.partialFee),n.next=11;break;case 8:if(Y){n.next=11;break}return n.next=11,ve();case 11:case"end":return n.stop()}},u)}));return function(){return d.apply(this,arguments)}}();return(0,J.useEffect)(function(){!!le&&!!(l!=null&&l.account)&&L&&S()},[le,l==null?void 0:l.account,L]),(0,J.useEffect)(function(){!!(l!=null&&l.passphrase)&&L&&!Y&&K(l==null?void 0:l.passphrase)},[l==null?void 0:l.passphrase,a,L,Y]),(0,p.jsxs)($.Z,{title:(0,p.jsx)(ye,{level:3,children:N.formatMessage({id:"modal.security.title"})}),closable:!1,className:h().modal,centered:!0,visible:L,width:400,footer:(0,p.jsxs)("div",{className:h().buttons,children:[(0,p.jsx)(B.Z,{type:"text",shape:"round",size:"large",className:h().button,onClick:function(){ue(!1),window.location.reload()},loading:ie,children:N.formatMessage({id:"common.decline"})}),(0,p.jsx)(B.Z,{type:"primary",shape:"round",size:"large",className:h().button,onClick:function(){ve()},disabled:!a||a.length<6,loading:ie,children:N.formatMessage({id:"common.confirm"})})]}),children:[(0,p.jsxs)("div",{className:h().confirmContainer,children:[!!w&&!!(w!=null&&w.toString())>Te.free&&(0,p.jsx)(I.Z,{description:N.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:h().alertContainer}),!!w&&(0,p.jsxs)("div",{className:h().field,children:[(0,p.jsxs)("div",{className:h().labal,children:[N.formatMessage({id:"modal.security.gas"}),(0,p.jsxs)("span",{className:h().small,children:["(",N.formatMessage({id:"modal.security.estimated"}),")"]}),(0,p.jsx)(b.Z,{placement:"bottom",title:N.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,p.jsx)(s.Z,{className:h().labalIcon})})]}),(0,p.jsx)("div",{className:h().value,children:(0,p.jsx)(re.Z,{value:w,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(l!=null&&l.passphrase)||Y)&&(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,p.jsxs)("div",{className:h().codeInput,children:[(0,p.jsxs)("div",{className:h().verifyForm,children:[(0,p.jsx)("span",{className:(a==null?void 0:a.slice(0))&&!(a!=null&&a.slice(1,5))&&h().highLight,children:a==null?void 0:a.slice(0,1).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(1))&&!(a!=null&&a.slice(2,5))&&h().highLight,children:a==null?void 0:a.slice(1,2).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(2,3))&&!(a!=null&&a.slice(3,5))&&h().highLight,children:a==null?void 0:a.slice(2,3).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(3,4))&&!(a!=null&&a.slice(4,5))&&h().highLight,children:a==null?void 0:a.slice(3,4).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(4,5))&&!(a!=null&&a.slice(5))&&h().highLight,children:a==null?void 0:a.slice(4,5).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(5))&&h().highLight,children:a==null?void 0:a.slice(5).replace(/[^]/,"\u2731")})]}),(0,p.jsx)(Q.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:h().verifyInput,onChange:Ce,value:a,disabled:ie,maxLength:6,visibilityToggle:!1})]})})]})};R.Z=Ae},3548:function(Z,R,e){"use strict";var fe=e(67294),$=e(31639),M=e.n($),Q=e(96534),T=e(85893),b=function(I){var O=I.value,B=I.style;return(0,T.jsxs)("div",{className:M().ad3,style:B,children:[O?(0,Q.MP)(O):"--",(0,T.jsx)("span",{className:M().unit,children:"\xA0$AD3"})]})};R.Z=b},57651:function(Z,R,e){"use strict";var fe=e(67294),$=e(31639),M=e.n($),Q=e(96534),T=e(85893),b=function(I){var O=I.value,B=I.symbol,t=I.decimals,de=t===void 0?18:t;return(0,T.jsxs)("div",{className:M().ad3,children:[O?(0,Q.MP)(O.replaceAll(",",""),de):"--",B&&(0,T.jsxs)("span",{className:M().unit,children:["\xA0$",B]})]})};R.Z=b},24152:function(Z,R,e){"use strict";e.r(R),e.d(R,{default:function(){return ve}});var fe=e(58024),$=e(39144),M=e(2824),Q=e(402),T=e(3887),b=e(67294),D=e(43581),I=e(55909),O=e.n(I),B=e(4155),t=e.n(B),de=e(12968),ne=e(62462),_e=e(57663),W=e(71577),De=e(47673),te=e(32787),P=e(3182),J=e(94043),j=e.n(J),pe=e(8812),h=e(59749),re=e(57651),s=e(85893),he=function(d){var u=d.setStep,i=d.number,c=d.setNumber,n=d.token,v=(0,b.useState)(!1),f=(0,M.Z)(v,2),g=f[0],o=f[1],x=(0,D.YB)(),E=function(){var m=(0,P.Z)(j().mark(function C(){return j().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o(!0),u("Confirm");case 2:case"end":return r.stop()}},C)}));return function(){return m.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(t().input," bigInput"),onChange:function(C){c(C.target.value)},disabled:g,type:"number",value:i}),(0,s.jsx)(W.Z,{size:"large",type:"primary",shape:"round",onClick:function(){c((0,h.mI)(n.balance,n.decimals))},children:x.formatMessage({id:"stake.all"})}),(0,s.jsxs)("div",{className:t().selectAssets,onClick:function(){return u("SelectAsset")},children:[(0,s.jsx)("div",{className:t().title,children:x.formatMessage({id:"wallet.send.selectAssets"})}),(0,s.jsxs)("div",{className:t().token,children:[(0,s.jsx)(ne.Z,{className:t().icon,src:(n==null?void 0:n.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,s.jsx)("span",{className:t().name,children:n.symbol}),(0,s.jsx)(pe.Z,{style:{color:"#ff5b00"}})]})]}),(0,s.jsxs)("div",{className:t().availableBalance,children:[(0,s.jsx)("div",{className:t().title,children:x.formatMessage({id:"wallet.send.availableBalance"})}),(0,s.jsx)("div",{className:t().balance,children:(0,s.jsx)("span",{className:t().token,children:(0,s.jsx)(re.Z,{value:n.balance,symbol:n.symbol,decimals:n.decimals})})})]}),(0,s.jsxs)("div",{className:t().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:t().button,loading:g,disabled:(0,h.HM)(i,n.decimals)<=BigInt(0)||(0,h.HM)(i,n.decimals)>BigInt(n.balance),onClick:function(){return E()},children:x.formatMessage({id:"common.continue"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:t().button,onClick:function(){return D.m8.goBack()},children:x.formatMessage({id:"common.cancel"})})]})]})},ge=he,xe=T.Z.Title,p=function(d){var u=d.setStep,i=d.address,c=d.setAddress,n=(0,b.useState)(!1),v=(0,M.Z)(n,2),f=v[0],g=v[1],o=(0,D.YB)(),x=function(){var E=(0,P.Z)(j().mark(function m(){return j().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:g(!0),u("InputAmount");case 2:case"end":return _.stop()}},m)}));return function(){return E.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(xe,{level:4,children:o.formatMessage({id:"wallet.send.receiverAddress"})}),(0,s.jsx)(te.Z,{autoFocus:!0,placeholder:"did:ad3:\u2026\u2026",size:"large",className:t().input,onChange:function(m){return c(m.target.value)},disabled:f}),(0,s.jsxs)("div",{className:t().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:t().button,loading:f,disabled:!i,onClick:function(){return x()},children:o.formatMessage({id:"common.continue"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:t().button,onClick:function(){return D.m8.goBack()},children:o.formatMessage({id:"common.cancel"})})]})]})},ye=p,Ae=e(22385),Se=e(31097),G=e(74379),L=e(38648),ue=e(63667),a=e(96534),K=e(81603),X=e(47832),Y=new ue.Y({type:"sr25519"}),le=function(){var S=(0,P.Z)(j().mark(function d(u,i,c,n,v,f){var g,o,x,E,m;return j().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(g=c,!/^did:ad3:/.test(c)){_.next=5;break}if(g=(0,a.Zc)(g),g){_.next=5;break}throw new Error("Wrong Did");case 5:if(o=window.apiWs.tx.balances.transfer(g,(0,a.Vm)(u)),!(v&&f)){_.next=11;break}return _.next=9,o.paymentInfo(f);case 9:return x=_.sent,_.abrupt("return",x);case 11:if(E=(0,X.Gh)(n,i),!(E==null||!E)){_.next=14;break}throw new Error("Wrong Password");case 14:return m=Y.createFromUri(E),_.next=17,(0,K.Y)(o,m);case 17:return _.abrupt("return",_.sent);case 18:case"end":return _.stop()}},d)}));return function(u,i,c,n,v,f){return S.apply(this,arguments)}}(),Ee=function(){var S=(0,P.Z)(j().mark(function d(u,i,c,n,v,f,g){var o,x,E,m,C;return j().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=n,!/^did:ad3:/.test(n)){r.next=5;break}if(o=(0,a.Zc)(o),o){r.next=5;break}throw new Error("Wrong Did");case 5:if(x=window.apiWs.tx.assets.transfer(u,o,(0,a.Vm)(i)),!(f&&g)){r.next=11;break}return r.next=9,x.paymentInfo(g);case 9:return E=r.sent,r.abrupt("return",E);case 11:if(m=(0,X.Gh)(v,c),!(m==null||!m)){r.next=14;break}throw new Error("Wrong Password");case 14:return C=Y.createFromUri(m),r.next=17,(0,K.Y)(x,C);case 17:return r.abrupt("return",r.sent);case 18:case"end":return r.stop()}},d)}));return function(u,i,c,n,v,f,g){return S.apply(this,arguments)}}(),l=null,Pe=null,Te=null,Ie=null,ce=e(51625),ie=e(46656),q=T.Z.Title,be=function(d){var u=d.number,i=d.token,c=d.address,n=(0,D.tT)("currentUser"),v=n.wallet,f=(0,b.useState)(!1),g=(0,M.Z)(f,2),o=g[0],x=g[1],E=(0,b.useState)(!1),m=(0,M.Z)(E,2),C=m[0],_=m[1],r=(0,b.useState)(""),k=(0,M.Z)(r,2),F=k[0],ee=k[1],A=(0,D.YB)(),U=c,je=function(){var se=(0,P.Z)(j().mark(function oe(V,H){var ae,z;return j().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!!v&&!!v.keystore)){y.next=30;break}if(x(!0),U.indexOf("did:ad3:")>-1&&(U=(0,a.Zc)(U)),y.prev=4,i.symbol!=="AD3"){y.next=13;break}return y.next=8,le(u,v==null?void 0:v.keystore,U,F,V,H);case 8:if(ae=y.sent,!(V&&H)){y.next=11;break}return y.abrupt("return",ae);case 11:y.next=18;break;case 13:return y.next=15,Ee(i.assetId,u.toString(),v.keystore,U,F,V,H);case 15:if(z=y.sent,!(V&&H)){y.next=18;break}return y.abrupt("return",z);case 18:L.default.success({message:A.formatMessage({id:"wallet.send.pending"}),description:(0,s.jsxs)("p",{children:[A.formatMessage({id:"wallet.send.receiverAddress"}),": ",c]})}),D.m8.push(ce.Z.page.walletPage),x(!1),y.next=28;break;case 23:y.prev=23,y.t0=y.catch(4),L.default.error({key:"chainError",message:y.t0.message||y.t0,duration:null}),ee(""),x(!1);case 28:y.next=31;break;case 30:L.default.error({key:"accessDenied",message:A.formatMessage({id:"error.accessDenied"}),duration:null});case 31:case"end":return y.stop()}},oe,null,[[4,23]])}));return function(V,H){return se.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q,{level:4,children:A.formatMessage({id:"wallet.send.confirm"})}),(0,s.jsxs)("div",{className:t().listBtn,children:[(0,s.jsxs)("div",{className:t().field,children:[(0,s.jsx)("span",{className:t().title,children:A.formatMessage({id:"wallet.send.amount"})}),(0,s.jsx)("span",{className:t().value,children:(0,s.jsx)(re.Z,{value:(0,h.HM)(u,i.decimals).toString(),symbol:i.symbol,decimals:i.decimals})})]}),(0,s.jsxs)("div",{className:t().field,children:[(0,s.jsx)("span",{className:t().title,children:A.formatMessage({id:"wallet.send.receiverAddress"})}),(0,s.jsx)(Se.Z,{placement:"topRight",title:c,children:(0,s.jsx)("span",{className:t().value,children:c})})]})]}),(0,s.jsxs)("div",{className:t().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:t().button,loading:o,disabled:!u||!i||!c,onClick:function(){return _(!0)},children:A.formatMessage({id:"common.submit"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:t().button,onClick:function(){return D.m8.goBack()},loading:o,children:A.formatMessage({id:"common.cancel"})})]}),(0,s.jsx)(ie.Z,{visable:C,setVisable:_,passphrase:F,setPassphrase:ee,func:je})]})},me=be,w=function(d){var u=d.setStep,i=d.setToken,c=d.tokens,n=(0,b.useState)(""),v=(0,M.Z)(n,2),f=v[0],g=v[1],o=(0,b.useState)([]),x=(0,M.Z)(o,2),E=x[0],m=x[1],C=(0,D.YB)(),_=function(){var r=(0,P.Z)(j().mark(function k(F){return j().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:i(F),u("InputAmount");case 2:case"end":return A.stop()}},k)}));return function(F){return r.apply(this,arguments)}}();return(0,b.useEffect)(function(){(f==null?void 0:f.length)>0?m(c.filter(function(r){return r.symbol.toLowerCase().includes(f.toLowerCase())})):m(c)},[f,c]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:t().searchBar,children:(0,s.jsx)(te.Z,{autoFocus:!0,size:"large",className:t().searchInput,onChange:function(k){return g(k.target.value)},placeholder:C.formatMessage({id:"wallet.send.searchAsset"})})}),(0,s.jsxs)("div",{className:t().assetsList,children:[(0,s.jsxs)("div",{className:t().title,children:[(0,s.jsx)("span",{children:C.formatMessage({id:"wallet.send.name"})}),(0,s.jsx)("span",{children:C.formatMessage({id:"wallet.send.availableBalance"})})]}),E.map(function(r){return(0,s.jsxs)("div",{className:t().field,onClick:function(){_(r)},children:[(0,s.jsxs)("span",{className:t().title,children:[(0,s.jsx)(ne.Z,{className:t().icon,src:(r==null?void 0:r.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,s.jsx)("span",{className:t().name,children:r==null?void 0:r.symbol})]}),(0,s.jsx)("span",{className:t().value,children:(0,s.jsx)(re.Z,{value:r==null?void 0:r.balance,symbol:r==null?void 0:r.symbol})})]},r.symbol)})]}),(0,s.jsx)(W.Z,{block:!0,type:"default",shape:"round",size:"large",className:t().button,onClick:function(){return u("InputAmount")},style:{marginTop:20},children:C.formatMessage({id:"common.cancel"})})]})},Me=w,N=T.Z.Title,Ce=function(){var d=(0,b.useState)("InputAddress"),u=(0,M.Z)(d,2),i=u[0],c=u[1],n=(0,b.useState)("0"),v=(0,M.Z)(n,2),f=v[0],g=v[1],o=(0,D.tT)("balance"),x=o.balance,E=(0,D.tT)("assets"),m=E.assetsArr,C=(0,b.useState)([]),_=(0,M.Z)(C,2),r=_[0],k=_[1],F=(0,b.useState)(),ee=(0,M.Z)(F,2),A=ee[0],U=ee[1],je=(0,b.useState)(),se=(0,M.Z)(je,2),oe=se[0],V=se[1];(0,b.useEffect)(function(){var ae=[{icon:"/images/logo-round-core.svg",symbol:"AD3",balance:x.free,decimals:18,assetId:""}];m==null||m.forEach(function(z){ae.push({icon:z.icon,symbol:z.symbol,balance:z.balance,decimals:z.decimals,assetId:z.id})}),k(ae),U(ae[0])},[m,x]);var H=(0,D.YB)();return(0,s.jsx)("div",{className:O().mainContainer,children:(0,s.jsx)("div",{className:O().pageContainer,children:(0,s.jsxs)($.Z,{className:O().card,children:[(0,s.jsx)("img",{src:"/images/icon/send.svg",className:t().topIcon}),(0,s.jsx)(N,{level:2,style:{fontWeight:"bold"},className:t().title,children:H.formatMessage({id:"wallet.send.title"})}),i==="InputAmount"&&(0,s.jsx)(ge,{setStep:c,number:f,setNumber:g,token:A,setToken:U}),i==="InputAddress"&&(0,s.jsx)(ye,{setStep:c,address:oe,setAddress:V}),i==="Confirm"&&(0,s.jsx)(me,{number:f,token:A,address:oe}),i==="SelectAsset"&&(0,s.jsx)(Me,{setStep:c,setToken:U,tokens:r})]})})})},ve=Ce}}]);
