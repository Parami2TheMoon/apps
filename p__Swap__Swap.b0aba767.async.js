(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(R){R.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},15126:function(R){R.exports={assetsContainer:"assetsContainer___1wFua",noAssets:"noAssets___2Gid1",title:"title___swkHP",field:"field___3Hj7T",icon:"icon___39vsT",name:"name___3pUYc",value:"value___1rjpK"}},10070:function(R,se,s){"use strict";s.r(se),s.d(se,{default:function(){return Qe}});var K=s(20228),ne=s(11382),k=s(58024),me=s(39144),Ie=s(49111),pe=s(19650),be=s(57663),f=s(71577),C=s(77883),m=s(70507),S=s(12968),Z=s(62462),i=s(74379),V=s(38648),p=s(3182),y=s(2824),da=s(402),Pe=s(3887),Oe=s(94043),M=s.n(Oe),d=s(67294),B=s(43581),We=s(51615),Fe=s(55909),fe=s.n(Fe),$e=s(32177),t=s.n($e),W=s(33044),je=s(3548),Ge=s(46656),Ae=s(57254),he=s(57651),Ze=s(1615),Me=s(51625),Le=s(13580),Ue=s(96534),v=s(59749),Ne=s(43002),re=s(8870),ze=s(69764),Re=s(15126),D=s.n(Re),e=s(85893),Ke=function(G){var L=G.onClose,Y=G.onSelectAsset,te=(0,B.YB)(),F=(0,B.tT)("apiWs"),I=(0,B.tT)("currentUser"),J=I.wallet,x=(0,d.useState)(),le=(0,y.Z)(x,2),h=le[0],ge=le[1],ie=function(){var N=(0,p.Z)(M().mark(function Q(){var U,X,b;return M().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!F){T.next=9;break}return T.next=3,F.query.assets.metadata.entries();case 3:return U=T.sent,X=(U!=null?U:[]).map(function(z){var w=(0,y.Z)(z,2),H=w[0],$=w[1],E=H.toHuman();return E?(0,re.Z)((0,re.Z)({},$.toHuman()),{},{id:E[0]}):null}).filter(Boolean),T.next=7,Promise.all(X.map(function(){var z=(0,p.Z)(M().mark(function w(H){var $,E,oe,A,q,_,o,ue;return M().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,F.query.assets.account(Number(H.id),J==null?void 0:J.account);case 2:return E=u.sent,oe=($=E.toHuman())!==null&&$!==void 0?$:{balance:""},A=oe.balance,A.replaceAll(",",""),q="",u.prev=6,u.next=9,(0,Ne.yI)(H.id);case 9:return _=u.sent,u.next=12,(0,W.CC)(_);case 12:o=u.sent,!!(o!=null&&o.avatar)&&(o==null?void 0:o.avatar.indexOf("ipfs://"))>-1&&(ue=o==null?void 0:o.avatar.substring(7),q=Me.Z.ipfs.endpoint+ue),u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),console.error("Fetch Token Icon Error: assetId",H.id);case 19:return u.abrupt("return",(0,re.Z)((0,re.Z)({},H),{},{icon:q,balance:A.replaceAll(",","")}));case 20:case"end":return u.stop()}},w,null,[[6,16]])}));return function(w){return z.apply(this,arguments)}}()));case 7:b=T.sent,ge(b);case 9:case"end":return T.stop()}},Q)}));return function(){return N.apply(this,arguments)}}();return(0,d.useEffect)(function(){F&&ie()},[F]),(0,e.jsx)(ze.Z,{visable:!0,title:"Select Asset",content:(0,e.jsxs)("div",{className:D().assetsContainer,children:[!h&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ne.Z,{tip:"Loading Assets"})}),h&&h.length===0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:D().noAssets,children:"Could not find any assets."})}),h&&h.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:D().title,children:[(0,e.jsx)("span",{children:"Name"}),(0,e.jsx)("span",{children:"Available Balance"})]}),h==null?void 0:h.map(function(N){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:D().field,onClick:function(){return Y(N.id)},children:[(0,e.jsxs)("span",{className:D().title,children:[(0,e.jsx)(Z.Z,{className:D().icon,src:N.icon||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:D().name,children:N.name})]}),(0,e.jsx)("span",{className:D().value,children:(0,e.jsx)(he.Z,{value:N.balance,symbol:N.symbol})})]},N.id)})})]})]}),close:L,footer:(0,e.jsx)(f.Z,{block:!0,type:"primary",shape:"round",size:"large",onClick:L,children:te.formatMessage({id:"common.close"})})})},Ve=Ke,Ye=Pe.Z.Title,Je=function(){var G,L,Y,te=(0,B.tT)("apiWs"),F=(0,B.tT)("currentUser"),I=F.wallet,J=(0,B.tT)("balance"),x=J.balance,le=(0,B.tT)("assets"),h=le.assets,ge=(0,d.useState)(""),ie=(0,y.Z)(ge,2),N=ie[0],Q=ie[1],U=(0,d.useState)(),X=(0,y.Z)(U,2),b=X[0],Te=X[1],T=(0,d.useState)(),z=(0,y.Z)(T,2),w=z[0],H=z[1],$=(0,d.useState)(!0),E=(0,y.Z)($,2),oe=E[0],A=E[1],q=(0,d.useState)("ad3ToToken"),_=(0,y.Z)(q,2),o=_[0],ue=_[1],ke=(0,d.useState)(""),u=(0,y.Z)(ke,2),de=u[0],ee=u[1],qe=(0,d.useState)(""),Be=(0,y.Z)(qe,2),ce=Be[0],ae=Be[1],_e=(0,d.useState)(!1),xe=(0,y.Z)(_e,2),ea=xe[0],we=xe[1],aa=(0,d.useState)(""),De=(0,y.Z)(aa,2),Ce=De[0],sa=De[1],na=(0,d.useState)(!1),He=(0,y.Z)(na,2),ra=He[0],ve=He[1],P=(0,B.YB)(),n=(0,We.UO)(),ta=function(){var l=(0,p.Z)(M().mark(function r(g){var j,c,O;return M().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,Ne.yI)(g);case 3:return j=a.sent,a.next=6,(0,W.CC)(j);case 6:c=a.sent,!!(c!=null&&c.avatar)&&(c==null?void 0:c.avatar.indexOf("ipfs://"))>-1&&(O=c==null?void 0:c.avatar.substring(7),Q(Me.Z.ipfs.endpoint+O)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.error(a.t0);case 14:case"end":return a.stop()}},r,null,[[0,11]])}));return function(g){return l.apply(this,arguments)}}(),la=function(){var l=(0,p.Z)(M().mark(function r(g){var j,c,O;return M().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Le.Ay)(g);case 2:if(j=a.sent,!j.isEmpty){a.next=6;break}return V.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(g)}),a.abrupt("return");case 6:return c=j.toHuman(),Te(c),a.next=10,(0,W.Vo)(g,(0,Ue.Vm)("1"));case 10:O=a.sent,H(O.toString()),A(!1);case 13:case"end":return a.stop()}},r)}));return function(g){return l.apply(this,arguments)}}();(0,d.useEffect)(function(){if(!(n!=null&&n.assetId)){ve(!0);return}te&&(la(n==null?void 0:n.assetId),ta(n==null?void 0:n.assetId))},[n,te]);var ia=function(){var l=(0,p.Z)(M().mark(function r(g,j){var c,O;return M().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!!I&&!!(I!=null&&I.keystore)&&!!(n!=null&&n.assetId))){a.next=37;break}A(!0),a.t0=o,a.next=a.t0==="ad3ToToken"?5:a.t0==="tokenToAd3"?20:35;break;case 5:return a.prev=5,a.next=8,(0,Ze.Ht)(n==null?void 0:n.assetId,(0,v.HM)(ce,18).toString(),(0,v.HM)(de,18).toString(),Ce,I==null?void 0:I.keystore,g,j);case 8:if(c=a.sent,A(!1),!(g&&j)){a.next=12;break}return a.abrupt("return",c);case 12:a.next=19;break;case 14:return a.prev=14,a.t1=a.catch(5),V.default.error({message:a.t1.message||a.t1,duration:null}),A(!1),a.abrupt("return");case 19:return a.abrupt("break",35);case 20:return a.prev=20,a.next=23,(0,Ze.$1)(n==null?void 0:n.assetId,(0,v.HM)(de,18).toString(),(0,v.HM)(ce,18).toString(),Ce,I==null?void 0:I.keystore,g,j);case 23:if(O=a.sent,A(!1),!(g&&j)){a.next=27;break}return a.abrupt("return",O);case 27:a.next=34;break;case 29:return a.prev=29,a.t2=a.catch(20),V.default.error({message:a.t2.message||a.t2,duration:null}),A(!1),a.abrupt("return");case 34:return a.abrupt("break",35);case 35:a.next=39;break;case 37:V.default.error({key:"accessDenied",message:P.formatMessage({id:"error.accessDenied"}),duration:null}),A(!1);case 39:case"end":return a.stop()}},r,null,[[5,14],[20,29]])}));return function(g,j){return l.apply(this,arguments)}}(),Se=(0,d.useCallback)(function(l){n!=null&&n.assetId&&(o==="ad3ToToken"&&(0,W.hM)(n==null?void 0:n.assetId,(0,v.HM)(l,18).toString()).then(function(r){ae((0,v.mI)(r,18))}),o==="tokenToAd3"&&(0,W.__)(n==null?void 0:n.assetId,(0,v.HM)(l,18).toString()).then(function(r){ae((0,v.mI)(r,18))}))},[n,o]),ye=(0,d.useCallback)(function(l){n!=null&&n.assetId&&(o==="tokenToAd3"&&(0,W.Vo)(n==null?void 0:n.assetId,(0,v.HM)(l,18).toString()).then(function(r){ee((0,v.mI)(r,18))}),o==="ad3ToToken"&&(0,W.UG)(n==null?void 0:n.assetId,(0,v.HM)(l,18).toString()).then(function(r){ee((0,v.mI)(r,18))}))},[n]),oa=(0,d.useCallback)(function(){var l=(0,v.mI)(x==null?void 0:x.free,18);ee(l),Se(l)},[x,o,Se]),ua=(0,d.useCallback)(function(){if(n!=null&&n.assetId&&h){var l,r=(0,v.mI)((l=h.get(n==null?void 0:n.assetId))===null||l===void 0?void 0:l.balance,18);ae(r),ye(r)}},[o,n,h,ye]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ne.Z,{tip:P.formatMessage({id:"common.loading"}),spinning:oe,wrapperClassName:fe().spinContainer,children:(0,e.jsx)(me.Z,{className:fe().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,e.jsxs)("div",{className:t().trade,children:[(0,e.jsx)(Ye,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:fe().title,children:P.formatMessage({id:"creator.explorer.trade"})}),(0,e.jsxs)("div",{className:t().pairCoins,style:{flexFlow:o==="ad3ToToken"?"column":"column-reverse"},children:[(0,e.jsxs)("div",{className:t().pairCoinsItem,children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,children:[(0,e.jsx)(Z.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,e.jsx)(m.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:de,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){ee(r),Se(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(je.Z,{value:x==null?void 0:x.free})]}),(0,e.jsx)(f.Z,{type:"link",size:"middle",className:t().maxButton,onClick:oa,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,e.jsx)(f.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,e.jsx)(Ae.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){ue(o==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),ee(""),ae("")}}),(0,e.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,onClick:function(){return ve(!0)},children:[(0,e.jsx)(Z.Z,{src:N||"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:b==null?void 0:b.symbol}),(0,e.jsx)(Ae.Z,{className:t().downIcon})]}),(0,e.jsx)(m.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:ce,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){ae(r),ye(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(he.Z,{value:(G=(L=h.get((Y=n==null?void 0:n.assetId)!==null&&Y!==void 0?Y:""))===null||L===void 0?void 0:L.balance)!==null&&G!==void 0?G:"",symbol:b==null?void 0:b.symbol})]}),(0,e.jsx)(f.Z,{type:"link",size:"middle",className:t().maxButton,onClick:ua,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:t().pairCoinsFlat,children:(0,e.jsxs)(pe.Z,{children:[(0,e.jsx)(he.Z,{value:(0,v.HM)("1",18).toString(),symbol:b==null?void 0:b.symbol}),(0,e.jsx)("span",{children:"\u2248"}),(0,e.jsx)(je.Z,{value:w!=null?w:""})]})}),(0,e.jsx)(f.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!de||!ce,onClick:function(){we(!0)},children:P.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,e.jsx)(Ge.Z,{visable:ea,setVisable:we,passphrase:Ce,setPassphrase:sa,func:ia}),ra&&(0,e.jsx)(Ve,{onClose:function(){return ve(!1)},onSelectAsset:function(r){B.m8.push("/swap/".concat(r)),ve(!1)}})]})},Qe=Je},13580:function(R,se,s){"use strict";s.d(se,{Ay:function(){return me},f5:function(){return Ie},r7:function(){return pe},L7:function(){return be}});var K=s(3182),ne=s(94043),k=s.n(ne),me=function(){var f=(0,K.Z)(k().mark(function C(m){var S;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.metadata(Number(m));case 2:return S=i.sent,i.abrupt("return",S);case 4:case"end":return i.stop()}},C)}));return function(m){return f.apply(this,arguments)}}(),Ie=function(){var f=(0,K.Z)(k().mark(function C(m){var S;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.asset(Number(m));case 2:return S=i.sent,i.abrupt("return",S);case 4:case"end":return i.stop()}},C)}));return function(m){return f.apply(this,arguments)}}(),pe=function(){var f=(0,K.Z)(k().mark(function C(m){var S;return k().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.account.entries(m);case 2:return S=i.sent,i.abrupt("return",S);case 4:case"end":return i.stop()}},C)}));return function(m){return f.apply(this,arguments)}}(),be=function(){var f=(0,K.Z)(k().mark(function C(m,S){var Z,i;return k().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,window.apiWs.query.assets.account(Number(S),m);case 2:if(Z=p.sent,!Z.isEmpty){p.next=5;break}return p.abrupt("return",null);case 5:return i=Z.toHuman(),p.abrupt("return",i);case 7:case"end":return p.stop()}},C)}));return function(m,S){return f.apply(this,arguments)}}()}}]);
