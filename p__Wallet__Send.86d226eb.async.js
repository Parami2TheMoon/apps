(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[4505,5613,9728],{55133:function(B){B.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(B){B.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},4155:function(B){B.exports={indexContainer:"indexContainer___1oKuT",left:"left___3h0Sa",right:"right___1o7kr",sideCard:"sideCard___1WisH",topIcon:"topIcon___3HsoF",title:"title___fC196",input:"input___2YdZV",fiatAmount:"fiatAmount___3Fcll",selectAssets:"selectAssets___2QI7M",availableBalance:"availableBalance___1hgnr",token:"token___36NVd",icon:"icon___15HZU",name:"name___1E7m9",balance:"balance___3ic9z",fiat:"fiat___2AQA8",buttons:"buttons___3YNL6",button:"button___12z9a",listBtn:"listBtn___3O45P",field:"field___2anem",value:"value___D7eFr",fromQRCode:"fromQRCode___1dfEK",qrcode:"qrcode___3MC3N",exchanges:"exchanges___30zpx",searchBar:"searchBar___ieTJx",searchInput:"searchInput___3ngcE",assetsList:"assetsList___vjhB1",charge:"charge___sf44S",tabSelector:"tabSelector___2h6RI",tabItem:"tabItem___vWoCN",inactive:"inactive___2BWVU",card:"card___1JX6j"}},46656:function(B,R,e){"use strict";var _e=e(71194),z=e(50146),j=e(47673),H=e(32787),O=e(22385),C=e(31097),S=e(17462),T=e(76772),N=e(57663),k=e(71577),n=e(74379),de=e(38648),se=e(3182),he=e(2824),W=e(402),Se=e(3887),ae=e(94043),I=e.n(ae),Q=e(67294),D=e(43581),pe=e(55133),h=e.n(pe),ne=e(3548),s=e(68855),ge=e(47832),ye=e(55347),Ee=e(51625),p=e(85893),Me=Se.Z.Title,Pe=function($){var U=$.visable,ue=$.setVisable,a=$.passphrase,K=$.setPassphrase,J=$.func,G=$.changePassphrase,te=(0,D.tT)("apiWs"),be=(0,D.tT)("currentUser"),t=be.wallet,Ie=(0,D.tT)("balance"),xe=Ie.balance,Ce=(0,Q.useState)(!1),ce=(0,he.Z)(Ce,2),re=ce[0],X=ce[1],je=(0,Q.useState)(),me=(0,he.Z)(je,2),w=me[0],De=me[1],Z=(0,D.YB)(),A=function(o){K(o?o.target.value:"")},c=function(){var i=(0,se.Z)(I().mark(function o(){var d,v,l,M,b;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(X(!0),t!=null&&t.passphrase&&K(t==null?void 0:t.passphrase),!((!a||a.length<6)&&!(t!=null&&t.passphrase))){r.next=5;break}return X(!1),r.abrupt("return");case 5:if(d=(t==null?void 0:t.passphrase)||a,!(d&&t!==null&&t!==void 0&&t.keystore)){r.next=16;break}if(v=(0,ge.Gh)(d,t.keystore),v){r.next=13;break}return de.default.error({key:"passphraseError",message:Z.formatMessage({id:"error.passphrase.error"}),duration:null}),K(""),X(!1),r.abrupt("return");case 13:l=new ye.ZP({type:"sr25519"}),M=l.addFromUri(v),b=M.address,t!=null&&t.account&&t.account!==b&&(localStorage.clear(),sessionStorage.clear(),window.location.href=Ee.Z.page.homePage);case 16:if(!J){r.next=25;break}return r.prev=17,r.next=20,J();case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(17),console.log("security modal submit func error fallback",r.t0);case 25:ue(!1),X(!1);case 27:case"end":return r.stop()}},o,null,[[17,22]])}));return function(){return i.apply(this,arguments)}}(),g=function(){var i=(0,se.Z)(I().mark(function o(){var d;return I().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(!!te&&!!t.account)){l.next=11;break}return l.next=3,J(!0,t.account);case 3:if(d=l.sent,!d){l.next=8;break}De(d.partialFee),l.next=11;break;case 8:if(G){l.next=11;break}return l.next=11,c();case 11:case"end":return l.stop()}},o)}));return function(){return i.apply(this,arguments)}}();return(0,Q.useEffect)(function(){!!te&&!!(t!=null&&t.account)&&U&&g()},[te,t==null?void 0:t.account,U]),(0,Q.useEffect)(function(){!!(t!=null&&t.passphrase)&&U&&!G&&K(t==null?void 0:t.passphrase)},[t==null?void 0:t.passphrase,a,U,G]),(0,p.jsxs)(z.Z,{title:(0,p.jsx)(Me,{level:3,children:Z.formatMessage({id:"modal.security.title"})}),closable:!1,className:h().modal,centered:!0,visible:U,width:400,footer:(0,p.jsxs)("div",{className:h().buttons,children:[(0,p.jsx)(k.Z,{type:"text",shape:"round",size:"large",className:h().button,onClick:function(){ue(!1),window.location.reload()},loading:re,children:Z.formatMessage({id:"common.decline"})}),(0,p.jsx)(k.Z,{type:"primary",shape:"round",size:"large",className:h().button,onClick:function(){c()},disabled:!a||a.length<6,loading:re,children:Z.formatMessage({id:"common.confirm"})})]}),children:[(0,p.jsxs)("div",{className:h().confirmContainer,children:[!!w&&!!(w!=null&&w.toString())>xe.free&&(0,p.jsx)(T.Z,{description:Z.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:h().alertContainer}),!!w&&(0,p.jsxs)("div",{className:h().field,children:[(0,p.jsxs)("div",{className:h().labal,children:[Z.formatMessage({id:"modal.security.gas"}),(0,p.jsxs)("span",{className:h().small,children:["(",Z.formatMessage({id:"modal.security.estimated"}),")"]}),(0,p.jsx)(C.Z,{placement:"bottom",title:Z.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,p.jsx)(s.Z,{className:h().labalIcon})})]}),(0,p.jsx)("div",{className:h().value,children:(0,p.jsx)(ne.Z,{value:w,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(t!=null&&t.passphrase)||G)&&(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,p.jsxs)("div",{className:h().codeInput,children:[(0,p.jsxs)("div",{className:h().verifyForm,children:[(0,p.jsx)("span",{className:(a==null?void 0:a.slice(0))&&!(a!=null&&a.slice(1,5))&&h().highLight,children:a==null?void 0:a.slice(0,1).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(1))&&!(a!=null&&a.slice(2,5))&&h().highLight,children:a==null?void 0:a.slice(1,2).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(2,3))&&!(a!=null&&a.slice(3,5))&&h().highLight,children:a==null?void 0:a.slice(2,3).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(3,4))&&!(a!=null&&a.slice(4,5))&&h().highLight,children:a==null?void 0:a.slice(3,4).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(4,5))&&!(a!=null&&a.slice(5))&&h().highLight,children:a==null?void 0:a.slice(4,5).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(a==null?void 0:a.slice(5))&&h().highLight,children:a==null?void 0:a.slice(5).replace(/[^]/,"\u2731")})]}),(0,p.jsx)(H.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:h().verifyInput,onChange:A,value:a,disabled:re,maxLength:6,visibilityToggle:!1})]})})]})};R.Z=Pe},3548:function(B,R,e){"use strict";var _e=e(67294),z=e(31639),j=e.n(z),H=e(96534),O=e(85893),C=function(T){var N=T.value,k=T.style;return(0,O.jsxs)("div",{className:j().ad3,style:k,children:[N?(0,H.MP)(N):"--",(0,O.jsx)("span",{className:j().unit,children:"\xA0$AD3"})]})};R.Z=C},57651:function(B,R,e){"use strict";var _e=e(67294),z=e(31639),j=e.n(z),H=e(96534),O=e(85893),C=function(T){var N=T.value,k=T.symbol,n=T.decimals,de=n===void 0?18:n;return(0,O.jsxs)("div",{className:j().ad3,children:[N?(0,H.MP)(N.replaceAll(",",""),de):"--",k&&(0,O.jsxs)("span",{className:j().unit,children:["\xA0$",k]})]})};R.Z=C},24152:function(B,R,e){"use strict";e.r(R),e.d(R,{default:function(){return Z}});var _e=e(58024),z=e(39144),j=e(2824),H=e(402),O=e(3887),C=e(67294),S=e(43581),T=e(55909),N=e.n(T),k=e(4155),n=e.n(k),de=e(12968),se=e(62462),he=e(57663),W=e(71577),Se=e(47673),ae=e(32787),I=e(3182),Q=e(94043),D=e.n(Q),pe=e(8812),h=e(59749),ne=e(57651),s=e(85893),ge=function(c){var g=c.setStep,i=c.number,o=c.setNumber,d=c.token,v=(0,C.useState)(!1),l=(0,j.Z)(v,2),M=l[0],b=l[1],f=(0,S.YB)(),r=function(){var _=(0,I.Z)(D().mark(function x(){return D().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:b(!0),g("Confirm");case 2:case"end":return u.stop()}},x)}));return function(){return _.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ae.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(n().input," bigInput"),onChange:function(x){o(x.target.value)},disabled:M,type:"number",value:i}),(0,s.jsx)(W.Z,{size:"large",type:"primary",shape:"round",onClick:function(){o((0,h.mI)(d.balance,d.decimals))},children:f.formatMessage({id:"stake.all"})}),(0,s.jsxs)("div",{className:n().selectAssets,onClick:function(){return g("SelectAsset")},children:[(0,s.jsx)("div",{className:n().title,children:f.formatMessage({id:"wallet.send.selectAssets"})}),(0,s.jsxs)("div",{className:n().token,children:[(0,s.jsx)(se.Z,{className:n().icon,src:(d==null?void 0:d.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,s.jsx)("span",{className:n().name,children:d.symbol}),(0,s.jsx)(pe.Z,{style:{color:"#ff5b00"}})]})]}),(0,s.jsxs)("div",{className:n().availableBalance,children:[(0,s.jsx)("div",{className:n().title,children:f.formatMessage({id:"wallet.send.availableBalance"})}),(0,s.jsx)("div",{className:n().balance,children:(0,s.jsx)("span",{className:n().token,children:(0,s.jsx)(ne.Z,{value:d.balance,symbol:d.symbol,decimals:d.decimals})})})]}),(0,s.jsxs)("div",{className:n().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:n().button,loading:M,disabled:(0,h.HM)(i,d.decimals)<=BigInt(0)||(0,h.HM)(i,d.decimals)>BigInt(d.balance),onClick:function(){return r()},children:f.formatMessage({id:"common.continue"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:n().button,onClick:function(){return S.m8.goBack()},children:f.formatMessage({id:"common.cancel"})})]})]})},ye=ge,Ee=O.Z.Title,p=function(c){var g=c.setStep,i=c.address,o=c.setAddress,d=(0,C.useState)(!1),v=(0,j.Z)(d,2),l=v[0],M=v[1],b=(0,S.YB)(),f=function(){var r=(0,I.Z)(D().mark(function _(){return D().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:M(!0),g("InputAmount");case 2:case"end":return m.stop()}},_)}));return function(){return r.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ee,{level:4,children:b.formatMessage({id:"wallet.send.receiverAddress"})}),(0,s.jsx)(ae.Z,{autoFocus:!0,placeholder:"did:ad3:\u2026\u2026",size:"large",className:n().input,onChange:function(_){return o(_.target.value)},disabled:l}),(0,s.jsxs)("div",{className:n().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:n().button,loading:l,disabled:!i,onClick:function(){return f()},children:b.formatMessage({id:"common.continue"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:n().button,onClick:function(){return S.m8.goBack()},children:b.formatMessage({id:"common.cancel"})})]})]})},Me=p,Pe=e(22385),Ae=e(31097),$=e(74379),U=e(38648),ue=e(63667),a=e(96534),K=e(81603),J=e(47832),G=new ue.Y({type:"sr25519"}),te=function(){var A=(0,I.Z)(D().mark(function c(g,i,o,d,v,l){var M,b,f,r,_;return D().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(M=o,!/^did:ad3:/.test(o)){m.next=5;break}if(M=(0,a.Zc)(M),M){m.next=5;break}throw new Error("Wrong Did");case 5:if(b=window.apiWs.tx.balances.transfer(M,(0,a.Vm)(g)),!(v&&l)){m.next=11;break}return m.next=9,b.paymentInfo(l);case 9:return f=m.sent,m.abrupt("return",f);case 11:if(r=(0,J.Gh)(d,i),!(r==null||!r)){m.next=14;break}throw new Error("Wrong Password");case 14:return _=G.createFromUri(r),m.next=17,(0,K.Y)(b,_);case 17:return m.abrupt("return",m.sent);case 18:case"end":return m.stop()}},c)}));return function(g,i,o,d,v,l){return A.apply(this,arguments)}}(),be=function(){var A=(0,I.Z)(D().mark(function c(g,i,o,d,v,l,M,b){var f,r,_,x,m;return D().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(f=v,!/^did:ad3:/.test(v)){E.next=5;break}if(f=(0,a.Zc)(f),f){E.next=5;break}throw new Error("Wrong Did");case 5:if(r=window.apiWs.tx.assets.transfer(g,f,(0,h.HM)(o,i).toString()),!(M&&b)){E.next=11;break}return E.next=9,r.paymentInfo(b);case 9:return _=E.sent,E.abrupt("return",_);case 11:if(x=(0,J.Gh)(l,d),!(x==null||!x)){E.next=14;break}throw new Error("Wrong Password");case 14:return m=G.createFromUri(x),E.next=17,(0,K.Y)(r,m);case 17:return E.abrupt("return",E.sent);case 18:case"end":return E.stop()}},c)}));return function(g,i,o,d,v,l,M,b){return A.apply(this,arguments)}}(),t=null,Ie=null,xe=e(51625),Ce=e(46656),ce=O.Z.Title,re=function(c){var g=c.number,i=c.token,o=c.address,d=(0,S.tT)("currentUser"),v=d.wallet,l=(0,C.useState)(!1),M=(0,j.Z)(l,2),b=M[0],f=M[1],r=(0,C.useState)(!1),_=(0,j.Z)(r,2),x=_[0],m=_[1],u=(0,C.useState)(""),E=(0,j.Z)(u,2),L=E[0],le=E[1],P=(0,S.YB)(),Y=o,ve=function(){var q=(0,I.Z)(D().mark(function ee(V,F){var ie,fe;return D().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!(!!v&&!!v.keystore)){y.next=30;break}if(f(!0),Y.indexOf("did:ad3:")>-1&&(Y=(0,a.Zc)(Y)),y.prev=4,i.symbol!=="AD3"){y.next=13;break}return y.next=8,te(g,v==null?void 0:v.keystore,Y,L,V,F);case 8:if(ie=y.sent,!(V&&F)){y.next=11;break}return y.abrupt("return",ie);case 11:y.next=18;break;case 13:return y.next=15,be(i.assetId,i.decimals,g.toString(),v.keystore,Y,L,V,F);case 15:if(fe=y.sent,!(V&&F)){y.next=18;break}return y.abrupt("return",fe);case 18:U.default.success({message:P.formatMessage({id:"wallet.send.pending"}),description:(0,s.jsxs)("p",{children:[P.formatMessage({id:"wallet.send.receiverAddress"}),": ",o]})}),S.m8.push(xe.Z.page.walletPage),f(!1),y.next=28;break;case 23:y.prev=23,y.t0=y.catch(4),U.default.error({key:"chainError",message:y.t0.message||y.t0,duration:null}),le(""),f(!1);case 28:y.next=31;break;case 30:U.default.error({key:"accessDenied",message:P.formatMessage({id:"error.accessDenied"}),duration:null});case 31:case"end":return y.stop()}},ee,null,[[4,23]])}));return function(V,F){return q.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ce,{level:4,children:P.formatMessage({id:"wallet.send.confirm"})}),(0,s.jsxs)("div",{className:n().listBtn,children:[(0,s.jsxs)("div",{className:n().field,children:[(0,s.jsx)("span",{className:n().title,children:P.formatMessage({id:"wallet.send.amount"})}),(0,s.jsx)("span",{className:n().value,children:(0,s.jsx)(ne.Z,{value:(0,h.HM)(g,i.decimals).toString(),symbol:i.symbol,decimals:i.decimals})})]}),(0,s.jsxs)("div",{className:n().field,children:[(0,s.jsx)("span",{className:n().title,children:P.formatMessage({id:"wallet.send.receiverAddress"})}),(0,s.jsx)(Ae.Z,{placement:"topRight",title:o,children:(0,s.jsx)("span",{className:n().value,children:o})})]})]}),(0,s.jsxs)("div",{className:n().buttons,children:[(0,s.jsx)(W.Z,{block:!0,type:"primary",shape:"round",size:"large",className:n().button,loading:b,disabled:!g||!i||!o,onClick:function(){return m(!0)},children:P.formatMessage({id:"common.submit"})}),(0,s.jsx)(W.Z,{block:!0,type:"text",shape:"round",size:"large",className:n().button,onClick:function(){return S.m8.goBack()},loading:b,children:P.formatMessage({id:"common.cancel"})})]}),(0,s.jsx)(Ce.Z,{visable:x,setVisable:m,passphrase:L,setPassphrase:le,func:ve})]})},X=re,je=function(c){var g=c.setStep,i=c.setToken,o=c.tokens,d=(0,C.useState)(""),v=(0,j.Z)(d,2),l=v[0],M=v[1],b=(0,C.useState)([]),f=(0,j.Z)(b,2),r=f[0],_=f[1],x=(0,S.YB)(),m=function(){var u=(0,I.Z)(D().mark(function E(L){return D().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:i(L),g("InputAmount");case 2:case"end":return P.stop()}},E)}));return function(L){return u.apply(this,arguments)}}();return(0,C.useEffect)(function(){(l==null?void 0:l.length)>0?_(o.filter(function(u){return u.symbol.toLowerCase().includes(l.toLowerCase())})):_(o)},[l,o]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:n().searchBar,children:(0,s.jsx)(ae.Z,{autoFocus:!0,size:"large",className:n().searchInput,onChange:function(E){return M(E.target.value)},placeholder:x.formatMessage({id:"wallet.send.searchAsset"})})}),(0,s.jsxs)("div",{className:n().assetsList,children:[(0,s.jsxs)("div",{className:n().title,children:[(0,s.jsx)("span",{children:x.formatMessage({id:"wallet.send.name"})}),(0,s.jsx)("span",{children:x.formatMessage({id:"wallet.send.availableBalance"})})]}),r.map(function(u){return(0,s.jsxs)("div",{className:n().field,onClick:function(){m(u)},children:[(0,s.jsxs)("span",{className:n().title,children:[(0,s.jsx)(se.Z,{className:n().icon,src:(u==null?void 0:u.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,s.jsx)("span",{className:n().name,children:u==null?void 0:u.symbol})]}),(0,s.jsx)("span",{className:n().value,children:(0,s.jsx)(ne.Z,{value:u==null?void 0:u.balance,symbol:u==null?void 0:u.symbol,decimals:u==null?void 0:u.decimals})})]},u.symbol)})]}),(0,s.jsx)(W.Z,{block:!0,type:"default",shape:"round",size:"large",className:n().button,onClick:function(){return g("InputAmount")},style:{marginTop:20},children:x.formatMessage({id:"common.cancel"})})]})},me=je,w=O.Z.Title,De=function(){var c=(0,C.useState)("InputAddress"),g=(0,j.Z)(c,2),i=g[0],o=g[1],d=(0,C.useState)("0"),v=(0,j.Z)(d,2),l=v[0],M=v[1],b=(0,S.tT)("balance"),f=b.balance,r=(0,S.tT)("currentUser"),_=r.wallet,x=(0,S.tT)("assets"),m=x.assetsArr,u=x.getAssets,E=(0,C.useState)([]),L=(0,j.Z)(E,2),le=L[0],P=L[1],Y=(0,C.useState)(),ve=(0,j.Z)(Y,2),q=ve[0],ee=ve[1],V=(0,C.useState)(),F=(0,j.Z)(V,2),ie=F[0],fe=F[1];(0,C.useEffect)(function(){_&&u(_.account)},[u,_]),(0,C.useEffect)(function(){var y=[{icon:"/images/logo-round-core.svg",symbol:"AD3",balance:f.free,decimals:18,assetId:""}];m==null||m.forEach(function(oe){y.push({icon:oe.icon,symbol:oe.symbol,balance:oe.balance,decimals:oe.decimals,assetId:oe.id})}),P(y),ee(y[0])},[m,f]);var Oe=(0,S.YB)();return(0,s.jsx)("div",{className:N().mainContainer,children:(0,s.jsx)("div",{className:N().pageContainer,children:(0,s.jsxs)(z.Z,{className:N().card,children:[(0,s.jsx)("img",{src:"/images/icon/send.svg",className:n().topIcon}),(0,s.jsx)(w,{level:2,style:{fontWeight:"bold"},className:n().title,children:Oe.formatMessage({id:"wallet.send.title"})}),i==="InputAmount"&&(0,s.jsx)(ye,{setStep:o,number:l,setNumber:M,token:q,setToken:ee}),i==="InputAddress"&&(0,s.jsx)(Me,{setStep:o,address:ie,setAddress:fe}),i==="Confirm"&&(0,s.jsx)(X,{number:l,token:q,address:ie}),i==="SelectAsset"&&(0,s.jsx)(me,{setStep:o,setToken:ee,tokens:le})]})})})},Z=De}}]);
