(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[1174],{55133:function(v){v.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(v){v.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},2752:function(v){v.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},8556:function(v){v.exports={scoreContainer:"scoreContainer___1bJza",positive:"positive___p0hU_",negative:"negative___1XWM_"}},28531:function(v){v.exports={tag:"tag___sah2p"}},69764:function(v,M,e){"use strict";var $=e(71194),m=e(50146),g=e(57663),P=e(71577),A=e(402),W=e(3887),p=e(67294),x=e(55133),j=e.n(x),U=e(54549),D=e(85893),H=W.Z.Title,C=function(L){var z=L.visable,G=L.title,S=L.content,B=L.footer,O=L.close,X=L.bodyStyle,l=L.width;return(0,D.jsx)(m.Z,{title:G?(0,D.jsx)(H,{level:5,className:j().title,children:G}):null,closable:!!O,closeIcon:(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(P.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,D.jsx)(U.Z,{onClick:O})})}),className:j().modal,centered:!0,visible:z,width:l!=null?l:650,footer:B,bodyStyle:X,children:S})};M.Z=C},46656:function(v,M,e){"use strict";var $=e(71194),m=e(50146),g=e(47673),P=e(32787),A=e(22385),W=e(31097),p=e(17462),x=e(76772),j=e(57663),U=e(71577),D=e(74379),H=e(38648),C=e(3182),Q=e(2824),L=e(402),z=e(3887),G=e(94043),S=e.n(G),B=e(67294),O=e(43581),X=e(55133),l=e.n(X),ie=e(3548),i=e(68855),oe=e(47832),de=e(43955),ue=e(51625),t=e(85893),J=z.Z.Title,y=function(f){var I=f.visable,w=f.setVisable,a=f.passphrase,N=f.setPassphrase,q=f.func,b=f.changePassphrase,c=f.directSubmit,F=c===void 0?!1:c,ee=(0,O.tT)("apiWs"),ne=(0,O.tT)("currentUser"),s=ne.wallet,le=(0,O.tT)("balance"),ce=le.balance,te=(0,B.useState)(!1),V=(0,Q.Z)(te,2),ae=V[0],Y=V[1],h=(0,B.useState)(),se=(0,Q.Z)(h,2),Z=se[0],re=se[1],R=(0,O.YB)(),_e=function(u){N(u?u.target.value:"")},E=function(){var o=(0,C.Z)(S().mark(function u(){var d,T,n,ve,r;return S().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(Y(!0),s!=null&&s.passphrase&&N(s==null?void 0:s.passphrase),!((!a||a.length<6)&&!(s!=null&&s.passphrase))){_.next=5;break}return Y(!1),_.abrupt("return");case 5:if(d=(s==null?void 0:s.passphrase)||a,!(d&&s!==null&&s!==void 0&&s.keystore)){_.next=16;break}if(T=(0,oe.Gh)(d,s.keystore),T){_.next=13;break}return H.default.error({key:"passphraseError",message:R.formatMessage({id:"error.passphrase.error"}),duration:null}),N(""),Y(!1),_.abrupt("return");case 13:n=new de.ZP({type:"sr25519"}),ve=n.addFromUri(T),r=ve.address,s!=null&&s.account&&s.account!==r&&(localStorage.clear(),sessionStorage.clear(),window.location.href=ue.Z.page.homePage);case 16:if(!q){_.next=25;break}return _.prev=17,_.next=20,q();case 20:_.next=25;break;case 22:_.prev=22,_.t0=_.catch(17),console.log("security modal submit func error fallback",_.t0);case 25:w(!1),Y(!1);case 27:case"end":return _.stop()}},u,null,[[17,22]])}));return function(){return o.apply(this,arguments)}}(),K=function(){var o=(0,C.Z)(S().mark(function u(){var d;return S().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!!ee&&!!s.account)){n.next=11;break}return n.next=3,q(!0,s.account);case 3:if(d=n.sent,!d){n.next=8;break}re(d.partialFee),n.next=11;break;case 8:if(b){n.next=11;break}return n.next=11,E();case 11:case"end":return n.stop()}},u)}));return function(){return o.apply(this,arguments)}}();return(0,B.useEffect)(function(){!!ee&&!!(s!=null&&s.account)&&I&&!F&&K()},[ee,s==null?void 0:s.account,I,F]),(0,B.useEffect)(function(){!!(s!=null&&s.passphrase)&&I&&!b&&N(s==null?void 0:s.passphrase)},[s==null?void 0:s.passphrase,a,I,b]),(0,B.useEffect)(function(){a&&I&&F&&E()},[a,I,F]),(0,t.jsxs)(m.Z,{title:(0,t.jsx)(J,{level:3,children:R.formatMessage({id:"modal.security.title"})}),closable:!1,className:l().modal,centered:!0,visible:I,width:400,footer:(0,t.jsxs)("div",{className:l().buttons,children:[(0,t.jsx)(U.Z,{type:"text",shape:"round",size:"large",className:l().button,onClick:function(){w(!1),window.location.reload()},loading:ae,children:R.formatMessage({id:"common.decline"})}),(0,t.jsx)(U.Z,{type:"primary",shape:"round",size:"large",className:l().button,onClick:function(){E()},disabled:!a||a.length<6,loading:ae,children:R.formatMessage({id:"common.confirm"})})]}),children:[(0,t.jsxs)("div",{className:l().confirmContainer,children:[!!Z&&!!(Z!=null&&Z.toString())>ce.free&&(0,t.jsx)(x.Z,{description:R.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:l().alertContainer}),!!Z&&(0,t.jsxs)("div",{className:l().field,children:[(0,t.jsxs)("div",{className:l().labal,children:[R.formatMessage({id:"modal.security.gas"}),(0,t.jsxs)("span",{className:l().small,children:["(",R.formatMessage({id:"modal.security.estimated"}),")"]}),(0,t.jsx)(W.Z,{placement:"bottom",title:R.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,t.jsx)(i.Z,{className:l().labalIcon})})]}),(0,t.jsx)("div",{className:l().value,children:(0,t.jsx)(ie.Z,{value:Z,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(s!=null&&s.passphrase)||b)&&(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,t.jsxs)("div",{className:l().codeInput,children:[(0,t.jsxs)("div",{className:l().verifyForm,children:[(0,t.jsx)("span",{className:(a==null?void 0:a.slice(0))&&!(a!=null&&a.slice(1,5))&&l().highLight,children:a==null?void 0:a.slice(0,1).replace(/[^]/,"\u2731")}),(0,t.jsx)("span",{className:(a==null?void 0:a.slice(1))&&!(a!=null&&a.slice(2,5))&&l().highLight,children:a==null?void 0:a.slice(1,2).replace(/[^]/,"\u2731")}),(0,t.jsx)("span",{className:(a==null?void 0:a.slice(2,3))&&!(a!=null&&a.slice(3,5))&&l().highLight,children:a==null?void 0:a.slice(2,3).replace(/[^]/,"\u2731")}),(0,t.jsx)("span",{className:(a==null?void 0:a.slice(3,4))&&!(a!=null&&a.slice(4,5))&&l().highLight,children:a==null?void 0:a.slice(3,4).replace(/[^]/,"\u2731")}),(0,t.jsx)("span",{className:(a==null?void 0:a.slice(4,5))&&!(a!=null&&a.slice(5))&&l().highLight,children:a==null?void 0:a.slice(4,5).replace(/[^]/,"\u2731")}),(0,t.jsx)("span",{className:(a==null?void 0:a.slice(5))&&l().highLight,children:a==null?void 0:a.slice(5).replace(/[^]/,"\u2731")})]}),(0,t.jsx)(P.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:l().verifyInput,onChange:_e,value:a,disabled:ae,maxLength:6,visibilityToggle:!1})]})})]})};M.Z=y},3548:function(v,M,e){"use strict";var $=e(67294),m=e(31639),g=e.n(m),P=e(96534),A=e(85893),W=function(x){var j=x.value,U=x.style;return(0,A.jsxs)("div",{className:g().ad3,style:U,children:[j?(0,P.MP)(j):"--",(0,A.jsx)("span",{className:g().unit,children:"\xA0$AD3"})]})};M.Z=W},2324:function(v,M,e){"use strict";e.r(M),e.d(M,{default:function(){return t}});var $=e(28986),m=e(67294),g=e(51615),P=e(57663),A=e(71577),W=e(20228),p=e(11382),x=e(74379),j=e(38648),U=e(3182),D=e(2824),H=e(94043),C=e.n(H),Q=e(69764),L=e(2752),z=e.n(L),G=e(32689),S=e(46656),B=e(61715),O=e(43581),X=e(69854),l=e(11561),ie=e(79762),i=e(85893),oe=function(y){var k=y.onClose,f=y.adId,I=y.nftId,w=y.referrer,a=w===void 0?null:w,N=y.onClaim,q=(0,m.useState)(),b=(0,D.Z)(q,2),c=b[0],F=b[1],ee=(0,m.useState)(!1),ne=(0,D.Z)(ee,2),s=ne[0],le=ne[1],ce=(0,m.useState)(""),te=(0,D.Z)(ce,2),V=te[0],ae=te[1],Y=(0,O.tT)("currentUser"),h=Y.wallet,se=(0,O.tT)("apiWs"),Z=(0,O.YB)(),re=function(){var E=(0,U.Z)(C().mark(function K(){var o;return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,X.Wv)(f);case 2:o=d.sent,F({scores:(o!=null?o:[]).map(function(T){return{tag:T.name,score:-5}})});case 4:case"end":return d.stop()}},K)}));return function(){return E.apply(this,arguments)}}(),R=function(){var E=(0,U.Z)(C().mark(function K(){var o,u,d;return C().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,G.Rh)(f,I,h==null?void 0:h.did);case 3:o=n.sent,u=o.response,d=o.data,u.ok?F(d):re(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0),re();case 13:case"end":return n.stop()}},K,null,[[0,9]])}));return function(){return E.apply(this,arguments)}}();(0,m.useEffect)(function(){se&&R()},[se]);var _e=function(){var E=(0,U.Z)(C().mark(function K(o,u){var d,T,n;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(h!=null&&h.keystore){r.next=3;break}return j.default.error({key:"accessDenied",message:Z.formatMessage({id:"error.accessDenied"}),duration:null}),r.abrupt("return");case 3:if(r.prev=3,n=((d=c.scores)!==null&&d!==void 0?d:[]).map(function(me){return[me.tag,me.score]}),!(c&&c.signature)){r.next=11;break}return r.next=8,(0,B.nm)(f,I,h==null?void 0:h.did,n,c.referer,c.signature,c.signer_account,V,h.keystore,o,u);case 8:T=r.sent,r.next=14;break;case 11:return r.next=13,(0,B.HS)(f,I,n,a,V,h.keystore,o,u);case 13:T=r.sent;case 14:if(!(o&&u)){r.next=16;break}return r.abrupt("return",T);case 16:j.default.success({message:"Claim Token Success"}),N(),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),console.log(r.t0),j.default.error({message:"Claim Ad Token Error",description:"".concat(r.t0)});case 24:case"end":return r.stop()}},K,null,[[3,20]])}));return function(o,u){return E.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q.Z,{visable:!0,title:"Claim your token",content:(0,i.jsx)("div",{className:z().claimInfoContainer,children:(0,i.jsx)(p.Z,{spinning:!c,children:c&&c.scores&&c.scores.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:"Claim now and have your score updated:"}),c.scores.map(function(E){return(0,i.jsxs)("div",{className:z().scoreChange,children:[(0,i.jsx)(l.Z,{tag:E.tag}),(0,i.jsx)(ie.Z,{score:parseInt(E.score,10)})]})}),!c.signature&&(0,i.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!c,onClick:function(){return le(!0)},children:"Claim"})}),close:function(){return k()}}),(0,i.jsx)(S.Z,{visable:s,setVisable:le,passphrase:V,setPassphrase:ae,func:_e})]})},de=oe;function ue(){var J=(0,g.UO)(),y=J.adId,k=J.nftId;return(0,i.jsx)(i.Fragment,{children:y&&k&&(0,i.jsx)(de,{adId:y,nftId:k,onClaim:function(){window.opener.postMessage("".concat($.vs.AD_CLAIMED,":").concat(y),"*"),window.close()},onClose:function(){window.close()}})})}var t=ue},79762:function(v,M,e){"use strict";var $=e(67294),m=e(8556),g=e.n(m),P=e(85893);function A(W){var p=W.score;return(0,P.jsxs)("span",{className:g().scoreContainer,children:[p>=0&&(0,P.jsxs)("span",{className:g().positive,children:["+",p]}),p<0&&(0,P.jsxs)("span",{className:g().negative,children:["-",Math.abs(p)]})]})}M.Z=A},11561:function(v,M,e){"use strict";var $=e(67294),m=e(28531),g=e.n(m),P=e(85893);function A(W){var p=W.tag;return(0,P.jsx)("span",{className:g().tag,children:p})}M.Z=A}}]);
