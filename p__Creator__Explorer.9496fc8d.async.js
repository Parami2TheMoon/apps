(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[8172],{55133:function(Ee){Ee.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},2752:function(Ee){Ee.exports={claimInfoContainer:"claimInfoContainer___2QBl-"}},90802:function(Ee){Ee.exports={dashboard:"dashboard___1yzjn",header:"header___7HFGw",buttons:"buttons____mn0V",button:"button___2bNYM",confirm:"confirm___14R24",topIcon:"topIcon___lcz8T",title:"title___3OHiQ",field:"field___1rYhg",value:"value___VpweH",notUser:"notUser___1H3wh",desc:"desc___3002O",buttonImport:"buttonImport___1UVlX",notSupport:"notSupport___3AII_",icon:"icon___2lOpA",text:"text___2HCAz",loading:"loading___38OsL",loadingTip:"loadingTip___2K2wM",avatar:"avatar___1Itlz",rotate:"rotate___3cdkL",image_blur:"image_blur___1JtdU"}},69764:function(Ee,_e,e){"use strict";var ja=e(71194),Ae=e(50146),ba=e(57663),q=e(71577),Oa=e(402),Ie=e(3887),P=e(67294),Ye=e(55133),_=e.n(Ye),c=e(54549),ce=e(85893),d=Ie.Z.Title,i=function(ee){var Xe=ee.visable,Pe=ee.title,Ce=ee.content,L=ee.footer,ve=ee.close,m=ee.bodyStyle,r=ee.width;return(0,ce.jsx)(Ae.Z,{title:Pe?(0,ce.jsx)(d,{level:5,className:_().title,children:Pe}):null,closable:!!ve,closeIcon:(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)(q.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,ce.jsx)(c.Z,{onClick:ve})})}),className:_().modal,centered:!0,visible:Xe,width:r!=null?r:650,footer:L,bodyStyle:m,children:Ce})};_e.Z=i},46656:function(Ee,_e,e){"use strict";var ja=e(71194),Ae=e(50146),ba=e(47673),q=e(32787),Oa=e(22385),Ie=e(31097),P=e(17462),Ye=e(76772),_=e(57663),c=e(71577),ce=e(74379),d=e(38648),i=e(3182),Je=e(2824),ee=e(402),Xe=e(3887),Pe=e(94043),Ce=e.n(Pe),L=e(67294),ve=e(43581),m=e(55133),r=e.n(m),xe=e(3548),ua=e(68855),ca=e(47832),Qe=e(55347),qe=e(51625),f=e(85893),va=Xe.Z.Title,ma=function(Se){var re=Se.visable,ea=Se.setVisable,s=Se.passphrase,H=Se.setPassphrase,Ue=Se.func,je=Se.changePassphrase,We=(0,ve.tT)("apiWs"),Da=(0,ve.tT)("currentUser"),l=Da.wallet,ke=(0,ve.tT)("balance"),pa=ke.balance,ha=(0,L.useState)(!1),aa=(0,Je.Z)(ha,2),Te=aa[0],a=aa[1],ga=(0,L.useState)(),sa=(0,Je.Z)(ga,2),be=sa[0],ya=sa[1],ne=(0,ve.YB)(),U=function(me){H(me?me.target.value:"")},ta=function(){var le=(0,i.Z)(Ce().mark(function me(){var ie,Re,A,ra,na;return Ce().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(a(!0),l!=null&&l.passphrase&&H(l==null?void 0:l.passphrase),!((!s||s.length<6)&&!(l!=null&&l.passphrase))){V.next=5;break}return a(!1),V.abrupt("return");case 5:if(ie=(l==null?void 0:l.passphrase)||s,!(ie&&l!==null&&l!==void 0&&l.keystore)){V.next=16;break}if(Re=(0,ca.Gh)(ie,l.keystore),Re){V.next=13;break}return d.default.error({key:"passphraseError",message:ne.formatMessage({id:"error.passphrase.error"}),duration:null}),H(""),a(!1),V.abrupt("return");case 13:A=new Qe.ZP({type:"sr25519"}),ra=A.addFromUri(Re),na=ra.address,l!=null&&l.account&&l.account!==na&&(localStorage.clear(),sessionStorage.clear(),window.location.href=qe.Z.page.homePage);case 16:if(!Ue){V.next=19;break}return V.next=19,Ue();case 19:ea(!1),a(!1);case 21:case"end":return V.stop()}},me)}));return function(){return le.apply(this,arguments)}}(),Ke=function(){var le=(0,i.Z)(Ce().mark(function me(){var ie;return Ce().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!(!!We&&!!l.account)){A.next=11;break}return A.next=3,Ue(!0,l.account);case 3:if(ie=A.sent,!ie){A.next=8;break}ya(ie.partialFee),A.next=11;break;case 8:if(je){A.next=11;break}return A.next=11,ta();case 11:case"end":return A.stop()}},me)}));return function(){return le.apply(this,arguments)}}();return(0,L.useEffect)(function(){!!We&&!!(l!=null&&l.account)&&re&&Ke()},[We,l==null?void 0:l.account,re]),(0,L.useEffect)(function(){!!(l!=null&&l.passphrase)&&re&&!je&&H(l==null?void 0:l.passphrase)},[l==null?void 0:l.passphrase,s,re,je]),(0,f.jsxs)(Ae.Z,{title:(0,f.jsx)(va,{level:3,children:ne.formatMessage({id:"modal.security.title"})}),closable:!1,className:r().modal,centered:!0,visible:re,width:400,footer:(0,f.jsxs)("div",{className:r().buttons,children:[(0,f.jsx)(c.Z,{type:"text",shape:"round",size:"large",className:r().button,onClick:function(){ea(!1),window.location.reload()},loading:Te,children:ne.formatMessage({id:"common.decline"})}),(0,f.jsx)(c.Z,{type:"primary",shape:"round",size:"large",className:r().button,onClick:function(){ta()},disabled:!s||s.length<6,loading:Te,children:ne.formatMessage({id:"common.confirm"})})]}),children:[(0,f.jsxs)("div",{className:r().confirmContainer,children:[!!be&&!!(be!=null&&be.toString())>pa.free&&(0,f.jsx)(Ye.Z,{description:ne.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:r().alertContainer}),!!be&&(0,f.jsxs)("div",{className:r().field,children:[(0,f.jsxs)("div",{className:r().labal,children:[ne.formatMessage({id:"modal.security.gas"}),(0,f.jsxs)("span",{className:r().small,children:["(",ne.formatMessage({id:"modal.security.estimated"}),")"]}),(0,f.jsx)(Ie.Z,{placement:"bottom",title:ne.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,f.jsx)(ua.Z,{className:r().labalIcon})})]}),(0,f.jsx)("div",{className:r().value,children:(0,f.jsx)(xe.Z,{value:be,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(l!=null&&l.passphrase)||je)&&(0,f.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,f.jsxs)("div",{className:r().codeInput,children:[(0,f.jsxs)("div",{className:r().verifyForm,children:[(0,f.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&r().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&r().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&r().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&r().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&r().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(5))&&r().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,f.jsx)(q.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:r().verifyInput,onChange:U,value:s,disabled:Te,maxLength:6,visibilityToggle:!1})]})})]})};_e.Z=ma},96870:function(Ee,_e,e){"use strict";e.r(_e),e.d(_e,{default:function(){return Aa}});var ja=e(48736),Ae=e(27049),ba=e(57663),q=e(71577),Oa=e(12968),Ie=e(62462),P=e(3182),Ye=e(74379),_=e(38648),c=e(2824),ce=e(94043),d=e.n(ce),i=e(67294),Je=e(58024),ee=e(39144),Xe=e(34792),Pe=e(48086),Ce=e(55909),L=e.n(Ce),ve=e(37550),m=e.n(ve),r=e(43581),xe=e(28991),ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},ca=ua,Qe=e(27029),qe=function(C,x){return i.createElement(Qe.Z,(0,xe.Z)((0,xe.Z)({},C),{},{ref:x,icon:ca}))};qe.displayName="ShareAltOutlined";var f=i.forwardRef(qe),va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.5 700.7a8 8 0 00-10.3-4.8L840 718.2V180c0-37.6-30.4-68-68-68H252c-37.6 0-68 30.4-68 68v538.2l-61.3-22.3c-.9-.3-1.8-.5-2.7-.5-4.4 0-8 3.6-8 8V763c0 3.3 2.1 6.3 5.3 7.5L501 910.1c7.1 2.6 14.8 2.6 21.9 0l383.8-139.5c3.2-1.2 5.3-4.2 5.3-7.5v-59.6c0-1-.2-1.9-.5-2.8zM512 837.5l-256-93.1V184h512v560.4l-256 93.1zM660.6 312h-54.5c-3 0-5.8 1.7-7.1 4.4l-84.7 168.8H511l-84.7-168.8a8 8 0 00-7.1-4.4h-55.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.8l103.9 191.6h-57c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76v39h-76c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76V704c0 4.4 3.6 8 8 8h49.9c4.4 0 8-3.6 8-8v-63.5h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8h-76.3v-39h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8H564l103.7-191.6c.6-1.2 1-2.5 1-3.8-.1-4.3-3.7-7.9-8.1-7.9z"}}]},name:"money-collect",theme:"outlined"},ma=va,fa=function(C,x){return i.createElement(Qe.Z,(0,xe.Z)((0,xe.Z)({},C),{},{ref:x,icon:ma}))};fa.displayName="MoneyCollectOutlined";var Se=i.forwardRef(fa),re=e(96534),ea=e(20640),s=e.n(ea),H=e(59749),Ue=e(55347),je=e(46656),We=e(47832),Da=e(20228),l=e(11382),ke=e(69764),pa=e(2752),ha=e.n(pa),aa=e(32689),Te=e(61715),a=e(85893),ga=function(C){var x=C.onClose,h=C.adId,G=C.nftId,T=C.onClaim,w=(0,i.useState)(),oe=(0,c.Z)(w,2),o=oe[0],W=oe[1],D=(0,i.useState)(!1),fe=(0,c.Z)(D,2),n=fe[0],pe=fe[1],ae=(0,i.useState)(""),Oe=(0,c.Z)(ae,2),he=Oe[0],Y=Oe[1],se=(0,r.tT)("currentUser"),I=se.wallet,ge=(0,r.YB)(),ye=function(){var F=(0,P.Z)(d().mark(function z(){var k,b,O;return d().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,(0,aa.Rh)(h,G,I==null?void 0:I.did);case 3:k=p.sent,b=k.response,O=k.data,b.ok?W(O):W({}),p.next=13;break;case 9:p.prev=9,p.t0=p.catch(0),console.log(p.t0),W({});case 13:case"end":return p.stop()}},z,null,[[0,9]])}));return function(){return F.apply(this,arguments)}}();(0,i.useEffect)(function(){ye()},[]);var J=function(){var F=(0,P.Z)(d().mark(function z(k,b){var O,X,p;return d().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(I!=null&&I.keystore){g.next=3;break}return _.default.error({key:"accessDenied",message:ge.formatMessage({id:"error.accessDenied"}),duration:null}),g.abrupt("return");case 3:return g.prev=3,X=((O=o.scores)!==null&&O!==void 0?O:[]).map(function(Q){return[Q.tag,Q.score]}),console.log("scores",X),g.next=8,(0,Te.nm)(h,G,I==null?void 0:I.did,X,o.referer,o.signature,o.signer_account,he,I.keystore,k,b);case 8:if(p=g.sent,!(k&&b)){g.next=11;break}return g.abrupt("return",p);case 11:_.default.success({message:"Claim Token Success"}),T(),g.next=19;break;case 15:g.prev=15,g.t0=g.catch(3),console.log(g.t0),_.default.error({message:"Claim Ad Token Error",description:"".concat(g.t0)});case 19:case"end":return g.stop()}},z,null,[[3,15]])}));return function(k,b){return F.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ke.Z,{visable:!0,title:"Claim your token",content:(0,a.jsx)("div",{className:ha().claimInfoContainer,children:(0,a.jsxs)(l.Z,{spinning:!o,children:[o&&!(o!=null&&o.scores)&&(0,a.jsx)(a.Fragment,{children:"The advertiser hasn't assign you any scores. You could still claim your token."}),o&&o.scores&&o.scores.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Claim now and receive the following scores from the advertiser:"}),o.scores.map(function(F){return(0,a.jsx)("p",{children:"".concat(F.score," on ").concat(F.tag)})})]})]})}),footer:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(q.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!(o!=null&&o.signature),onClick:function(){return pe(!0)},children:"Claim"})}),close:function(){return x()}}),(0,a.jsx)(je.Z,{visable:n,setVisable:pe,passphrase:he,setPassphrase:Y,func:J})]})},sa=ga,be=function(C){var x,h=C.ad,G=C.nftId,T=C.asset,w=C.avatar,oe=C.did,o=C.adData,W=C.adImageOnLoad,D=W===void 0?function(){}:W,fe=(0,r.tT)("currentUser"),n=fe.wallet,pe=(0,i.useState)(""),ae=(0,c.Z)(pe,2),Oe=ae[0],he=ae[1],Y=(0,i.useState)(!1),se=(0,c.Z)(Y,2),I=se[0],ge=se[1],ye=(0,i.useState)(""),J=(0,c.Z)(ye,2),F=J[0],z=J[1],k=(0,i.useState)(!1),b=(0,c.Z)(k,2),O=b[0],X=b[1],p=(0,i.useState)(!1),K=(0,c.Z)(p,2),g=K[0],Q=K[1],Me=(0,r.tT)("apiWs"),de=(0,r.YB)(),S=n!=null&&n.did?"".concat(window.location.origin,"/").concat(oe,"/").concat(G,"?referrer=").concat(n==null?void 0:n.did):"".concat(window.location.origin,"/").concat(oe,"/").concat(G),Ma=r.m8.location.query,Fe=Ma,ze=Fe.audience,$e=Fe.scope,Ea=$e!=null?$e:"",Ne=Ea.indexOf("sign")>-1,Ze=function(){var N=(0,P.Z)(d().mark(function R(){var j,E,De,B,He,v,oa,da,Ve;return d().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(!!n&&!!(n!=null&&n.keystore))){$.next=19;break}if(j=Date.now()/1e3|0,E=JSON.stringify({alg:Ne?"SrDSA":"none",typ:"JWT"}),De=JSON.stringify({iss:window.location.origin,sub:n==null?void 0:n.account,aud:ze,iat:j,exp:j+30}),B="".concat((0,H.tH)(E),".").concat((0,H.tH)(De)),Ne){$.next=8;break}return z("".concat(B,".")),$.abrupt("return");case 8:if(He=new Ue.ZP({type:"sr25519"}),v=(0,We.Gh)((n==null?void 0:n.passphrase)||Oe,n==null?void 0:n.keystore),!(v==null||!v)){$.next=13;break}return Pe.default.error(de.formatMessage({id:"error.passphrase.error"})),$.abrupt("return");case 13:oa=He.createFromUri(v),da=oa.sign(B),Ve="".concat(B,".").concat((0,H.tH)(da)),z(Ve),$.next=20;break;case 19:_.default.error({key:"accessDenied",message:de.formatMessage({id:"error.accessDenied"}),duration:null});case 20:case"end":return $.stop()}},R)}));return function(){return N.apply(this,arguments)}}(),la=function(){var N=(0,P.Z)(d().mark(function R(j,E){return d().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(j&&E)){B.next=2;break}return B.abrupt("return");case 2:window.open("".concat(h==null?void 0:h.link,"&nftId=").concat(G,"&did=").concat(n==null?void 0:n.did,"&ad=").concat(o==null?void 0:o.id,"&t=").concat(Date.now(),"&poster=").concat(h==null?void 0:h.poster));case 3:case"end":return B.stop()}},R)}));return function(j,E){return N.apply(this,arguments)}}(),Ca=(0,re.st)(o==null?void 0:o.creator).substring(8);(0,i.useEffect)(function(){!!n&&!!(n!=null&&n.keystore)&&Ze()},[n,n==null?void 0:n.keystore]);var ia=function(){var N=(0,P.Z)(d().mark(function R(j,E,De){var B;return d().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,j.query.ad.payout(E,De);case 2:B=v.sent,B.isEmpty?Q(!1):Q(!0);case 4:case"end":return v.stop()}},R)}));return function(j,E,De){return N.apply(this,arguments)}}();return(0,i.useEffect)(function(){Me&&o!==null&&o!==void 0&&o.id&&n!==null&&n!==void 0&&n.did&&ia(Me,o==null?void 0:o.id,n==null?void 0:n.did)},[Me,o,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:m().container,children:(0,a.jsx)("div",{className:m().topBar,children:(0,a.jsxs)("div",{className:m().sponsored,children:[(0,a.jsx)(Ie.Z,{src:w||"/images/logo-round-core.svg",className:m().avatar,preview:!1,id:"avatar",fallback:"/images/logo-round-core.svg"}),(0,a.jsx)("span",{children:de.formatMessage({id:"creator.explorer.advertisement.sponsoredBy"},{did:"".concat(Ca)})})]})})}),(0,a.jsx)(ee.Z,{className:"".concat(L().card," ").concat(m().adCard),style:{maxWidth:"650px",border:"none",marginBottom:"30px"},bodyStyle:{padding:0,width:"100%"},children:(0,a.jsxs)("div",{className:m().advertisement,children:[(0,a.jsx)("div",{className:m().cover,children:(0,a.jsx)("div",{className:m().adMedia,children:(0,a.jsx)(Ie.Z,{src:h==null?void 0:h.media,placeholder:!0,preview:!1,style:{cursor:"pointer",width:"100%"},className:m().adMediaImg,onClick:function(){Ne?ge(!0):la()},onLoad:D})})}),(h==null?void 0:h.instructions)&&(h==null||(x=h.instructions)===null||x===void 0?void 0:x.length)>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:m().instructions,children:[(0,a.jsx)("div",{className:m().instructionTitle,children:"Follow the instructions to improve your parami score"}),h.instructions.map(function(N){return(0,a.jsx)("div",{className:m().instruction,children:N})})]})})]})}),(0,a.jsxs)("div",{className:m().buttonContainer,children:[g&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(q.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,a.jsx)(f,{}),className:m().shareButton,onClick:(0,P.Z)(d().mark(function N(){var R;return d().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(R={title:"Para Metaverse Identity",text:de.formatMessage({id:"creator.explorer.shareMessage"}),url:S},!(navigator.canShare&&navigator.canShare(R))){E.next=12;break}return E.prev=2,E.next=5,navigator.share(R);case 5:E.next=10;break;case 7:E.prev=7,E.t0=E.catch(2),console.log(E.t0);case 10:E.next=14;break;case 12:s()(S+" ".concat(de.formatMessage({id:"creator.explorer.shareMessage"},{token:"$".concat(T==null?void 0:T.symbol)}))),Pe.default.success(de.formatMessage({id:"common.copied"}));case 14:case"end":return E.stop()}},N,null,[[2,7]])})),children:de.formatMessage({id:"creator.explorer.advertisement.share"},{token:"$".concat(T==null?void 0:T.symbol)})})}),!g&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(q.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,a.jsx)(Se,{}),className:m().claimBtn,onClick:function(){return X(!0)},children:"Claim your $".concat(T==null?void 0:T.symbol)})})]}),O&&(0,a.jsx)(sa,{adId:o==null?void 0:o.id,nftId:G,onClose:function(){return X(!1)},onClaim:function(){X(!1),Q(!0)}}),(0,a.jsx)(je.Z,{visable:I,setVisable:ge,passphrase:Oe,setPassphrase:he,func:la})]})},ya=be,ne=e(90802),U=e.n(ne),ta=e(51615),Ke=e(28943),le=e(51625),me=e(47673),ie=e(32787),Re=e(402),A=e(3887),ra=e(3548),na=A.Z.Title,Ia=function(C){var x=C.nft,h=(0,r.tT)("balance"),G=h.balance,T=(0,r.tT)("currentUser"),w=T.wallet,oe=(0,i.useState)(!1),o=(0,c.Z)(oe,2),W=o[0],D=o[1],fe=(0,i.useState)(!1),n=(0,c.Z)(fe,2),pe=n[0],ae=n[1],Oe=(0,i.useState)("0"),he=(0,c.Z)(Oe,2),Y=he[0],se=he[1],I=(0,i.useState)(""),ge=(0,c.Z)(I,2),ye=ge[0],J=ge[1],F=(0,i.useState)(!1),z=(0,c.Z)(F,2),k=z[0],b=z[1],O=(0,r.YB)(),X=function(){var p=(0,P.Z)(d().mark(function K(g,Q){var Me;return d().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!!w&&!!(w!=null&&w.keystore))){S.next=18;break}return S.prev=1,S.next=4,(0,Ke.MW)(x.tokenAssetId,(0,H.HM)(Y,18).toString(),ye,w==null?void 0:w.keystore,g,Q);case 4:if(Me=S.sent,ae(!1),D(!1),!(g&&Q)){S.next=9;break}return S.abrupt("return",Me);case 9:S.next=16;break;case 11:return S.prev=11,S.t0=S.catch(1),_.default.error({message:S.t0.message||S.t0,duration:null}),D(!1),S.abrupt("return");case 16:S.next=19;break;case 18:_.default.error({key:"accessDenied",message:O.formatMessage({id:"error.accessDenied"}),duration:null});case 19:case"end":return S.stop()}},K,null,[[1,11]])}));return function(g,Q){return p.apply(this,arguments)}}();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.Z,{tip:O.formatMessage({id:"common.submitting"}),spinning:W,wrapperClassName:L().pageContainer,children:[(0,a.jsx)(ee.Z,{className:L().card,bodyStyle:{width:"100%"},children:(0,a.jsxs)("div",{className:m().trade,children:[(0,a.jsx)(na,{level:3,style:{fontWeight:"bold",textAlign:"center"},className:L().title,children:O.formatMessage({id:"creator.explorer.support"})}),(0,a.jsx)(ie.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(m().input," bigInput"),value:Y,onChange:function(K){se(K.target.value)},disabled:W,type:"number"}),(0,a.jsx)(Ae.Z,{}),(0,a.jsx)(q.Z,{block:!0,shape:"round",type:"primary",size:"large",onClick:function(){ae(!0)},children:O.formatMessage({id:"creator.explorer.support"})})]})}),(0,a.jsx)(ke.Z,{visable:pe,title:O.formatMessage({id:"creator.explorer.support"}),content:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:m().tradeModal,children:[(0,a.jsx)(ie.Z,{autoFocus:!0,size:"large",placeholder:O.formatMessage({id:"stake.add.number.placeholder"}),bordered:!1,className:"".concat(m().input," bigInput"),value:Y,onChange:function(K){se(K.target.value)},disabled:W,type:"number"}),(0,a.jsxs)("div",{className:m().field,children:[(0,a.jsx)("span",{className:m().title,children:O.formatMessage({id:"creator.explorer.availableBalance"})}),(0,a.jsx)("span",{className:m().value,children:(0,a.jsx)(ra.Z,{value:G.free})})]})]})}),footer:(0,a.jsx)(q.Z,{block:!0,shape:"round",type:"primary",size:"large",loading:W,disabled:(0,H.HM)(Y,18)<=BigInt(0)||(0,H.HM)(Y,18)>BigInt(G.free),onClick:function(){D(!0),b(!0)},children:O.formatMessage({id:"common.submit"})}),close:function(){ae(!1)}}),(0,a.jsx)(je.Z,{visable:k,setVisable:b,passphrase:ye,setPassphrase:J,func:X})]})})},V=Ia,Pa=e(13580),Za=e(33044),_a=function(){var C,x,h=(0,r.tT)("apiWs"),G=(0,r.tT)("currentUser"),T=G.wallet,w=(0,r.tT)("bodyChange"),oe=w.bodyHeight,o=(0,i.useState)(!0),W=(0,c.Z)(o,2),D=W[0],fe=W[1],n=(0,i.useState)(""),pe=(0,c.Z)(n,2),ae=pe[0],Oe=pe[1],he=(0,i.useState)(!0),Y=(0,c.Z)(he,2),se=Y[0],I=Y[1],ge=(0,i.useState)(),ye=(0,c.Z)(ge,2),J=ye[0],F=ye[1],z=(0,i.useState)(),k=(0,c.Z)(z,2),b=k[0],O=k[1],X=(0,i.useState)(),p=(0,c.Z)(X,2),K=p[0],g=p[1],Q=(0,i.useState)(!1),Me=(0,c.Z)(Q,2),de=Me[0],S=Me[1],Ma=(0,i.useState)(),Fe=(0,c.Z)(Ma,2),ze=Fe[0],$e=Fe[1],Ea=(0,i.useState)(),Ne=(0,c.Z)(Ea,2),Ze=Ne[0],la=Ne[1],Ca=(0,i.useState)(null),ia=(0,c.Z)(Ca,2),N=ia[0],R=ia[1],j=(0,r.YB)(),E=(0,r.md)(),De=(C=document.getElementById("avatar"))===null||C===void 0?void 0:C.offsetTop,B=(x=document.getElementById("avatar"))===null||x===void 0?void 0:x.offsetLeft,He=document.body.clientWidth,v=(0,ta.UO)(),oa=r.m8.location.query,da=oa,Ve=da.referrer,Be=v!=null&&v.kol?"did"+(v==null?void 0:v.kol):(0,re.st)(T.did),$=(0,re.Zc)(Be),Ge=function(M){_.default.error({message:M.message,duration:null})},xa=function(){var y=(0,P.Z)(d().mark(function M(){var u;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Te.qX)(v.nftID);case 2:if(u=t.sent,u){t.next=6;break}return r.m8.replace("".concat(window.location.pathname,"/dao")),t.abrupt("return");case 6:$e(u);case 7:case"end":return t.stop()}},M)}));return function(){return y.apply(this,arguments)}}(),Ta=function(){var y=(0,P.Z)(d().mark(function M(u){var Z,t,Sa,ue,Le;return d().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!((u==null||(Z=u.metadata)===null||Z===void 0?void 0:Z.indexOf("ipfs://"))<0)){te.next=2;break}return te.abrupt("return");case 2:return Sa=u==null||(t=u.metadata)===null||t===void 0?void 0:t.substring(7),te.next=5,fetch(le.Z.ipfs.endpoint+Sa);case 5:return ue=te.sent,te.next=8,ue.json();case 8:if(Le=te.sent,Le){te.next=11;break}return te.abrupt("return");case 11:Le.link=Le.link+"?kol="+(0,re.Zc)(Be),Ve&&(Le.link+="&referrer="+Ve),R(Le);case 15:case"end":return te.stop()}},M)}));return function(u){return y.apply(this,arguments)}}();(0,i.useEffect)(function(){if(ze)try{var y=ze.ad;if(!(y!=null&&y.metadata))return;la(y),Ta(y)}catch(M){Ge(M)}},[ze]);var Na=function(){var y=(0,P.Z)(d().mark(function M(){var u;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Ke.JI)($);case 3:if(u=t.sent,!u.isEmpty){t.next=7;break}return I(!1),t.abrupt("return");case 7:window.location.href="".concat(window.location.origin,"/").concat(Be,"/").concat(u),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),_.default.error({message:t.t0.message,duration:null}),t.abrupt("return");case 14:case"end":return t.stop()}},M,null,[[0,10]])}));return function(){return y.apply(this,arguments)}}(),Ba=function(){var y=(0,P.Z)(d().mark(function M(){var u;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Za.q5)($);case 2:if(u=t.sent,u){t.next=7;break}return _.default.error({message:j.formatMessage({id:"error.identity.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 7:F(u);case 9:case"end":return t.stop()}},M)}));return function(){return y.apply(this,arguments)}}(),La=function(){var y=(0,P.Z)(d().mark(function M(){return d().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return fe(!1),Z.abrupt("return");case 2:case"end":return Z.stop()}},M)}));return function(){return y.apply(this,arguments)}}();(0,i.useEffect)(function(){J&&(document.title="".concat((J==null?void 0:J.nickname.toString())||Be," - Para Metaverse Identity"),La().catch(Ge))},[J]);var Ua=function(){var y=(0,P.Z)(d().mark(function M(){var u;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ke.X6)(v==null?void 0:v.nftID);case 2:if(u=t.sent,u){t.next=7;break}return _.default.error({message:j.formatMessage({id:"error.nft.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 7:if((u==null?void 0:u.owner)===$){t.next=11;break}return _.default.error({message:j.formatMessage({id:"error.nft.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 11:O(u);case 12:case"end":return t.stop()}},M)}));return function(){return y.apply(this,arguments)}}();return(0,i.useEffect)(function(){var y=function(){var M=(0,P.Z)(d().mark(function u(){var Z,t;return d().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,Pa.Ay)(b==null?void 0:b.tokenAssetId);case 2:if(Z=ue.sent,!Z.isEmpty){ue.next=6;break}return I(!1),ue.abrupt("return");case 6:t=Z.toHuman(),g(t);case 8:case"end":return ue.stop()}},u)}));return function(){return M.apply(this,arguments)}}();if(b)try{y()}catch(M){Ge(M)}},[b]),(0,i.useEffect)(function(){K&&xa().catch(Ge)},[K]),(0,i.useEffect)(function(){if(h&&!(v!=null&&v.nftID)&&Na(),E.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),S(!0)),h)try{Ua(),Ba()}catch(y){Ge(y)}},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:L().mainTopContainer,children:[se&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ie.Z,{src:ae||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:U().avatar,style:{top:D?(oe-400)/2:De,left:D?(He-200)/2:B,width:D?200:30,height:D?200:30,animation:D?1:0,position:D?"fixed":"absolute",display:D||Ze&&Object.keys(Ze).length?"flex":"none"},preview:!1}),(0,a.jsx)("div",{className:U().loading,style:{opacity:D?1:0,zIndex:D?15:-1,height:oe,minHeight:"100vh"},children:(0,a.jsx)("span",{className:U().loadingTip,children:j.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,a.jsx)("br",{})})})})]}),!se&&E.canWalletUser&&b&&(0,a.jsx)("div",{className:L().pageContainer,style:{paddingTop:50,maxWidth:1920},children:(0,a.jsx)(V,{nft:b})}),se&&Ze&&Object.keys(Ze).length>0&&(0,a.jsx)("div",{className:L().pageContainer,style:{paddingTop:50,maxWidth:"100%",backgroundColor:"rgba(244,245,246,1)"},children:(0,a.jsx)(ya,{ad:N,nftId:v==null?void 0:v.nftID,asset:K,avatar:ae,did:Be,adData:Ze,adImageOnLoad:function(){fe(!1)}})})]}),(0,a.jsx)(ke.Z,{visable:de,title:j.formatMessage({id:"error.identity.notUser"}),content:(0,a.jsx)("div",{className:U().notUser,children:(0,a.jsxs)("div",{className:U().buttons,children:[(0,a.jsxs)(q.Z,{block:!0,size:"large",type:"primary",shape:"round",className:U().button,onClick:function(){r.m8.push(le.Z.page.createPage)},children:[(0,a.jsx)("div",{className:U().title,children:j.formatMessage({id:"index.createAccount"})}),(0,a.jsx)("span",{className:U().desc,children:j.formatMessage({id:"index.createAccount.desc"})})]}),(0,a.jsx)(Ae.Z,{children:j.formatMessage({id:"index.or"})}),(0,a.jsxs)(q.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(U().button," ").concat(U().buttonImport),onClick:function(){r.m8.push(le.Z.page.recoverPage)},children:[(0,a.jsx)("div",{className:U().title,children:j.formatMessage({id:"index.importAccount"})}),(0,a.jsx)("span",{className:U().desc,children:j.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})},Aa=_a}}]);
