(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[8172],{2752:function(pe){pe.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},37550:function(pe){pe.exports={advertisementContainer:"advertisementContainer___1wSir",adCard:"adCard____7cNV",advertisement:"advertisement___2lhSh",adMedia:"adMedia___2M9lZ",adMediaImg:"adMediaImg___2AnuR",daoCardContent:"daoCardContent___2-Fqi",countDown:"countDown____U0R1",instructions:"instructions___1QVJw",instructionTitle:"instructionTitle___38fjC",instruction:"instruction___3tN9q",withLink:"withLink___2pB4H",instructionText:"instructionText___3wRr2",buttonContainer:"buttonContainer___weR9U",share:"share___3Z4qi",shareButton:"shareButton___1xnZm",userCard:"userCard___21hkC",user:"user___2_ahS",avatar:"avatar___3D1E2",info:"info___1TvVx",did:"did___2l6RX",assetsData:"assetsData___2HKpN",trade:"trade___28ESA",pairCoins:"pairCoins___2MPU-",pairCoinsItem:"pairCoinsItem___9HsfO",pairCoinsSelect:"pairCoinsSelect___3n7mZ",pairCoin:"pairCoin___dCpAR",pairCoinsItemIcon:"pairCoinsItemIcon___3QVpA",pairCoinsItemLabel:"pairCoinsItemLabel___3lpAy",pairCoinsItemInput:"pairCoinsItemInput___3AU_-",pairCoinsBalance:"pairCoinsBalance___q965W",balance:"balance___3vofh",maxButton:"maxButton___2smdF",pairCoinsSwitchButton:"pairCoinsSwitchButton___OiJlN",pairCoinsFlat:"pairCoinsFlat___qvkXZ",submitButton:"submitButton___3CDz3",tradeModal:"tradeModal___zsFM5",input:"input___hw-Kw",field:"field___2IvJY",title:"title___1o7rE",value:"value___2ivq-",container:"container___3S--u",topBar:"topBar___1Bs-Q",sponsored:"sponsored___1GAt0",cover:"cover___3ydoR",fingerHandle:"fingerHandle___3BuFQ"}},90802:function(pe){pe.exports={explorerContainer:"explorerContainer___2tn58",dashboard:"dashboard___1yzjn",header:"header___7HFGw",buttons:"buttons____mn0V",button:"button___2bNYM",confirm:"confirm___14R24",topIcon:"topIcon___lcz8T",title:"title___3OHiQ",field:"field___1rYhg",value:"value___VpweH",notUser:"notUser___1H3wh",desc:"desc___3002O",buttonImport:"buttonImport___1UVlX",notSupport:"notSupport___3AII_",icon:"icon___2lOpA",text:"text___2HCAz",loading:"loading___38OsL",loadingTip:"loadingTip___2K2wM",avatar:"avatar___1Itlz",rotate:"rotate___3cdkL",image_blur:"image_blur___1JtdU"}},46656:function(pe,Ne,a){"use strict";var ma=a(71194),Te=a(50146),fa=a(47673),se=a(32787),pa=a(22385),Ee=a(31097),k=a(17462),ta=a(76772),F=a(57663),M=a(71577),na=a(74379),m=a(38648),o=a(3182),ze=a(2824),la=a(402),ia=a(3887),Be=a(94043),he=a.n(Be),K=a(67294),ge=a(43581),f=a(55133),l=a.n(f),ye=a(3548),$e=a(68855),He=a(47832),ke=a(55347),Le=a(51625),p=a(85893),Ve=ia.Z.Title,Ge=function(de){var V=de.visable,Ue=de.setVisable,s=de.passphrase,Ce=de.setPassphrase,Me=de.func,ue=de.changePassphrase,be=(0,ge.tT)("apiWs"),We=(0,ge.tT)("currentUser"),n=We.wallet,we=(0,ge.tT)("balance"),Ie=we.balance,Re=(0,K.useState)(!1),Ze=(0,ze.Z)(Re,2),Se=Ze[0],e=Ze[1],Ye=(0,K.useState)(),Fe=(0,ze.Z)(Ye,2),z=Fe[0],Qe=Fe[1],G=(0,ge.YB)(),Xe=function(re){Ce(re?re.target.value:"")},x=function(){var J=(0,o.Z)(he().mark(function re(){var Y,Oe,P,je,Ke;return he().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(e(!0),n!=null&&n.passphrase&&Ce(n==null?void 0:n.passphrase),!((!s||s.length<6)&&!(n!=null&&n.passphrase))){w.next=5;break}return e(!1),w.abrupt("return");case 5:if(Y=(n==null?void 0:n.passphrase)||s,!(Y&&n!==null&&n!==void 0&&n.keystore)){w.next=16;break}if(Oe=(0,He.Gh)(Y,n.keystore),Oe){w.next=13;break}return m.default.error({key:"passphraseError",message:G.formatMessage({id:"error.passphrase.error"}),duration:null}),Ce(""),e(!1),w.abrupt("return");case 13:P=new ke.ZP({type:"sr25519"}),je=P.addFromUri(Oe),Ke=je.address,n!=null&&n.account&&n.account!==Ke&&(localStorage.clear(),sessionStorage.clear(),window.location.href=Le.Z.page.homePage);case 16:if(!Me){w.next=19;break}return w.next=19,Me();case 19:Ue(!1),e(!1);case 21:case"end":return w.stop()}},re)}));return function(){return J.apply(this,arguments)}}(),qe=function(){var J=(0,o.Z)(he().mark(function re(){var Y;return he().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(!!be&&!!n.account)){P.next=11;break}return P.next=3,Me(!0,n.account);case 3:if(Y=P.sent,!Y){P.next=8;break}Qe(Y.partialFee),P.next=11;break;case 8:if(ue){P.next=11;break}return P.next=11,x();case 11:case"end":return P.stop()}},re)}));return function(){return J.apply(this,arguments)}}();return(0,K.useEffect)(function(){!!be&&!!(n!=null&&n.account)&&V&&qe()},[be,n==null?void 0:n.account,V]),(0,K.useEffect)(function(){!!(n!=null&&n.passphrase)&&V&&!ue&&Ce(n==null?void 0:n.passphrase)},[n==null?void 0:n.passphrase,s,V,ue]),(0,p.jsxs)(Te.Z,{title:(0,p.jsx)(Ve,{level:3,children:G.formatMessage({id:"modal.security.title"})}),closable:!1,className:l().modal,centered:!0,visible:V,width:400,footer:(0,p.jsxs)("div",{className:l().buttons,children:[(0,p.jsx)(M.Z,{type:"text",shape:"round",size:"large",className:l().button,onClick:function(){Ue(!1),window.location.reload()},loading:Se,children:G.formatMessage({id:"common.decline"})}),(0,p.jsx)(M.Z,{type:"primary",shape:"round",size:"large",className:l().button,onClick:function(){x()},disabled:!s||s.length<6,loading:Se,children:G.formatMessage({id:"common.confirm"})})]}),children:[(0,p.jsxs)("div",{className:l().confirmContainer,children:[!!z&&!!(z!=null&&z.toString())>Ie.free&&(0,p.jsx)(ta.Z,{description:G.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:l().alertContainer}),!!z&&(0,p.jsxs)("div",{className:l().field,children:[(0,p.jsxs)("div",{className:l().labal,children:[G.formatMessage({id:"modal.security.gas"}),(0,p.jsxs)("span",{className:l().small,children:["(",G.formatMessage({id:"modal.security.estimated"}),")"]}),(0,p.jsx)(Ee.Z,{placement:"bottom",title:G.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,p.jsx)($e.Z,{className:l().labalIcon})})]}),(0,p.jsx)("div",{className:l().value,children:(0,p.jsx)(ye.Z,{value:z,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(n!=null&&n.passphrase)||ue)&&(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,p.jsxs)("div",{className:l().codeInput,children:[(0,p.jsxs)("div",{className:l().verifyForm,children:[(0,p.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&l().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&l().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&l().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&l().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,p.jsx)("span",{className:(s==null?void 0:s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,p.jsx)(se.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:l().verifyInput,onChange:Xe,value:s,disabled:Se,maxLength:6,visibilityToggle:!1})]})})]})};Ne.Z=Ge},96870:function(pe,Ne,a){"use strict";a.r(Ne),a.d(Ne,{default:function(){return Sa}});var ma=a(48736),Te=a(27049),fa=a(57663),se=a(71577),pa=a(12968),Ee=a(62462),k=a(3182),ta=a(74379),F=a(38648),M=a(2824),na=a(94043),m=a.n(na),o=a(67294),ze=a(34792),la=a(48086),ia=a(58024),Be=a(39144),he=a(55909),K=a.n(he),ge=a(37550),f=a.n(ge),l=a(43581),ye=a(28991),$e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},He=$e,ke=a(27029),Le=function(y,N){return o.createElement(ke.Z,(0,ye.Z)((0,ye.Z)({},y),{},{ref:N,icon:He}))};Le.displayName="ShareAltOutlined";var p=o.forwardRef(Le),Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.5 700.7a8 8 0 00-10.3-4.8L840 718.2V180c0-37.6-30.4-68-68-68H252c-37.6 0-68 30.4-68 68v538.2l-61.3-22.3c-.9-.3-1.8-.5-2.7-.5-4.4 0-8 3.6-8 8V763c0 3.3 2.1 6.3 5.3 7.5L501 910.1c7.1 2.6 14.8 2.6 21.9 0l383.8-139.5c3.2-1.2 5.3-4.2 5.3-7.5v-59.6c0-1-.2-1.9-.5-2.8zM512 837.5l-256-93.1V184h512v560.4l-256 93.1zM660.6 312h-54.5c-3 0-5.8 1.7-7.1 4.4l-84.7 168.8H511l-84.7-168.8a8 8 0 00-7.1-4.4h-55.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.8l103.9 191.6h-57c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76v39h-76c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76V704c0 4.4 3.6 8 8 8h49.9c4.4 0 8-3.6 8-8v-63.5h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8h-76.3v-39h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8H564l103.7-191.6c.6-1.2 1-2.5 1-3.8-.1-4.3-3.7-7.9-8.1-7.9z"}}]},name:"money-collect",theme:"outlined"},Ge=Ve,Je=function(y,N){return o.createElement(ke.Z,(0,ye.Z)((0,ye.Z)({},y),{},{ref:N,icon:Ge}))};Je.displayName="MoneyCollectOutlined";var de=o.forwardRef(Je),V=a(96534),Ue=a(20640),s=a.n(Ue),Ce=a(20228),Me=a(11382),ue=a(69764),be=a(2752),We=a.n(be),n=a(32689),we=a(46656),Ie=a(61715),Re=a(69854),Ze=a(11561),Se=a(79762),e=a(85893),Ye=function(y){var N=y.onClose,S=y.adId,L=y.nftId,te=y.referrer,j=te===void 0?null:te,ce=y.onClaim,ne=(0,o.useState)(),v=(0,M.Z)(ne,2),u=v[0],Q=v[1],ve=(0,o.useState)(!1),C=(0,M.Z)(ve,2),X=C[0],me=C[1],fe=(0,o.useState)(""),T=(0,M.Z)(fe,2),R=T[0],le=T[1],ie=(0,l.tT)("currentUser"),_=ie.wallet,U=(0,l.YB)(),$=function(){var B=(0,k.Z)(m().mark(function Z(){var i,E,b,d,O;return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,Re.Wv)(S);case 3:i=r.sent,console.log(i),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.log(r.t0);case 10:return r.prev=10,r.next=13,(0,n.Rh)(S,L,_==null?void 0:_.did);case 13:if(E=r.sent,b=E.response,d=E.data,!b.ok){r.next=20;break}Q(d),r.next=24;break;case 20:return r.next=22,(0,Re.Wv)(S);case 22:O=r.sent,Q({scores:(O!=null?O:[]).map(function(W){return{tag:W.name,score:-5}})});case 24:r.next=30;break;case 26:r.prev=26,r.t1=r.catch(10),console.log(r.t1),Q({});case 30:case"end":return r.stop()}},Z,null,[[0,7],[10,26]])}));return function(){return B.apply(this,arguments)}}();(0,o.useEffect)(function(){$()},[]);var oe=function(){var B=(0,k.Z)(m().mark(function Z(i,E){var b,d,O;return m().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(_!=null&&_.keystore){r.next=3;break}return F.default.error({key:"accessDenied",message:U.formatMessage({id:"error.accessDenied"}),duration:null}),r.abrupt("return");case 3:if(r.prev=3,O=((b=u.scores)!==null&&b!==void 0?b:[]).map(function(W){return[W.tag,W.score]}),!(u&&u.signature)){r.next=11;break}return r.next=8,(0,Ie.nm)(S,L,_==null?void 0:_.did,O,u.referer,u.signature,u.signer_account,R,_.keystore,i,E);case 8:d=r.sent,r.next=14;break;case 11:return r.next=13,(0,Ie.HS)(S,L,O,j,R,_.keystore,i,E);case 13:d=r.sent;case 14:if(!(i&&E)){r.next=16;break}return r.abrupt("return",d);case 16:F.default.success({message:"Claim Token Success"}),ce(),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),console.log(r.t0),F.default.error({message:"Claim Ad Token Error",description:"".concat(r.t0)});case 24:case"end":return r.stop()}},Z,null,[[3,20]])}));return function(i,E){return B.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ue.Z,{visable:!0,title:"Claim your token",content:(0,e.jsx)("div",{className:We().claimInfoContainer,children:(0,e.jsx)(Me.Z,{spinning:!u,children:u&&u.scores&&u.scores.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{children:"Claim now and have your score updated:"}),u.scores.map(function(B){return(0,e.jsxs)("div",{className:We().scoreChange,children:[(0,e.jsx)(Ze.Z,{tag:B.tag}),(0,e.jsx)(Se.Z,{score:parseInt(B.score,10)})]})}),!u.signature&&(0,e.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!u,onClick:function(){return me(!0)},children:"Claim"})}),close:function(){return N()}}),(0,e.jsx)(we.Z,{visable:X,setVisable:me,passphrase:R,setPassphrase:le,func:oe})]})},Fe=Ye,z=a(51625),Qe=function(y){var N,S=y.ad,L=y.nftId,te=y.referrer,j=y.asset,ce=y.avatar,ne=y.did,v=y.adData,u=y.adImageOnLoad,Q=u===void 0?function(){}:u,ve=(0,l.tT)("currentUser"),C=ve.wallet,X=(0,o.useState)(!1),me=(0,M.Z)(X,2),fe=me[0],T=me[1],R=(0,o.useState)(!1),le=(0,M.Z)(R,2),ie=le[0],_=le[1],U=(0,l.tT)("apiWs"),$=(0,l.YB)(),oe=C!=null&&C.did?"".concat(window.location.origin,"/").concat(ne,"/").concat(L,"?referrer=").concat(C==null?void 0:C.did):"".concat(window.location.origin,"/").concat(ne,"/").concat(L),B=(0,V.st)(v==null?void 0:v.creator).substring(8),Z=function(){var i=(0,k.Z)(m().mark(function E(b,d,O){var q;return m().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,b.query.ad.payout(d,O);case 2:q=W.sent,q.isEmpty?_(!1):_(!0);case 4:case"end":return W.stop()}},E)}));return function(b,d,O){return i.apply(this,arguments)}}();return(0,o.useEffect)(function(){U&&v!==null&&v!==void 0&&v.id&&C!==null&&C!==void 0&&C.did&&Z(U,v==null?void 0:v.id,C==null?void 0:C.did)},[U,v,C]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:f().advertisementContainer,children:[(0,e.jsx)("div",{className:f().container,children:(0,e.jsx)("div",{className:f().topBar,children:(0,e.jsxs)("div",{className:f().sponsored,children:[(0,e.jsx)(Ee.Z,{src:ce||"/images/logo-round-core.svg",className:f().avatar,preview:!1,id:"avatar",fallback:"/images/logo-round-core.svg"}),(0,e.jsx)("span",{children:$.formatMessage({id:"creator.explorer.advertisement.sponsoredBy"},{did:"".concat(B)})})]})})}),(0,e.jsx)(Be.Z,{className:"".concat(K().card," ").concat(f().adCard),style:{maxWidth:"650px",border:"none",marginBottom:"30px"},bodyStyle:{padding:0,width:"100%"},children:(0,e.jsxs)("div",{className:f().advertisement,children:[(0,e.jsx)("div",{className:f().adMedia,children:(0,e.jsx)(Ee.Z,{src:S==null?void 0:S.media,placeholder:!0,preview:!1,className:f().adMediaImg,onLoad:Q})}),(S==null?void 0:S.instructions)&&(S==null||(N=S.instructions)===null||N===void 0?void 0:N.length)>0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:f().instructions,children:[(0,e.jsx)("div",{className:f().instructionTitle,children:"Follow the instructions to improve your parami score"}),S.instructions.map(function(i){return(0,e.jsxs)("div",{className:"".concat(f().instruction," ").concat(i.link?f().withLink:""),onClick:function(){!!i.link&&window.open("".concat(z.Z.main.weeklySite,"?redirect=").concat(i.link,"&nftId=").concat(L,"&did=").concat(C==null?void 0:C.did,"&ad=").concat(v==null?void 0:v.id,"&referrer=").concat(te,"&tag=").concat(i.tag,"&score=").concat(i.score))},children:[(0,e.jsx)("span",{className:f().instructionText,children:i.text}),!!i.tag&&(0,e.jsx)(Ze.Z,{tag:i.tag}),!!i.score&&(0,e.jsx)(Se.Z,{score:parseInt(i.score,10)})]})})]})})]})}),(0,e.jsxs)("div",{className:f().buttonContainer,children:[ie&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,e.jsx)(p,{}),className:f().shareButton,onClick:(0,k.Z)(m().mark(function i(){var E;return m().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(E={title:"Para Metaverse Identity",text:$.formatMessage({id:"creator.explorer.shareMessage"}),url:oe},!(navigator.canShare&&navigator.canShare(E))){d.next=12;break}return d.prev=2,d.next=5,navigator.share(E);case 5:d.next=10;break;case 7:d.prev=7,d.t0=d.catch(2),console.log(d.t0);case 10:d.next=14;break;case 12:s()(oe+" ".concat($.formatMessage({id:"creator.explorer.shareMessage"},{token:"$".concat(j==null?void 0:j.symbol)}))),la.default.success($.formatMessage({id:"common.copied"}));case 14:case"end":return d.stop()}},i,null,[[2,7]])})),children:$.formatMessage({id:"creator.explorer.advertisement.share"},{token:"$".concat(j==null?void 0:j.symbol)})})}),!ie&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,e.jsx)(de,{}),className:f().claimBtn,onClick:function(){return T(!0)},children:"Claim your $".concat(j==null?void 0:j.symbol)})})]}),fe&&(0,e.jsx)(Fe,{adId:v==null?void 0:v.id,nftId:L,referrer:te,onClose:function(){return T(!1)},onClaim:function(){T(!1),_(!0)}})]})})},G=Qe,Xe=a(90802),x=a.n(Xe),qe=a(51615),J=a(28943),re=a(47673),Y=a(32787),Oe=a(402),P=a(3887),je=a(59749),Ke=a(3548),oa=P.Z.Title,w=function(y){var N=y.nft,S=(0,l.tT)("balance"),L=S.balance,te=(0,l.tT)("currentUser"),j=te.wallet,ce=(0,o.useState)(!1),ne=(0,M.Z)(ce,2),v=ne[0],u=ne[1],Q=(0,o.useState)(!1),ve=(0,M.Z)(Q,2),C=ve[0],X=ve[1],me=(0,o.useState)("0"),fe=(0,M.Z)(me,2),T=fe[0],R=fe[1],le=(0,o.useState)(""),ie=(0,M.Z)(le,2),_=ie[0],U=ie[1],$=(0,o.useState)(!1),oe=(0,M.Z)($,2),B=oe[0],Z=oe[1],i=(0,l.YB)(),E=function(){var b=(0,k.Z)(m().mark(function d(O,q){var r;return m().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(!!j&&!!(j!=null&&j.keystore))){I.next=18;break}return I.prev=1,I.next=4,(0,J.MW)(N.tokenAssetId,(0,je.HM)(T,18).toString(),_,j==null?void 0:j.keystore,O,q);case 4:if(r=I.sent,X(!1),u(!1),!(O&&q)){I.next=9;break}return I.abrupt("return",r);case 9:I.next=16;break;case 11:return I.prev=11,I.t0=I.catch(1),F.default.error({message:I.t0.message||I.t0,duration:null}),u(!1),I.abrupt("return");case 16:I.next=19;break;case 18:F.default.error({key:"accessDenied",message:i.formatMessage({id:"error.accessDenied"}),duration:null});case 19:case"end":return I.stop()}},d,null,[[1,11]])}));return function(O,q){return b.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Me.Z,{tip:i.formatMessage({id:"common.submitting"}),spinning:v,wrapperClassName:K().pageContainer,children:[(0,e.jsx)(Be.Z,{className:K().card,bodyStyle:{width:"100%"},children:(0,e.jsxs)("div",{className:f().trade,children:[(0,e.jsx)(oa,{level:3,style:{fontWeight:"bold",textAlign:"center"},className:K().title,children:i.formatMessage({id:"creator.explorer.support"})}),(0,e.jsx)(Y.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(f().input," bigInput"),value:T,onChange:function(d){R(d.target.value)},disabled:v,type:"number"}),(0,e.jsx)(Te.Z,{}),(0,e.jsx)(se.Z,{block:!0,shape:"round",type:"primary",size:"large",onClick:function(){X(!0)},children:i.formatMessage({id:"creator.explorer.support"})})]})}),(0,e.jsx)(ue.Z,{visable:C,title:i.formatMessage({id:"creator.explorer.support"}),content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:f().tradeModal,children:[(0,e.jsx)(Y.Z,{autoFocus:!0,size:"large",placeholder:i.formatMessage({id:"stake.add.number.placeholder"}),bordered:!1,className:"".concat(f().input," bigInput"),value:T,onChange:function(d){R(d.target.value)},disabled:v,type:"number"}),(0,e.jsxs)("div",{className:f().field,children:[(0,e.jsx)("span",{className:f().title,children:i.formatMessage({id:"creator.explorer.availableBalance"})}),(0,e.jsx)("span",{className:f().value,children:(0,e.jsx)(Ke.Z,{value:L.free})})]})]})}),footer:(0,e.jsx)(se.Z,{block:!0,shape:"round",type:"primary",size:"large",loading:v,disabled:(0,je.HM)(T,18)<=BigInt(0)||(0,je.HM)(T,18)>BigInt(L.free),onClick:function(){u(!0),Z(!0)},children:i.formatMessage({id:"common.submit"})}),close:function(){X(!1)}}),(0,e.jsx)(we.Z,{visable:B,setVisable:Z,passphrase:_,setPassphrase:U,func:E})]})})},ha=w,ga=a(13580),ya=a(33044),Ca=a(29791),Ma=function(){var y,N,S=(0,l.tT)("apiWs"),L=(0,l.tT)("currentUser"),te=L.wallet,j=(0,l.tT)("bodyChange"),ce=j.bodyHeight,ne=(0,o.useState)(!0),v=(0,M.Z)(ne,2),u=v[0],Q=v[1],ve=(0,o.useState)(""),C=(0,M.Z)(ve,2),X=C[0],me=C[1],fe=(0,o.useState)(!0),T=(0,M.Z)(fe,2),R=T[0],le=T[1],ie=(0,o.useState)(),_=(0,M.Z)(ie,2),U=_[0],$=_[1],oe=(0,o.useState)(),B=(0,M.Z)(oe,2),Z=B[0],i=B[1],E=(0,o.useState)(),b=(0,M.Z)(E,2),d=b[0],O=b[1],q=(0,o.useState)(!1),r=(0,M.Z)(q,2),W=r[0],I=r[1],ja=(0,o.useState)(),da=(0,M.Z)(ja,2),ea=da[0],_a=da[1],Ea=(0,o.useState)(),ua=(0,M.Z)(Ea,2),De=ua[0],ba=ua[1],Ia=(0,o.useState)(null),ca=(0,M.Z)(Ia,2),Za=ca[0],Oa=ca[1],ee=(0,l.YB)(),va=(0,l.md)(),xa=(y=document.getElementById("avatar"))===null||y===void 0?void 0:y.offsetTop,Da=(N=document.getElementById("avatar"))===null||N===void 0?void 0:N.offsetLeft,Aa=document.body.clientWidth,D=(0,qe.UO)(),Pa=l.m8.location.query,Na=Pa,aa=Na.referrer,Ae=D!=null&&D.kol?"did"+(D==null?void 0:D.kol):(0,V.st)(te.did),sa=(0,V.Zc)(Ae),Pe=function(g){F.default.error({message:g.message,duration:null})},Ta=function(){var h=(0,k.Z)(m().mark(function g(){var c;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ie.qX)(D.nftID);case 2:if(c=t.sent,c){t.next=6;break}return l.m8.replace("".concat(window.location.pathname,"/dao")),t.abrupt("return");case 6:_a(c);case 7:case"end":return t.stop()}},g)}));return function(){return h.apply(this,arguments)}}(),Ba=function(){var h=(0,k.Z)(m().mark(function g(c){var A,t,ra,ae,_e;return m().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!((c==null||(A=c.metadata)===null||A===void 0?void 0:A.indexOf("ipfs://"))<0)){H.next=2;break}return H.abrupt("return");case 2:return ra=c==null||(t=c.metadata)===null||t===void 0?void 0:t.substring(7),H.next=5,fetch(z.Z.ipfs.endpoint+ra);case 5:return ae=H.sent,H.next=8,ae.json();case 8:if(_e=H.sent,_e){H.next=11;break}return H.abrupt("return");case 11:_e.link=_e.link+"?kol="+(0,V.Zc)(Ae),aa&&(_e.link+="&referrer="+aa),Oa(_e);case 15:case"end":return H.stop()}},g)}));return function(c){return h.apply(this,arguments)}}();(0,o.useEffect)(function(){if(ea)try{var h=ea.ad;if(!(h!=null&&h.metadata))return;ba(h),Ba(h)}catch(g){Pe(g)}},[ea]);var ka=function(){var h=(0,k.Z)(m().mark(function g(){var c;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,J.JI)(sa);case 3:if(c=t.sent,!c.isEmpty){t.next=7;break}return le(!1),t.abrupt("return");case 7:window.location.href="".concat(window.location.origin,"/").concat(Ae,"/").concat(c),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),F.default.error({message:t.t0.message,duration:null}),t.abrupt("return");case 14:case"end":return t.stop()}},g,null,[[0,10]])}));return function(){return h.apply(this,arguments)}}(),La=function(){var h=(0,k.Z)(m().mark(function g(){var c;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,ya.q5)(sa);case 2:if(c=t.sent,c){t.next=7;break}return F.default.error({message:ee.formatMessage({id:"error.identity.notFound"}),duration:null}),l.m8.goBack(),t.abrupt("return");case 7:$(c);case 9:case"end":return t.stop()}},g)}));return function(){return h.apply(this,arguments)}}(),Ua=function(){var h=(0,k.Z)(m().mark(function g(){return m().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Q(!1),A.abrupt("return");case 2:case"end":return A.stop()}},g)}));return function(){return h.apply(this,arguments)}}();(0,o.useEffect)(function(){U&&(document.title="".concat((U==null?void 0:U.nickname.toString())||Ae," - Para Metaverse Identity"),Ua().catch(Pe))},[U]);var Wa=function(){var h=(0,k.Z)(m().mark(function g(){var c;return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,J.X6)(D==null?void 0:D.nftID);case 2:if(c=t.sent,c){t.next=7;break}return F.default.error({message:ee.formatMessage({id:"error.nft.notFound"}),duration:null}),l.m8.goBack(),t.abrupt("return");case 7:if((c==null?void 0:c.owner)===sa){t.next=11;break}return F.default.error({message:ee.formatMessage({id:"error.nft.notFound"}),duration:null}),l.m8.goBack(),t.abrupt("return");case 11:i(c);case 12:case"end":return t.stop()}},g)}));return function(){return h.apply(this,arguments)}}();return(0,o.useEffect)(function(){var h=function(){var g=(0,k.Z)(m().mark(function c(){var A,t;return m().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,ga.Ay)(Z==null?void 0:Z.tokenAssetId);case 2:if(A=ae.sent,!A.isEmpty){ae.next=6;break}return le(!1),ae.abrupt("return");case 6:t=A.toHuman(),O(t);case 8:case"end":return ae.stop()}},c)}));return function(){return g.apply(this,arguments)}}();if(Z)try{h()}catch(g){Pe(g)}},[Z]),(0,o.useEffect)(function(){d&&Ta().catch(Pe)},[d]),(0,o.useEffect)(function(){if(S&&!(D!=null&&D.nftID)&&ka(),va.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),I(!0)),S)try{Wa(),La()}catch(h){Pe(h)}},[S]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:x().explorerContainer,children:[R&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ee.Z,{src:X||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:x().avatar,style:{top:u?(ce-400)/2:xa,left:u?(Aa-200)/2:Da,width:u?200:30,height:u?200:30,animation:u?1:0,position:u?"fixed":"absolute",display:u||De&&Object.keys(De).length?"flex":"none"},preview:!1}),(0,e.jsx)("div",{className:x().loading,style:{opacity:u?1:0,zIndex:u?15:-1,height:ce,minHeight:"100vh"},children:(0,e.jsx)("span",{className:x().loadingTip,children:ee.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,e.jsx)("br",{})})})})]}),!R&&va.canWalletUser&&Z&&(0,e.jsx)("div",{className:K().pageContainer,style:{paddingTop:50,maxWidth:1920},children:(0,e.jsx)(ha,{nft:Z})}),R&&De&&Object.keys(De).length>0&&(0,e.jsx)("div",{className:K().pageContainer,style:{paddingTop:50,maxWidth:"100%"},children:(0,e.jsx)(G,{ad:Za,nftId:D==null?void 0:D.nftID,referrer:aa,asset:d,avatar:X,did:Ae,adData:De,adImageOnLoad:function(){Q(!1)}})}),(0,e.jsx)(Ca.Z,{})]}),(0,e.jsx)(ue.Z,{visable:W,title:ee.formatMessage({id:"error.identity.notUser"}),content:(0,e.jsx)("div",{className:x().notUser,children:(0,e.jsxs)("div",{className:x().buttons,children:[(0,e.jsxs)(se.Z,{block:!0,size:"large",type:"primary",shape:"round",className:x().button,onClick:function(){l.m8.push(z.Z.page.createPage)},children:[(0,e.jsx)("div",{className:x().title,children:ee.formatMessage({id:"index.createAccount"})}),(0,e.jsx)("span",{className:x().desc,children:ee.formatMessage({id:"index.createAccount.desc"})})]}),(0,e.jsx)(Te.Z,{children:ee.formatMessage({id:"index.or"})}),(0,e.jsxs)(se.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(x().button," ").concat(x().buttonImport),onClick:function(){l.m8.push(z.Z.page.recoverPage)},children:[(0,e.jsx)("div",{className:x().title,children:ee.formatMessage({id:"index.importAccount"})}),(0,e.jsx)("span",{className:x().desc,children:ee.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})},Sa=Ma}}]);
