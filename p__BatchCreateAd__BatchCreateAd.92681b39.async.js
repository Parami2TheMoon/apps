(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5577],{67724:function(T,p,t){"use strict";t.d(p,{Z:function(){return U}});var m=t(28991),l=t(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},A=O,D=t(27029),s=function(L,u){return l.createElement(D.Z,(0,m.Z)((0,m.Z)({},L),{},{ref:u,icon:A}))};s.displayName="LeftOutlined";var U=l.forwardRef(s)},19273:function(T,p,t){"use strict";t.d(p,{Z:function(){return m}});function m(l){if(l==null)throw new TypeError("Cannot destructure undefined")}},12082:function(T){T.exports={container:"container___1jNY3",form:"form___1CBBu",field:"field___3TcbM",title:"title___PYs1Y",adIdsTable:"adIdsTable___w53jW",previewTable:"previewTable___2wdrH",btnContainer:"btnContainer___32rfM"}},51406:function(T,p,t){"use strict";var m=t(22385),l=t(31097),O=t(11849),A=t(67294),D=t(13999),s=t(85893),U=function(L){var u,C,h,I,e=L.ad,n=L.kolIcon,a=(0,O.Z)((0,O.Z)({},e),{},{kolIcon:(u=e.kolIcon)!==null&&u!==void 0?u:n,tag:(C=e.tag)!==null&&C!==void 0?C:(e==null?void 0:e.instructions)&&(e==null?void 0:e.instructions[0])&&(e==null?void 0:e.instructions[0].tag),poster:(h=e.poster)!==null&&h!==void 0?h:e.media}),c=(I=e==null?void 0:e.sponsorName)!==null&&I!==void 0?I:"Parami",f=c.length>15?"".concat(c.slice(0,6),"...").concat(c.slice(-6)):null,P=e!=null&&e.contractAddress&&e!==null&&e!==void 0&&e.tokenId?(0,s.jsx)("a",{href:"https://opensea.io/assets/ethereum/".concat(e.contractAddress,"/").concat(e.tokenId),target:"_blank",children:"hNFT"}):"hNFT",W=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"ownerInfo",children:(0,s.jsx)(l.Z,{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{children:["\u{1F4E2} This ",P," is reserved."]}),(0,s.jsx)("a",{className:"claimLink",href:"/claimHnft/".concat(e.nftId),target:"_blank",children:"I am the owner"})]}),children:(0,s.jsx)("span",{className:"claimInfoMark",children:(0,s.jsx)("i",{className:"fa-solid fa-circle-exclamation"})})})})});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"advertisementContainer",children:(0,s.jsxs)(s.Fragment,{children:[W,(0,s.jsxs)("div",{className:"sponsorInfo",children:[(e==null?void 0:e.icon)&&(0,s.jsx)("img",{referrerPolicy:"no-referrer",className:"sponsorIcon",src:e==null?void 0:e.icon}),(0,s.jsxs)("span",{className:"sponsorText",children:[!!f&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.Z,{title:c,children:(0,s.jsx)("span",{className:"sponsorName",children:f})})}),!f&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:"sponsorName",children:c})}),(0,s.jsxs)("span",{children:["is sponsoring this ",P,". "]}),(0,s.jsx)("a",{className:"bidLink",href:"/bid/".concat(e.nftId),target:"_blank",children:"Bid on this ad space"})]})]}),(0,s.jsx)(D.Z,{ad:a,preview:!0})]})})})};p.Z=U},55410:function(T,p,t){"use strict";t.d(p,{n:function(){return m}});var m;(function(l){l.ICON="icon",l.POSTER="poster"})(m||(m={}))},91087:function(T,p,t){"use strict";t.d(p,{p:function(){return m}});var m=24*60*60/12},49241:function(T,p,t){"use strict";t.r(p);var m=t(95936),l=t(80274),O=t(43185),A=t(35372),D=t(57663),s=t(71577),U=t(20136),R=t(55241),L=t(74379),u=t(38648),C=t(3182),h=t(2824),I=t(19273),e=t(94043),n=t.n(e),a=t(51406),c=t(46656),f=t(51625),P=t(55410),W=t(91087),d=t(61715),N=t(32689),F=t(84986),x=t(94452),$=t(84391),v=t(67294),y=t(43581),S=t(12082),B=t.n(S),r=t(85893);function ae(se){(0,I.Z)(se);var re=(0,y.tT)("apiWs"),ie=(0,y.tT)("currentUser"),k=ie.wallet,oe=(0,v.useState)([]),V=(0,h.Z)(oe,2),w=V[0],le=V[1],_e=(0,v.useState)([]),z=(0,h.Z)(_e,2),Y=z[0],de=z[1],ue=(0,v.useState)(""),G=(0,h.Z)(ue,2),J=G[0],ce=G[1],me=(0,v.useState)(!1),X=(0,h.Z)(me,2),fe=X[0],H=X[1],ve=(0,v.useState)([]),Q=(0,h.Z)(ve,2),q=Q[0],pe=Q[1],Ee=(0,v.useState)([]),ee=(0,h.Z)(Ee,2),te=ee[0],he=ee[1],ne=function(){var E=(0,C.Z)(n().mark(function g(o,b){var _,j,K,i,Z;return n().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,N.nH)(o);case 2:if(_=M.sent,_.data.type!=="image/gif"){M.next=5;break}return M.abrupt("return",o);case 5:return M.next=7,(0,x.q)(_.data,b);case 7:return j=M.sent,M.next=10,(0,F.U)(j);case 10:return K=M.sent,i=K.data,Z=f.Z.ipfs.endpoint+i.Hash,console.log("compressed:",Z),M.abrupt("return",Z);case 15:case"end":return M.stop()}},g)}));return function(o,b){return E.apply(this,arguments)}}(),ge=function(){var E=(0,C.Z)(n().mark(function g(o){return n().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!o.icon){_.next=4;break}return _.next=3,ne(o.icon,P.n.ICON);case 3:o.icon=_.sent;case 4:if(!o.poster){_.next=8;break}return _.next=7,ne(o.poster,P.n.POSTER);case 7:o.poster=_.sent;case 8:return _.abrupt("return",(0,x.T)(o));case 9:case"end":return _.stop()}},g)}));return function(o){return E.apply(this,arguments)}}();(0,v.useEffect)(function(){w.length&&(u.default.info({message:"Preparing ad data..."}),Promise.all(w.map(function(E){return ge(E)})).then(function(E){u.default.success({message:"Ready to create"}),he(w),de(E)}).catch(function(E){u.default.error({message:"Generate Ad Config Error",description:JSON.stringify(E)})}))},[w]);var Pe=function(g){if(console.log("reading file",g),g.type!=="text/tab-separated-values")return u.default.error({message:"File Type Error",description:"Please upload tsv (tab-separated-values) file"}),!1;var o=new FileReader;return o.onload=function(b){var _=b.target.result.split(`
`).slice(1),j=_.map(function(K){var i=K.split("	");return{title:i[1],poster:"".concat(i[3]?f.Z.ipfs.endpoint+i[3]:""),icon:"".concat(i[5]?f.Z.ipfs.endpoint+i[5]:""),content:i[6],sponsorName:i[7],instructions:[{text:i[8],tag:"Social Media",score:1,link:i[9]}],rewardRate:parseInt(i[10],10),payoutBase:parseInt(i[11],10),payoutMin:parseInt(i[12],10),payoutMax:parseInt(i[13],10),lifetime:W.p*2}});console.log("got ad infos",j),le(j)},o.readAsText(g),!1},Me=function(){var E=(0,C.Z)(n().mark(function g(o,b){var _,j;return n().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o||u.default.info({message:"Creating Ads",description:"This might take a while. Please wait..."}),i.next=3,(0,d.ZU)(Y,J,k==null?void 0:k.keystore,o,b);case 3:if(_=i.sent,!(o&&b)){i.next=6;break}return i.abrupt("return",_);case 6:j=_.map(function(Z){return Z.ad.Created[0][0]}),pe(j),H(!1),u.default.success({message:"Ad Create Success"});case 10:case"end":return i.stop()}},g)}));return function(o,b){return E.apply(this,arguments)}}(),Oe=[{title:"Title",dataIndex:"title"},{title:"Content",dataIndex:"content"},{title:"Sponsor Name",dataIndex:"sponsorName"},{title:"Preview",render:function(g,o){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R.Z,{content:(0,r.jsx)("div",{style:{marginTop:"40px"},children:(0,r.jsx)(a.Z,{ad:o})}),trigger:"hover",children:(0,r.jsx)("a",{children:"preview"})})})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:B().container,children:[(0,r.jsx)("div",{className:B().form,children:(0,r.jsxs)("div",{className:B().field,children:[(0,r.jsx)("div",{className:B().title,children:"upload tsv (tab-separated-values)"}),(0,r.jsx)("div",{className:B().content,children:(0,r.jsx)(A.Z,{beforeUpload:Pe,children:(0,r.jsx)(s.Z,{icon:(0,r.jsx)($.Z,{}),children:"Upload"})})})]})}),te.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:B().previewTable,children:(0,r.jsx)(l.Z,{dataSource:te,columns:Oe,pagination:!1})}),(0,r.jsx)("div",{className:B().btnContainer,children:(0,r.jsx)(s.Z,{onClick:function(){H(!0)},disabled:!re||!Y.length,children:"Batch Create Ads"})})]}),q.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:B().adIdsTable,children:(0,r.jsx)(l.Z,{pagination:!1,dataSource:q.map(function(E){return{id:E}}),columns:[{title:"Ad id",dataIndex:"id",key:"id"}]})})})]}),(0,r.jsx)(c.Z,{visable:fe,setVisable:H,passphrase:J,setPassphrase:ce,func:Me})]})}p.default=ae},94452:function(T,p,t){"use strict";t.d(p,{q:function(){return h},T:function(){return I}});var m=t(86582),l=t(11849),O=t(3182),A=t(94043),D=t.n(A),s=t(51625),U=t(55410),R=t(84986),L=t(41741),u=t(96534),C=t(48764).Buffer,h=function(){var e=(0,O.Z)(D().mark(function n(a,c){var f,P;return D().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a.type!=="image/gif"){d.next=2;break}return d.abrupt("return",a);case 2:return f=c===U.n.ICON?{maxSizeMB:.1,maxWidthOrHeight:60,useWebWorker:!0}:{maxSizeMB:.5,maxWidthOrHeight:400,useWebWorker:!0},d.prev=3,d.next=6,(0,L.Z)(a,f);case 6:return P=d.sent,d.abrupt("return",P);case 10:return d.prev=10,d.t0=d.catch(3),console.log("image compression failed",d.t0),d.abrupt("return",a);case 14:case"end":return d.stop()}},n,null,[[3,10]])}));return function(a,c){return e.apply(this,arguments)}}(),I=function(){var e=(0,O.Z)(D().mark(function n(a){var c,f,P,W,d,N,F,x;return D().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return c={media:a.poster,icon:a.icon,content:a.content,instructions:a.instructions.map(function(y){var S;return(0,l.Z)((0,l.Z)({},y),{},{link:encodeURIComponent((S=y.link)!==null&&S!==void 0?S:"")})}),sponsorName:a.sponsorName},v.next=3,C.from(JSON.stringify(c));case 3:return f=v.sent,v.next=6,(0,R.U)(f);case 6:if(P=v.sent,W=P.response,d=P.data,W.ok){v.next=11;break}throw"Create Metadata Error";case 11:return N="ipfs://".concat(d.Hash),F=(0,u.Zc)(s.Z.advertisement.defaultDelegatedDid),x=Array.from(new Set((0,m.Z)(a.instructions.map(function(y){return y.tag}).filter(Boolean)))),v.abrupt("return",{tags:x,metadata:N,rewardRate:a.rewardRate.toString(),lifetime:a.lifetime,payoutBase:(0,u.Vm)(a.payoutBase.toString()),payoutMin:(0,u.Vm)(a.payoutMin.toString()),payoutMax:(0,u.Vm)(a.payoutMax.toString()),delegatedAccount:F});case 15:case"end":return v.stop()}},n)}));return function(a){return e.apply(this,arguments)}}()},27678:function(T,p,t){"use strict";t.d(p,{g1:function(){return C},os:function(){return I}});var m=/margin|padding|width|height|max|min|offset/,l={left:!0,top:!0},O={cssFloat:1,styleFloat:1,float:1};function A(e){return e.nodeType===1?e.ownerDocument.defaultView.getComputedStyle(e,null):{}}function D(e,n,a){if(n=n.toLowerCase(),a==="auto"){if(n==="height")return e.offsetHeight;if(n==="width")return e.offsetWidth}return n in l||(l[n]=m.test(n)),l[n]?parseFloat(a)||0:a}function s(e,n){var a=arguments.length,c=A(e);return n=O[n]?"cssFloat"in e.style?"cssFloat":"styleFloat":n,a===1?c:D(e,n,c[n]||e.style[n])}function U(e,n,a){var c=arguments.length;if(n=O[n]?"cssFloat"in e.style?"cssFloat":"styleFloat":n,c===3)return typeof a=="number"&&m.test(n)&&(a="".concat(a,"px")),e.style[n]=a,a;for(var f in n)n.hasOwnProperty(f)&&U(e,f,n[f]);return A(e)}function R(e){return e===document.body?document.documentElement.clientWidth:e.offsetWidth}function L(e){return e===document.body?window.innerHeight||document.documentElement.clientHeight:e.offsetHeight}function u(){var e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);return{width:e,height:n}}function C(){var e=document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:n}}function h(){return{scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop)}}function I(e){var n=e.getBoundingClientRect(),a=document.documentElement;return{left:n.left+(window.pageXOffset||a.scrollLeft)-(a.clientLeft||document.body.clientLeft||0),top:n.top+(window.pageYOffset||a.scrollTop)-(a.clientTop||document.body.clientTop||0)}}}}]);
