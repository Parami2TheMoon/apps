(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(K){K.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},15126:function(K){K.exports={assetsContainer:"assetsContainer___1wFua",noAssets:"noAssets___2Gid1",title:"title___swkHP",field:"field___3Hj7T",icon:"icon___39vsT",name:"name___3pUYc",value:"value___1rjpK"}},10070:function(K,ae,s){"use strict";s.r(ae),s.d(ae,{default:function(){return Qe}});var V=s(20228),se=s(11382),B=s(58024),me=s(39144),Ie=s(49111),pe=s(19650),be=s(57663),f=s(71577),S=s(77883),m=s(70507),y=s(12968),M=s(62462),i=s(74379),Y=s(38648),p=s(3182),I=s(2824),da=s(402),Pe=s(3887),Oe=s(94043),N=s.n(Oe),o=s(67294),x=s(43581),We=s(51615),$e=s(55909),fe=s.n($e),Fe=s(32177),t=s.n(Fe),W=s(33044),je=s(3548),Ge=s(46656),Ae=s(57254),he=s(57651),Ze=s(1615),Me=s(51625),Le=s(13580),Ue=s(96534),c=s(59749),Ne=s(43002),ne=s(11849),ze=s(69764),Re=s(15126),H=s.n(Re),e=s(85893),Ke=function(L){var U=L.onClose,J=L.onSelectAsset,re=(0,x.YB)(),$=(0,x.tT)("apiWs"),b=(0,x.tT)("currentUser"),Q=b.wallet,w=(0,o.useState)(),te=(0,I.Z)(w,2),h=te[0],ge=te[1],le=function(){var T=(0,p.Z)(N().mark(function X(){var z,q,j;return N().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!$){k.next=9;break}return k.next=3,$.query.assets.metadata.entries();case 3:return z=k.sent,q=(z!=null?z:[]).map(function(R){var D=(0,I.Z)(R,2),F=D[0],G=D[1],E=F.toHuman();return E?(0,ne.Z)((0,ne.Z)({},G.toHuman()),{},{id:E[0]}):null}).filter(Boolean),k.next=7,Promise.all(q.map(function(){var R=(0,p.Z)(N().mark(function D(F){var G,E,ie,Z,ue,g,v,oe;return N().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,$.query.assets.account(Number(F.id),Q==null?void 0:Q.account);case 2:return E=u.sent,ie=(G=E.toHuman())!==null&&G!==void 0?G:{balance:""},Z=ie.balance,Z.replaceAll(",",""),u.prev=5,u.next=8,(0,Ne.yI)(F.id);case 8:return ue=u.sent,u.next=11,(0,W.CC)(ue);case 11:return g=u.sent,v="",!!(g!=null&&g.avatar)&&(g==null?void 0:g.avatar.indexOf("ipfs://"))>-1&&(oe=g==null?void 0:g.avatar.substring(7),v=Me.Z.ipfs.endpoint+oe),u.abrupt("return",(0,ne.Z)((0,ne.Z)({},F),{},{icon:v,balance:Z.replaceAll(",","")}));case 17:return u.prev=17,u.t0=u.catch(5),u.abrupt("return",null);case 20:case"end":return u.stop()}},D,null,[[5,17]])}));return function(D){return R.apply(this,arguments)}}()));case 7:j=k.sent,ge(j.filter(Boolean));case 9:case"end":return k.stop()}},X)}));return function(){return T.apply(this,arguments)}}();return(0,o.useEffect)(function(){$&&le()},[$]),(0,e.jsx)(ze.Z,{visable:!0,title:"Select Asset",content:(0,e.jsxs)("div",{className:H().assetsContainer,children:[!h&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(se.Z,{tip:"Loading Assets"})}),h&&h.length===0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:H().noAssets,children:"Could not find any assets."})}),h&&h.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:H().title,children:[(0,e.jsx)("span",{children:"Name"}),(0,e.jsx)("span",{children:"Available Balance"})]}),h==null?void 0:h.map(function(T){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:H().field,onClick:function(){return J(T.id)},children:[(0,e.jsxs)("span",{className:H().title,children:[(0,e.jsx)(M.Z,{className:H().icon,src:T.icon||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:H().name,children:T.name})]}),(0,e.jsx)("span",{className:H().value,children:(0,e.jsx)(he.Z,{value:T.balance,symbol:T.symbol})})]},T.id)})})]})]}),close:U,footer:(0,e.jsx)(f.Z,{block:!0,type:"primary",shape:"round",size:"large",onClick:U,children:re.formatMessage({id:"common.close"})})})},Ve=Ke,Ye=Pe.Z.Title,Je=function(){var L,U,J,re=(0,x.tT)("apiWs"),$=(0,x.tT)("currentUser"),b=$.wallet,Q=(0,x.tT)("balance"),w=Q.balance,te=(0,x.tT)("assets"),h=te.assets,ge=(0,o.useState)(""),le=(0,I.Z)(ge,2),T=le[0],X=le[1],z=(0,o.useState)(),q=(0,I.Z)(z,2),j=q[0],Te=q[1],k=(0,o.useState)(),R=(0,I.Z)(k,2),D=R[0],F=R[1],G=(0,o.useState)(!0),E=(0,I.Z)(G,2),ie=E[0],Z=E[1],ue=(0,o.useState)("ad3ToToken"),g=(0,I.Z)(ue,2),v=g[0],oe=g[1],ke=(0,o.useState)(""),u=(0,I.Z)(ke,2),de=u[0],_=u[1],qe=(0,o.useState)(""),Be=(0,I.Z)(qe,2),ce=Be[0],ee=Be[1],_e=(0,o.useState)(!1),xe=(0,I.Z)(_e,2),ea=xe[0],we=xe[1],aa=(0,o.useState)(""),De=(0,I.Z)(aa,2),Ce=De[0],sa=De[1],na=(0,o.useState)(!1),He=(0,I.Z)(na,2),ra=He[0],ve=He[1],P=(0,x.YB)(),n=(0,We.UO)(),ta=function(){var l=(0,p.Z)(N().mark(function r(C){var A,d,O;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,Ne.yI)(C);case 3:return A=a.sent,a.next=6,(0,W.CC)(A);case 6:d=a.sent,!!(d!=null&&d.avatar)&&(d==null?void 0:d.avatar.indexOf("ipfs://"))>-1&&(O=d==null?void 0:d.avatar.substring(7),X(Me.Z.ipfs.endpoint+O)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.error(a.t0);case 14:case"end":return a.stop()}},r,null,[[0,11]])}));return function(C){return l.apply(this,arguments)}}(),la=function(){var l=(0,p.Z)(N().mark(function r(C){var A,d,O;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Le.Ay)(C);case 2:if(A=a.sent,!A.isEmpty){a.next=6;break}return Y.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(C)}),a.abrupt("return");case 6:return d=A.toHuman(),Te(d),a.next=10,(0,W.Vo)(C,(0,Ue.Vm)("1"));case 10:O=a.sent,F(O.toString()),Z(!1);case 13:case"end":return a.stop()}},r)}));return function(C){return l.apply(this,arguments)}}();(0,o.useEffect)(function(){if(!(n!=null&&n.assetId)){ve(!0);return}re&&(la(n==null?void 0:n.assetId),ta(n==null?void 0:n.assetId))},[n,re]);var ia=function(){var l=(0,p.Z)(N().mark(function r(C,A){var d,O;return N().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!!b&&!!(b!=null&&b.keystore)&&!!(n!=null&&n.assetId))){a.next=37;break}Z(!0),a.t0=v,a.next=a.t0==="ad3ToToken"?5:a.t0==="tokenToAd3"?20:35;break;case 5:return a.prev=5,a.next=8,(0,Ze.Ht)(n==null?void 0:n.assetId,(0,c.HM)(ce,18).toString(),(0,c.HM)(de,18).toString(),Ce,b==null?void 0:b.keystore,C,A);case 8:if(d=a.sent,Z(!1),!(C&&A)){a.next=12;break}return a.abrupt("return",d);case 12:a.next=19;break;case 14:return a.prev=14,a.t1=a.catch(5),Y.default.error({message:a.t1.message||a.t1,duration:null}),Z(!1),a.abrupt("return");case 19:return a.abrupt("break",35);case 20:return a.prev=20,a.next=23,(0,Ze.$1)(n==null?void 0:n.assetId,(0,c.HM)(de,18).toString(),(0,c.HM)(ce,18).toString(),Ce,b==null?void 0:b.keystore,C,A);case 23:if(O=a.sent,Z(!1),!(C&&A)){a.next=27;break}return a.abrupt("return",O);case 27:a.next=34;break;case 29:return a.prev=29,a.t2=a.catch(20),Y.default.error({message:a.t2.message||a.t2,duration:null}),Z(!1),a.abrupt("return");case 34:return a.abrupt("break",35);case 35:a.next=39;break;case 37:Y.default.error({key:"accessDenied",message:P.formatMessage({id:"error.accessDenied"}),duration:null}),Z(!1);case 39:case"end":return a.stop()}},r,null,[[5,14],[20,29]])}));return function(C,A){return l.apply(this,arguments)}}(),Se=(0,o.useCallback)(function(l){n!=null&&n.assetId&&(v==="ad3ToToken"&&(0,W.hM)(n==null?void 0:n.assetId,(0,c.HM)(l,18).toString()).then(function(r){ee((0,c.mI)(r,18))}),v==="tokenToAd3"&&(0,W.__)(n==null?void 0:n.assetId,(0,c.HM)(l,18).toString()).then(function(r){ee((0,c.mI)(r,18))}))},[n,v]),ye=(0,o.useCallback)(function(l){n!=null&&n.assetId&&(v==="tokenToAd3"&&(0,W.Vo)(n==null?void 0:n.assetId,(0,c.HM)(l,18).toString()).then(function(r){_((0,c.mI)(r,18))}),v==="ad3ToToken"&&(0,W.UG)(n==null?void 0:n.assetId,(0,c.HM)(l,18).toString()).then(function(r){_((0,c.mI)(r,18))}))},[n,v]),ua=(0,o.useCallback)(function(){var l=(0,c.mI)(w==null?void 0:w.free,18);_(l),Se(l)},[w,v,Se]),oa=(0,o.useCallback)(function(){if(n!=null&&n.assetId&&h){var l,r=(0,c.mI)((l=h.get(n==null?void 0:n.assetId))===null||l===void 0?void 0:l.balance,18);ee(r),ye(r)}},[v,n,h,ye]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,{tip:P.formatMessage({id:"common.loading"}),spinning:ie,wrapperClassName:fe().spinContainer,children:(0,e.jsx)(me.Z,{className:fe().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,e.jsxs)("div",{className:t().trade,children:[(0,e.jsx)(Ye,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:fe().title,children:P.formatMessage({id:"creator.explorer.trade"})}),(0,e.jsxs)("div",{className:t().pairCoins,style:{flexFlow:v==="ad3ToToken"?"column":"column-reverse"},children:[(0,e.jsxs)("div",{className:t().pairCoinsItem,children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,children:[(0,e.jsx)(M.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,e.jsx)(m.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:de,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){_(r),Se(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(je.Z,{value:w==null?void 0:w.free})]}),(0,e.jsx)(f.Z,{type:"link",size:"middle",className:t().maxButton,onClick:ua,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,e.jsx)(f.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,e.jsx)(Ae.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){oe(v==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),_(""),ee("")}}),(0,e.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,onClick:function(){return ve(!0)},children:[(0,e.jsx)(M.Z,{src:T||"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:j==null?void 0:j.symbol}),(0,e.jsx)(Ae.Z,{className:t().downIcon})]}),(0,e.jsx)(m.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:ce,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){ee(r),ye(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[P.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(he.Z,{value:(L=(U=h.get((J=n==null?void 0:n.assetId)!==null&&J!==void 0?J:""))===null||U===void 0?void 0:U.balance)!==null&&L!==void 0?L:"",symbol:j==null?void 0:j.symbol})]}),(0,e.jsx)(f.Z,{type:"link",size:"middle",className:t().maxButton,onClick:oa,children:P.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:t().pairCoinsFlat,children:(0,e.jsxs)(pe.Z,{children:[(0,e.jsx)(he.Z,{value:(0,c.HM)("1",18).toString(),symbol:j==null?void 0:j.symbol}),(0,e.jsx)("span",{children:"\u2248"}),(0,e.jsx)(je.Z,{value:D!=null?D:""})]})}),(0,e.jsx)(f.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!de||!ce,onClick:function(){we(!0)},children:P.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,e.jsx)(Ge.Z,{visable:ea,setVisable:we,passphrase:Ce,setPassphrase:sa,func:ia}),ra&&(0,e.jsx)(Ve,{onClose:function(){return ve(!1)},onSelectAsset:function(r){x.m8.push("/swap/".concat(r)),ve(!1)}})]})},Qe=Je},13580:function(K,ae,s){"use strict";s.d(ae,{Ay:function(){return me},f5:function(){return Ie},r7:function(){return pe},L7:function(){return be}});var V=s(3182),se=s(94043),B=s.n(se),me=function(){var f=(0,V.Z)(B().mark(function S(m){var y;return B().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.metadata(Number(m));case 2:return y=i.sent,i.abrupt("return",y);case 4:case"end":return i.stop()}},S)}));return function(m){return f.apply(this,arguments)}}(),Ie=function(){var f=(0,V.Z)(B().mark(function S(m){var y;return B().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.asset(Number(m));case 2:return y=i.sent,i.abrupt("return",y);case 4:case"end":return i.stop()}},S)}));return function(m){return f.apply(this,arguments)}}(),pe=function(){var f=(0,V.Z)(B().mark(function S(m){var y;return B().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.apiWs.query.assets.account.entries(m);case 2:return y=i.sent,i.abrupt("return",y);case 4:case"end":return i.stop()}},S)}));return function(m){return f.apply(this,arguments)}}(),be=function(){var f=(0,V.Z)(B().mark(function S(m,y){var M,i;return B().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,window.apiWs.query.assets.account(Number(y),m);case 2:if(M=p.sent,!M.isEmpty){p.next=5;break}return p.abrupt("return",null);case 5:return i=M.toHuman(),p.abrupt("return",i);case 7:case"end":return p.stop()}},S)}));return function(m,y){return f.apply(this,arguments)}}()}}]);
