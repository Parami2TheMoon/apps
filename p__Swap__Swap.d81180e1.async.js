(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(N){N.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemText:"pairCoinsItemText___nXyHJ",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",warning:"warning___3rkcG",warningText:"warningText___4BREX",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},11385:function(N,K,s){"use strict";s.r(K);var w=s(20228),x=s(11382),y=s(58024),H=s(39144),C=s(49111),G=s(19650),ne=s(57663),U=s(71577),re=s(77883),Z=s(70507),g=s(12968),u=s(62462),d=s(74379),o=s(38648),I=s(3182),r=s(2824),F=s(402),p=s(3887),z=s(94043),P=s.n(z),_=s(67294),W=s(43581),Pe=s(51615),Oe=s(55909),$=s.n(Oe),Te=s(32177),t=s.n(Te),j=s(33044),te=s(3548),Ae=s(46656),le=s(57254),ie=s(57651),_e=s(1615),be=s(51625),Be=s(13580),Se=s(96534),c=s(59749),ye=s(43002),Ue=s(1115),n=s(85893),We=p.Z.Title,je=function(){var V,X,J,oe=(0,W.tT)("apiWs"),Le=(0,W.tT)("currentUser"),h=Le.wallet,Re=(0,W.tT)("balance"),E=Re.balance,ke=(0,W.tT)("assets"),A=ke.assets,Ke=(0,_.useState)(""),ue=(0,r.Z)(Ke,2),Ze=ue[0],de=ue[1],Ne=(0,_.useState)(),ce=(0,r.Z)(Ne,2),D=ce[0],we=ce[1],xe=(0,_.useState)(),ve=(0,r.Z)(xe,2),Q=ve[0],He=ve[1],Ge=(0,_.useState)(!1),me=(0,r.Z)(Ge,2),Fe=me[0],b=me[1],ze=(0,_.useState)("ad3ToToken"),pe=(0,r.Z)(ze,2),v=pe[0],$e=pe[1],Ve=(0,_.useState)(""),fe=(0,r.Z)(Ve,2),B=fe[0],L=fe[1],Xe=(0,_.useState)(""),Ee=(0,r.Z)(Xe,2),S=Ee[0],R=Ee[1],Je=(0,_.useState)(!1),Me=(0,r.Z)(Je,2),Qe=Me[0],Ce=Me[1],Ye=(0,_.useState)(""),Ie=(0,r.Z)(Ye,2),Y=Ie[0],qe=Ie[1],ea=(0,_.useState)(!1),De=(0,r.Z)(ea,2),aa=De[0],q=De[1],sa=(0,_.useState)(!1),ge=(0,r.Z)(sa,2),k=ge[0],ee=ge[1],O=(0,W.YB)(),e=(0,Pe.UO)(),na=function(){var l=(0,I.Z)(P().mark(function i(f){var M,m,T;return P().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return de(""),a.prev=1,a.next=4,(0,ye.yI)(f);case 4:return M=a.sent,a.next=7,(0,j.CC)(M);case 7:m=a.sent,!!(m!=null&&m.avatar)&&(m==null?void 0:m.avatar.indexOf("ipfs://"))>-1&&(T=m==null?void 0:m.avatar.substring(7),de(be.Z.ipfs.endpoint+T)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),console.error(a.t0);case 15:case"end":return a.stop()}},i,null,[[1,12]])}));return function(f){return l.apply(this,arguments)}}(),ra=function(){var l=(0,I.Z)(P().mark(function i(f){var M,m,T;return P().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Be.Ay)(f);case 2:if(M=a.sent,!M.isEmpty){a.next=6;break}return o.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(f)}),a.abrupt("return");case 6:return m=M.toHuman(),we(m),a.next=10,(0,j.Vo)(f,(0,Se.Vm)("1"));case 10:T=a.sent,He(T.toString()),b(!1);case 13:case"end":return a.stop()}},i)}));return function(f){return l.apply(this,arguments)}}();(0,_.useEffect)(function(){oe&&e!==null&&e!==void 0&&e.assetId&&(ra(e==null?void 0:e.assetId),na(e==null?void 0:e.assetId),L(""),R(""))},[e,oe]);var ta=function(){var l=(0,I.Z)(P().mark(function i(f,M){var m,T;return P().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!!h&&!!(h!=null&&h.keystore)&&!!(e!=null&&e.assetId))){a.next=37;break}b(!0),a.t0=v,a.next=a.t0==="ad3ToToken"?5:a.t0==="tokenToAd3"?20:35;break;case 5:return a.prev=5,a.next=8,(0,_e.Ht)(e==null?void 0:e.assetId,(0,c.HM)(S,18).toString(),(0,c.HM)(B,18).toString(),Y,h==null?void 0:h.keystore,f,M);case 8:if(m=a.sent,b(!1),!(f&&M)){a.next=12;break}return a.abrupt("return",m);case 12:a.next=19;break;case 14:return a.prev=14,a.t1=a.catch(5),o.default.error({message:a.t1.message||a.t1,duration:null}),b(!1),a.abrupt("return");case 19:return a.abrupt("break",35);case 20:return a.prev=20,a.next=23,(0,_e.Ro)(e==null?void 0:e.assetId,(0,c.HM)(S,18).toString(),(0,c.HM)(B,18).toString(),Y,h==null?void 0:h.keystore,f,M);case 23:if(T=a.sent,b(!1),!(f&&M)){a.next=27;break}return a.abrupt("return",T);case 27:a.next=34;break;case 29:return a.prev=29,a.t2=a.catch(20),o.default.error({message:a.t2.message||a.t2,duration:null}),b(!1),a.abrupt("return");case 34:return a.abrupt("break",35);case 35:a.next=39;break;case 37:o.default.error({key:"accessDenied",message:O.formatMessage({id:"error.accessDenied"}),duration:null}),b(!1);case 39:case"end":return a.stop()}},i,null,[[5,14],[20,29]])}));return function(f,M){return l.apply(this,arguments)}}(),ae=(0,_.useCallback)(function(l){e!=null&&e.assetId&&(v==="ad3ToToken"&&(0,j.hM)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){R((0,c.mI)(i,18))}),v==="tokenToAd3"&&(0,j.__)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){R((0,c.mI)(i,18))}))},[e,v]),se=(0,_.useCallback)(function(l){e!=null&&e.assetId&&(v==="tokenToAd3"&&(0,j.Vo)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){L((0,c.mI)(i,18))}),v==="ad3ToToken"&&(0,j.UG)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){L((0,c.mI)(i,18))}))},[e,v]),la=(0,_.useCallback)(function(){var l=(0,c.mI)(E==null?void 0:E.free,18);L(l),ae(l)},[E,v,ae]),ia=(0,_.useCallback)(function(){if(e!=null&&e.assetId&&A){var l,i=(0,c.mI)((l=A.get(e==null?void 0:e.assetId))===null||l===void 0?void 0:l.balance,18);R(i),se(i)}},[v,e,A,se]);return(0,_.useEffect)(function(){if(v==="ad3ToToken"){if(E!=null&&E.free&&B){ee((0,c.HM)(B,18)>BigInt(E.free));return}}else if(e!=null&&e.assetId&&A&&S){var l;ee((0,c.HM)(S,18)>BigInt((l=A.get(e==null?void 0:e.assetId))===null||l===void 0?void 0:l.balance));return}ee(!1)},[v,E,B,S,e,A]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{tip:O.formatMessage({id:"common.loading"}),spinning:Fe,wrapperClassName:$().spinContainer,children:(0,n.jsx)(H.Z,{className:$().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,n.jsxs)("div",{className:t().trade,children:[(0,n.jsx)(We,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:$().title,children:O.formatMessage({id:"creator.explorer.trade"})}),(0,n.jsxs)("div",{className:t().pairCoins,style:{flexFlow:v==="ad3ToToken"?"column":"column-reverse"},children:[(0,n.jsxs)("div",{className:t().pairCoinsItem,children:[(0,n.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,n.jsxs)("div",{className:t().pairCoin,children:[(0,n.jsx)(u.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,n.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,n.jsx)(Z.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:B,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(i){L(i),ae(i)}})]}),(0,n.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,n.jsxs)("span",{className:"".concat(t().balance," ").concat(v==="ad3ToToken"&&k?t().warning:""),children:[O.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,n.jsx)(te.Z,{value:E==null?void 0:E.free}),v==="ad3ToToken"&&k&&(0,n.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,n.jsx)(U.Z,{type:"link",size:"middle",className:t().maxButton,onClick:la,children:O.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,n.jsx)(U.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,n.jsx)(le.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){$e(v==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),L(""),R("")}}),(0,n.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,n.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,n.jsxs)("div",{className:t().pairCoin,onClick:function(){return q(!0)},children:[D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{src:Ze||"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,n.jsx)("span",{className:t().pairCoinsItemLabel,children:D==null?void 0:D.symbol})]}),!D&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:t().pairCoinsItemText,children:"Select Asset"})}),(0,n.jsx)(le.Z,{className:t().downIcon})]}),(0,n.jsx)(Z.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:S,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(i){R(i),se(i)}})]}),(0,n.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,n.jsxs)("span",{className:"".concat(t().balance," ").concat(v==="tokenToAd3"&&k?t().warning:""),children:[O.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,n.jsx)(ie.Z,{value:(V=(X=A.get((J=e==null?void 0:e.assetId)!==null&&J!==void 0?J:""))===null||X===void 0?void 0:X.balance)!==null&&V!==void 0?V:"",symbol:D==null?void 0:D.symbol}),v==="tokenToAd3"&&k&&(0,n.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,n.jsx)(U.Z,{type:"link",size:"middle",className:t().maxButton,onClick:ia,children:O.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,n.jsx)("div",{className:t().pairCoinsFlat,children:(0,n.jsxs)(G.Z,{children:[(0,n.jsx)(ie.Z,{value:(0,c.HM)("1",18).toString(),symbol:D==null?void 0:D.symbol}),(0,n.jsx)("span",{children:"\u2248"}),(0,n.jsx)(te.Z,{value:Q!=null?Q:""})]})}),(0,n.jsx)(U.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!B||!S||k||!(e!=null&&e.assetId),onClick:function(){Ce(!0)},children:O.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,n.jsx)(Ae.Z,{visable:Qe,setVisable:Ce,passphrase:Y,setPassphrase:qe,func:ta}),aa&&(0,n.jsx)(Ue.Z,{onClose:function(){return q(!1)},onSelectAsset:function(i){W.m8.push("/swap/".concat(i.id)),q(!1)}})]})};K.default=je},13580:function(N,K,s){"use strict";s.d(K,{Ay:function(){return G},f5:function(){return ne},r7:function(){return U},L7:function(){return re},jd:function(){return Z}});var w=s(11849),x=s(2824),y=s(3182),H=s(94043),C=s.n(H),G=function(){var g=(0,y.Z)(C().mark(function u(d){var o;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.metadata(Number(d));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return g.apply(this,arguments)}}(),ne=function(){var g=(0,y.Z)(C().mark(function u(d){var o;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.asset(Number(d));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return g.apply(this,arguments)}}(),U=function(){var g=(0,y.Z)(C().mark(function u(d){var o;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.account.entries(d);case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return g.apply(this,arguments)}}(),re=function(){var g=(0,y.Z)(C().mark(function u(d,o){var I,r;return C().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,window.apiWs.query.assets.account(Number(o),d);case 2:if(I=p.sent,!I.isEmpty){p.next=5;break}return p.abrupt("return",null);case 5:return r=I.toHuman(),p.abrupt("return",r);case 7:case"end":return p.stop()}},u)}));return function(d,o){return g.apply(this,arguments)}}(),Z=function(){var g=(0,y.Z)(C().mark(function u(){var d,o;return C().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.metadata.entries();case 2:return d=r.sent,o=(d!=null?d:[]).map(function(F){var p=(0,x.Z)(F,2),z=p[0],P=p[1],_=z.toHuman();return _?(0,w.Z)((0,w.Z)({},P.toHuman()),{},{id:_[0].replaceAll(",","")}):null}).filter(Boolean),r.abrupt("return",o);case 5:case"end":return r.stop()}},u)}));return function(){return g.apply(this,arguments)}}()}}]);
