(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5298],{39929:function(T){T.exports={explorerContainer:"explorerContainer___qyNNa",dashboard:"dashboard___1AFjv",header:"header___2chhI",buttons:"buttons___2xuTD",button:"button___3EQvw",confirm:"confirm___3Di36",topIcon:"topIcon___pwm8j",title:"title___bmywX",field:"field___2jSZs",value:"value___1f9dY",notUser:"notUser___3HBgs",desc:"desc___SQ8xn",buttonImport:"buttonImport___3EINY",notSupport:"notSupport___1Y1pI",icon:"icon___30sqj",text:"text___3VgnP",loading:"loading___21Zgn",loadingTip:"loadingTip___3TAUB",avatar:"avatar___3eE7B",rotate:"rotate___2kAlP",image_blur:"image_blur___jyycu"}},3627:function(T,A,e){"use strict";e.r(A);var U=e(48736),B=e(27049),C=e(57663),I=e(71577),te=e(12968),y=e(62462),g=e(3182),ra=e(74379),W=e(38648),c=e(2824),se=e(19273),re=e(94043),m=e.n(re),i=e(67294),ne=e(55909),_e=e.n(ne),oe=e(39929),u=e.n(oe),v=e(43581),ie=e(96534),le=e(28943),L=e(51625),ue=e(61715),de=e(69764),R=e(13580),ce=e(29791),K=e(32689),me=e(59749),ve=e(85047),fe=e(50671),Ee=e(81372),a=e(85893);function pe(ge){var S,b;(0,se.Z)(ge);var Z=(0,v.tT)("apiWs"),Pe=(0,v.tT)("bodyChange"),x=Pe.bodyHeight,De=(0,i.useState)(!0),N=(0,c.Z)(De,2),f=N[0],$=N[1],Me=(0,i.useState)(""),k=(0,c.Z)(Me,2),H=k[0],he=k[1],Oe=(0,i.useState)(!0),w=(0,c.Z)(Oe,2),F=w[0],Ae=w[1],Ie=(0,i.useState)(),Y=(0,c.Z)(Ie,2),P=Y[0],ye=Y[1],Te=(0,i.useState)(),z=(0,c.Z)(Te,2),D=z[0],Ue=z[1],Be=(0,i.useState)(),G=(0,c.Z)(Be,2),M=G[0],Ce=G[1],Le=(0,i.useState)(!1),J=(0,c.Z)(Le,2),Q=J[0],Se=J[1],be=(0,i.useState)(),X=(0,c.Z)(be,2),h=X[0],je=X[1],We=(0,i.useState)(),V=(0,c.Z)(We,2),O=V[0],Re=V[1],Ke=(0,i.useState)(null),q=(0,c.Z)(Ke,2),Ze=q[0],xe=q[1],Ne=(0,i.useState)(""),ee=(0,c.Z)(Ne,2),$e=ee[0],ke=ee[1],He=(0,i.useState)(),ae=(0,c.Z)(He,2),we=ae[0],Fe=ae[1],p=(0,v.YB)(),Ye=(0,v.md)(),ze=(S=document.getElementById("avatar"))===null||S===void 0?void 0:S.offsetTop,Ge=(b=document.getElementById("avatar"))===null||b===void 0?void 0:b.offsetLeft,Je=document.body.clientWidth;(0,i.useEffect)(function(){var t=(0,fe.Y)();console.log("got url params",t),t.nftId?ye(t.nftId):console.log("No nft id!")},[]);var Qe=v.m8.location.query,Xe=Qe,Ve=Xe.referrer,j=function(s){W.default.error({message:s.message,duration:null})},qe=function(){var t=(0,g.Z)(m().mark(function s(r){var o;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,ue.qX)(r);case 2:if(o=n.sent,o){n.next=6;break}return v.m8.replace("".concat(window.location.pathname,"/dao")),n.abrupt("return");case 6:je(o);case 7:case"end":return n.stop()}},s)}));return function(r){return t.apply(this,arguments)}}(),ea=function(){var t=(0,g.Z)(m().mark(function s(r){var o,l,n,d,E;return m().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!((r==null||(o=r.metadata)===null||o===void 0?void 0:o.indexOf("ipfs://"))<0)){_.next=2;break}return _.abrupt("return");case 2:return n=r==null||(l=r.metadata)===null||l===void 0?void 0:l.substring(7),_.next=5,fetch(L.Z.ipfs.endpoint+n);case 5:return d=_.sent,_.next=8,d.json();case 8:if(E=_.sent,E){_.next=11;break}return _.abrupt("return");case 11:xe(E),E.media||$(!1);case 13:case"end":return _.stop()}},s)}));return function(r){return t.apply(this,arguments)}}();(0,i.useEffect)(function(){if(h)try{var t=h.ad;if(!(t!=null&&t.metadata))return;Re(t),ea(t),(0,R.L7)(h.budgetPot,h.fractionId).then(function(s){var r;ke((0,me.At)((r=s==null?void 0:s.balance)!==null&&r!==void 0?r:""))}).catch(function(s){console.error("GetBalanceOfBudgetPot error:",s)})}catch(s){j(s)}},[h]),(0,i.useEffect)(function(){document.title="".concat(M==null?void 0:M.name," - Para Metaverse Identity")},[M]);var aa=function(){var t=(0,g.Z)(m().mark(function s(r){var o;return m().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,le.X6)(r);case 2:if(o=n.sent,o){n.next=7;break}return W.default.error({message:p.formatMessage({id:"error.nft.notFound"}),duration:null}),v.m8.goBack(),n.abrupt("return");case 7:Fe((0,ie.st)(o.owner)),Ue(o);case 9:case"end":return n.stop()}},s)}));return function(r){return t.apply(this,arguments)}}();(0,i.useEffect)(function(){var t=function(){var s=(0,g.Z)(m().mark(function r(){var o,l;return m().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,R.Ay)(D==null?void 0:D.tokenAssetId);case 2:if(o=d.sent,!o.isEmpty){d.next=6;break}return Ae(!1),d.abrupt("return");case 6:l=o.toHuman(),Ce(l);case 8:case"end":return d.stop()}},r)}));return function(){return s.apply(this,arguments)}}();if(D)try{t()}catch(s){j(s)}},[D]);var ta=function(){var t=(0,g.Z)(m().mark(function s(r){var o,l,n,d,E;return m().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,K.T9)(r);case 2:if(o=_.sent,l=o.data,!(l!=null&&l.token)){_.next=11;break}return _.next=7,(0,K.nH)(l.token.icon);case 7:n=_.sent,d=n.data,E=n.response,(E==null?void 0:E.status)===200&&he(window.URL.createObjectURL(d));case 11:case"end":return _.stop()}},s)}));return function(r){return t.apply(this,arguments)}}();return(0,i.useEffect)(function(){if(Ye.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),Se(!0)),Z&&P)try{qe(P),aa(P),ta(P)}catch(t){j(t)}},[Z,P]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Ee.ZP,{children:[(0,a.jsx)("title",{children:"Parami Ad Page"}),(0,a.jsx)("meta",{name:"description",content:"View Ad. Get Paid."}),(0,a.jsx)("meta",{property:"og:title",content:"Check out this ad"}),(0,a.jsx)("meta",{property:"og:image",content:"https://app.parami.io/images/default-avatar.svg"})]}),(0,a.jsxs)("div",{className:u().explorerContainer,children:[F&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{src:H||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:u().avatar,style:{top:f?(x-400)/2:ze,left:f?(Je-200)/2:Ge,width:f?200:30,height:f?200:30,animation:f?1:0,position:f?"fixed":"absolute",display:f||O&&Object.keys(O).length?"flex":"none"},preview:!1}),(0,a.jsx)("div",{className:u().loading,style:{opacity:f?1:0,zIndex:f?15:-1,height:x,minHeight:"100vh"},children:(0,a.jsx)("span",{className:u().loadingTip,children:p.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,a.jsx)("br",{})})})})]}),F&&O&&Object.keys(O).length>0&&(0,a.jsx)("div",{className:_e().pageContainer,style:{paddingTop:50,maxWidth:"100%"},children:(0,a.jsx)(ve.Z,{ad:Ze,nftId:P,referrer:Ve,asset:M,avatar:H,did:we,adData:O,balance:$e,notAccess:Q,adImageOnLoad:function(){$(!1)}})}),(0,a.jsx)(ce.Z,{})]}),(0,a.jsx)(de.Z,{visable:Q,title:p.formatMessage({id:"error.identity.notUser"}),content:(0,a.jsx)("div",{className:u().notUser,children:(0,a.jsxs)("div",{className:u().buttons,children:[(0,a.jsxs)(I.Z,{block:!0,size:"large",type:"primary",shape:"round",className:u().button,onClick:function(){v.m8.push(L.Z.page.createPage)},children:[(0,a.jsx)("div",{className:u().title,children:p.formatMessage({id:"index.createAccount"})}),(0,a.jsx)("span",{className:u().desc,children:p.formatMessage({id:"index.createAccount.desc"})})]}),(0,a.jsx)(B.Z,{children:p.formatMessage({id:"index.or"})}),(0,a.jsxs)(I.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(u().button," ").concat(u().buttonImport),onClick:function(){v.m8.push(L.Z.page.recoverPage)},children:[(0,a.jsx)("div",{className:u().title,children:p.formatMessage({id:"index.importAccount"})}),(0,a.jsx)("span",{className:u().desc,children:p.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})}A.default=pe},50671:function(T,A,e){"use strict";e.d(A,{Y:function(){return I}});var U=e(11849),B=e(80129),C=e.n(B),I=function(){try{var y=new URL(window.location.href);return(0,U.Z)((0,U.Z)({},C().parse(y.search.substring(1))),C().parse(y.hash.substring(1)))}catch(g){return console.log("Parse url params error",g),{}}}}}]);
