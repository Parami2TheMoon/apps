(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7641],{55133:function(u){u.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(u){u.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},2752:function(u){u.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},8556:function(u){u.exports={scoreContainer:"scoreContainer___1bJza",positive:"positive___p0hU_",negative:"negative___1XWM_"}},28531:function(u){u.exports={tag:"tag___sah2p"}},69764:function(u,h,e){"use strict";var Y=e(71194),O=e(50146),p=e(57663),E=e(71577),A=e(402),m=e(3887),M=e(67294),T=e(55133),R=e.n(T),P=e(54549),f=e(85893),H=m.Z.Title,$=function(I){var Q=I.visable,b=I.title,B=I.content,L=I.footer,W=I.close,X=I.bodyStyle,l=I.width;return(0,f.jsx)(O.Z,{title:b?(0,f.jsx)(H,{level:5,className:R().title,children:b}):null,closable:!!W,closeIcon:(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(E.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,f.jsx)(P.Z,{onClick:W})})}),className:R().modal,centered:!0,visible:Q,width:l!=null?l:650,footer:L,bodyStyle:X,children:B})};h.Z=$},46656:function(u,h,e){"use strict";var Y=e(71194),O=e(50146),p=e(47673),E=e(32787),A=e(22385),m=e(31097),M=e(17462),T=e(76772),R=e(57663),P=e(71577),f=e(74379),H=e(38648),$=e(3182),z=e(2824),I=e(402),Q=e(3887),b=e(94043),B=e.n(b),L=e(67294),W=e(43581),X=e(55133),l=e.n(X),se=e(3548),ie=e(68855),S=e(47832),ae=e(55347),Z=e(51625),_=e(85893),q=Q.Z.Title,le=function(K){var j=K.visable,o=K.setVisable,s=K.passphrase,N=K.setPassphrase,G=K.func,k=K.changePassphrase,V=(0,W.tT)("apiWs"),ne=(0,W.tT)("currentUser"),a=ne.wallet,J=(0,W.tT)("balance"),_e=J.balance,re=(0,L.useState)(!1),v=(0,z.Z)(re,2),w=v[0],x=v[1],te=(0,L.useState)(),ee=(0,z.Z)(te,2),i=ee[0],y=ee[1],t=(0,W.YB)(),g=function(n){N(n?n.target.value:"")},c=function(){var C=(0,$.Z)(B().mark(function n(){var r,F,D,de,ue;return B().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(x(!0),a!=null&&a.passphrase&&N(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){d.next=5;break}return x(!1),d.abrupt("return");case 5:if(r=(a==null?void 0:a.passphrase)||s,!(r&&a!==null&&a!==void 0&&a.keystore)){d.next=16;break}if(F=(0,S.Gh)(r,a.keystore),F){d.next=13;break}return H.default.error({key:"passphraseError",message:t.formatMessage({id:"error.passphrase.error"}),duration:null}),N(""),x(!1),d.abrupt("return");case 13:D=new ae.ZP({type:"sr25519"}),de=D.addFromUri(F),ue=de.address,a!=null&&a.account&&a.account!==ue&&(localStorage.clear(),sessionStorage.clear(),window.location.href=Z.Z.page.homePage);case 16:if(!G){d.next=25;break}return d.prev=17,d.next=20,G();case 20:d.next=25;break;case 22:d.prev=22,d.t0=d.catch(17),console.log("security modal submit func error fallback",d.t0);case 25:o(!1),x(!1);case 27:case"end":return d.stop()}},n,null,[[17,22]])}));return function(){return C.apply(this,arguments)}}(),U=function(){var C=(0,$.Z)(B().mark(function n(){var r;return B().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(!!V&&!!a.account)){D.next=11;break}return D.next=3,G(!0,a.account);case 3:if(r=D.sent,!r){D.next=8;break}y(r.partialFee),D.next=11;break;case 8:if(k){D.next=11;break}return D.next=11,c();case 11:case"end":return D.stop()}},n)}));return function(){return C.apply(this,arguments)}}();return(0,L.useEffect)(function(){!!V&&!!(a!=null&&a.account)&&j&&U()},[V,a==null?void 0:a.account,j]),(0,L.useEffect)(function(){!!(a!=null&&a.passphrase)&&j&&!k&&N(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,j,k]),(0,_.jsxs)(O.Z,{title:(0,_.jsx)(q,{level:3,children:t.formatMessage({id:"modal.security.title"})}),closable:!1,className:l().modal,centered:!0,visible:j,width:400,footer:(0,_.jsxs)("div",{className:l().buttons,children:[(0,_.jsx)(P.Z,{type:"text",shape:"round",size:"large",className:l().button,onClick:function(){o(!1),window.location.reload()},loading:w,children:t.formatMessage({id:"common.decline"})}),(0,_.jsx)(P.Z,{type:"primary",shape:"round",size:"large",className:l().button,onClick:function(){c()},disabled:!s||s.length<6,loading:w,children:t.formatMessage({id:"common.confirm"})})]}),children:[(0,_.jsxs)("div",{className:l().confirmContainer,children:[!!i&&!!(i!=null&&i.toString())>_e.free&&(0,_.jsx)(T.Z,{description:t.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:l().alertContainer}),!!i&&(0,_.jsxs)("div",{className:l().field,children:[(0,_.jsxs)("div",{className:l().labal,children:[t.formatMessage({id:"modal.security.gas"}),(0,_.jsxs)("span",{className:l().small,children:["(",t.formatMessage({id:"modal.security.estimated"}),")"]}),(0,_.jsx)(m.Z,{placement:"bottom",title:t.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,_.jsx)(ie.Z,{className:l().labalIcon})})]}),(0,_.jsx)("div",{className:l().value,children:(0,_.jsx)(se.Z,{value:i,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||k)&&(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,_.jsxs)("div",{className:l().codeInput,children:[(0,_.jsxs)("div",{className:l().verifyForm,children:[(0,_.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&l().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&l().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&l().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&l().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(5))&&l().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,_.jsx)(E.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:l().verifyInput,onChange:g,value:s,disabled:w,maxLength:6,visibilityToggle:!1})]})})]})};h.Z=le},3548:function(u,h,e){"use strict";var Y=e(67294),O=e(31639),p=e.n(O),E=e(96534),A=e(85893),m=function(T){var R=T.value,P=T.style;return(0,A.jsxs)("div",{className:p().ad3,style:P,children:[R?(0,E.MP)(R):"--",(0,A.jsx)("span",{className:p().unit,children:"\xA0$AD3"})]})};h.Z=m},57641:function(u,h,e){"use strict";var Y=e(57663),O=e(71577),p=e(20228),E=e(11382),A=e(74379),m=e(38648),M=e(3182),T=e(2824),R=e(94043),P=e.n(R),f=e(67294),H=e(69764),$=e(2752),z=e.n($),I=e(32689),Q=e(46656),b=e(61715),B=e(43581),L=e(69854),W=e(11561),X=e(79762),l=e(85893),se=function(S){var ae=S.onClose,Z=S.adId,_=S.nftId,q=S.referrer,le=q===void 0?null:q,oe=S.onClaim,K=(0,f.useState)(),j=(0,T.Z)(K,2),o=j[0],s=j[1],N=(0,f.useState)(!1),G=(0,T.Z)(N,2),k=G[0],V=G[1],ne=(0,f.useState)(""),a=(0,T.Z)(ne,2),J=a[0],_e=a[1],re=(0,B.tT)("currentUser"),v=re.wallet,w=(0,B.YB)(),x=function(){var i=(0,M.Z)(P().mark(function y(){var t;return P().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,L.Wv)(Z);case 2:t=c.sent,s({scores:(t!=null?t:[]).map(function(U){return{tag:U.name,score:-5}})});case 4:case"end":return c.stop()}},y)}));return function(){return i.apply(this,arguments)}}(),te=function(){var i=(0,M.Z)(P().mark(function y(){var t,g,c,U;return P().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,L.Wv)(Z);case 3:t=n.sent,console.log(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:return n.prev=10,n.next=13,(0,I.Rh)(Z,_,v==null?void 0:v.did);case 13:g=n.sent,c=g.response,U=g.data,c.ok?s(U):x(),n.next=23;break;case 19:n.prev=19,n.t1=n.catch(10),console.log(n.t1),x();case 23:case"end":return n.stop()}},y,null,[[0,7],[10,19]])}));return function(){return i.apply(this,arguments)}}();(0,f.useEffect)(function(){te()},[]);var ee=function(){var i=(0,M.Z)(P().mark(function y(t,g){var c,U,C;return P().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(v!=null&&v.keystore){r.next=3;break}return m.default.error({key:"accessDenied",message:w.formatMessage({id:"error.accessDenied"}),duration:null}),r.abrupt("return");case 3:if(r.prev=3,C=((c=o.scores)!==null&&c!==void 0?c:[]).map(function(F){return[F.tag,F.score]}),!(o&&o.signature)){r.next=11;break}return r.next=8,(0,b.nm)(Z,_,v==null?void 0:v.did,C,o.referer,o.signature,o.signer_account,J,v.keystore,t,g);case 8:U=r.sent,r.next=14;break;case 11:return r.next=13,(0,b.HS)(Z,_,C,le,J,v.keystore,t,g);case 13:U=r.sent;case 14:if(!(t&&g)){r.next=16;break}return r.abrupt("return",U);case 16:m.default.success({message:"Claim Token Success"}),oe(),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),console.log(r.t0),m.default.error({message:"Claim Ad Token Error",description:"".concat(r.t0)});case 24:case"end":return r.stop()}},y,null,[[3,20]])}));return function(t,g){return i.apply(this,arguments)}}();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(H.Z,{visable:!0,title:"Claim your token",content:(0,l.jsx)("div",{className:z().claimInfoContainer,children:(0,l.jsx)(E.Z,{spinning:!o,children:o&&o.scores&&o.scores.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Claim now and have your score updated:"}),o.scores.map(function(i){return(0,l.jsxs)("div",{className:z().scoreChange,children:[(0,l.jsx)(W.Z,{tag:i.tag}),(0,l.jsx)(X.Z,{score:parseInt(i.score,10)})]})}),!o.signature&&(0,l.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(O.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!o,onClick:function(){return V(!0)},children:"Claim"})}),close:function(){return ae()}}),(0,l.jsx)(Q.Z,{visable:k,setVisable:V,passphrase:J,setPassphrase:_e,func:ee})]})};h.Z=se},79762:function(u,h,e){"use strict";var Y=e(67294),O=e(8556),p=e.n(O),E=e(85893);function A(m){var M=m.score;return(0,E.jsxs)("span",{className:p().scoreContainer,children:[M>=0&&(0,E.jsxs)("span",{className:p().positive,children:["+",M]}),M<0&&(0,E.jsxs)("span",{className:p().negative,children:["-",Math.abs(M)]})]})}h.Z=A},11561:function(u,h,e){"use strict";var Y=e(67294),O=e(28531),p=e.n(O),E=e(85893);function A(m){var M=m.tag;return(0,E.jsx)("span",{className:p().tag,children:M})}h.Z=A}}]);
