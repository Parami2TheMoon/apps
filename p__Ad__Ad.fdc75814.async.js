(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[5298],{19273:function(T,D,e){"use strict";e.d(D,{Z:function(){return h}});function h(P){if(P==null)throw new TypeError("Cannot destructure undefined")}},39929:function(T){T.exports={explorerContainer:"explorerContainer___qyNNa",dashboard:"dashboard___1AFjv",header:"header___2chhI",buttons:"buttons___2xuTD",button:"button___3EQvw",confirm:"confirm___3Di36",topIcon:"topIcon___pwm8j",title:"title___bmywX",field:"field___2jSZs",value:"value___1f9dY",notUser:"notUser___3HBgs",desc:"desc___SQ8xn",buttonImport:"buttonImport___3EINY",notSupport:"notSupport___1Y1pI",icon:"icon___30sqj",text:"text___3VgnP",loading:"loading___21Zgn",loadingTip:"loadingTip___3TAUB",avatar:"avatar___3eE7B",rotate:"rotate___2kAlP",image_blur:"image_blur___jyycu"}},3627:function(T,D,e){"use strict";e.r(D);var h=e(48736),P=e(27049),B=e(57663),U=e(71577),te=e(12968),b=e(62462),g=e(3182),sa=e(74379),j=e(38648),c=e(2824),se=e(19273),re=e(94043),v=e.n(re),i=e(67294),ne=e(55909),_e=e.n(ne),oe=e(39929),l=e.n(oe),m=e(43581),ie=e(96534),ue=e(28943),C=e(51625),le=e(61715),de=e(69764),R=e(13580),ce=e(29791),K=e(32689),ve=e(59749),me=e(90917),fe=e(50671),n=e(85893);function Ee(pe){var S,L;(0,se.Z)(pe);var Z=(0,m.tT)("apiWs"),ge=(0,m.tT)("bodyChange"),x=ge.bodyHeight,De=(0,i.useState)(!0),N=(0,c.Z)(De,2),f=N[0],k=N[1],Me=(0,i.useState)(""),w=(0,c.Z)(Me,2),$=w[0],he=w[1],Pe=(0,i.useState)(!0),H=(0,c.Z)(Pe,2),F=H[0],Oe=H[1],Ae=(0,i.useState)(),Y=(0,c.Z)(Ae,2),M=Y[0],Ie=Y[1],ye=(0,i.useState)(),z=(0,c.Z)(ye,2),O=z[0],Te=z[1],Ue=(0,i.useState)(),J=(0,c.Z)(Ue,2),A=J[0],be=J[1],Be=(0,i.useState)(!1),Q=(0,c.Z)(Be,2),X=Q[0],Ce=Q[1],Se=(0,i.useState)(),G=(0,c.Z)(Se,2),I=G[0],Le=G[1],We=(0,i.useState)(),V=(0,c.Z)(We,2),y=V[0],je=V[1],Re=(0,i.useState)(null),q=(0,c.Z)(Re,2),Ke=q[0],Ze=q[1],xe=(0,i.useState)(""),ee=(0,c.Z)(xe,2),Ne=ee[0],ke=ee[1],we=(0,i.useState)(),ae=(0,c.Z)(we,2),$e=ae[0],He=ae[1],p=(0,m.YB)(),Fe=(0,m.md)(),Ye=(S=document.getElementById("avatar"))===null||S===void 0?void 0:S.offsetTop,ze=(L=document.getElementById("avatar"))===null||L===void 0?void 0:L.offsetLeft,Je=document.body.clientWidth;(0,i.useEffect)(function(){var a=(0,fe.Y)();console.log("got url params",a),a.nftId?Ie(a.nftId):console.log("No nft id!")},[]);var Qe=m.m8.location.query,Xe=Qe,Ge=Xe.referrer,W=function(t){j.default.error({message:t.message,duration:null})},Ve=function(){var a=(0,g.Z)(v().mark(function t(s){var o;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,le.qX)(s);case 2:if(o=r.sent,o){r.next=6;break}return m.m8.replace("".concat(window.location.pathname,"/dao")),r.abrupt("return");case 6:Le(o);case 7:case"end":return r.stop()}},t)}));return function(s){return a.apply(this,arguments)}}(),qe=function(){var a=(0,g.Z)(v().mark(function t(s){var o,u,r,d,E;return v().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!((s==null||(o=s.metadata)===null||o===void 0?void 0:o.indexOf("ipfs://"))<0)){_.next=2;break}return _.abrupt("return");case 2:return r=s==null||(u=s.metadata)===null||u===void 0?void 0:u.substring(7),_.next=5,fetch(C.Z.ipfs.endpoint+r);case 5:return d=_.sent,_.next=8,d.json();case 8:if(E=_.sent,E){_.next=11;break}return _.abrupt("return");case 11:Ze(E),E.media||k(!1);case 13:case"end":return _.stop()}},t)}));return function(s){return a.apply(this,arguments)}}();(0,i.useEffect)(function(){if(I)try{var a=I.ad;if(!(a!=null&&a.metadata))return;je(a),qe(a),(0,R.L7)(I.budgetPot,I.fractionId).then(function(t){var s;ke((0,ve.At)((s=t==null?void 0:t.balance)!==null&&s!==void 0?s:""))}).catch(function(t){console.error("GetBalanceOfBudgetPot error:",t)})}catch(t){W(t)}},[I]),(0,i.useEffect)(function(){document.title="".concat(A==null?void 0:A.name," - Para Metaverse Identity")},[A]);var ea=function(){var a=(0,g.Z)(v().mark(function t(s){var o;return v().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,ue.X6)(s);case 2:if(o=r.sent,o){r.next=7;break}return j.default.error({message:p.formatMessage({id:"error.nft.notFound"}),duration:null}),m.m8.goBack(),r.abrupt("return");case 7:He((0,ie.st)(o.owner)),Te(o);case 9:case"end":return r.stop()}},t)}));return function(s){return a.apply(this,arguments)}}();(0,i.useEffect)(function(){var a=function(){var t=(0,g.Z)(v().mark(function s(){var o,u;return v().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,R.Ay)(O==null?void 0:O.tokenAssetId);case 2:if(o=d.sent,!o.isEmpty){d.next=6;break}return Oe(!1),d.abrupt("return");case 6:u=o.toHuman(),be(u);case 8:case"end":return d.stop()}},s)}));return function(){return t.apply(this,arguments)}}();if(O)try{a()}catch(t){W(t)}},[O]);var aa=function(){var a=(0,g.Z)(v().mark(function t(s){var o,u,r,d,E;return v().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,K.T9)(s);case 2:if(o=_.sent,u=o.data,!(u!=null&&u.token)){_.next=11;break}return _.next=7,(0,K.nH)(u.token.icon);case 7:r=_.sent,d=r.data,E=r.response,(E==null?void 0:E.status)===200&&he(window.URL.createObjectURL(d));case 11:case"end":return _.stop()}},t)}));return function(s){return a.apply(this,arguments)}}();return(0,i.useEffect)(function(){if(Fe.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),Ce(!0)),Z&&M)try{Ve(M),ea(M),aa(M)}catch(a){W(a)}},[Z,M]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:l().explorerContainer,children:[F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{src:$||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:l().avatar,style:{top:f?(x-400)/2:Ye,left:f?(Je-200)/2:ze,width:f?200:30,height:f?200:30,animation:f?1:0,position:f?"fixed":"absolute",display:f||y&&Object.keys(y).length?"flex":"none"},preview:!1}),(0,n.jsx)("div",{className:l().loading,style:{opacity:f?1:0,zIndex:f?15:-1,height:x,minHeight:"100vh"},children:(0,n.jsx)("span",{className:l().loadingTip,children:p.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,n.jsx)("br",{})})})})]}),F&&y&&Object.keys(y).length>0&&(0,n.jsx)("div",{className:_e().pageContainer,style:{paddingTop:50,maxWidth:"100%"},children:(0,n.jsx)(me.Z,{ad:Ke,nftId:M,referrer:Ge,asset:A,avatar:$,did:$e,adData:y,balance:Ne,notAccess:X,adImageOnLoad:function(){k(!1)}})}),(0,n.jsx)(ce.Z,{})]}),(0,n.jsx)(de.Z,{visable:X,title:p.formatMessage({id:"error.identity.notUser"}),content:(0,n.jsx)("div",{className:l().notUser,children:(0,n.jsxs)("div",{className:l().buttons,children:[(0,n.jsxs)(U.Z,{block:!0,size:"large",type:"primary",shape:"round",className:l().button,onClick:function(){m.m8.push(C.Z.page.createPage)},children:[(0,n.jsx)("div",{className:l().title,children:p.formatMessage({id:"index.createAccount"})}),(0,n.jsx)("span",{className:l().desc,children:p.formatMessage({id:"index.createAccount.desc"})})]}),(0,n.jsx)(P.Z,{children:p.formatMessage({id:"index.or"})}),(0,n.jsxs)(U.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(l().button," ").concat(l().buttonImport),onClick:function(){m.m8.push(C.Z.page.recoverPage)},children:[(0,n.jsx)("div",{className:l().title,children:p.formatMessage({id:"index.importAccount"})}),(0,n.jsx)("span",{className:l().desc,children:p.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})}D.default=Ee},50671:function(T,D,e){"use strict";e.d(D,{Y:function(){return U}});var h=e(11849),P=e(80129),B=e.n(P),U=function(){try{var b=new URL(window.location.href);return(0,h.Z)((0,h.Z)({},B().parse(b.search.substring(1))),B().parse(b.hash.substring(1)))}catch(g){return console.log("Parse url params error",g),{}}}}}]);
