(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7641],{55133:function(d){d.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(d){d.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},2752:function(d){d.exports={claimInfoContainer:"claimInfoContainer___2QBl-",scoreChange:"scoreChange___21g3Z"}},8556:function(d){d.exports={scoreContainer:"scoreContainer___1bJza",positive:"positive___p0hU_",negative:"negative___1XWM_"}},28531:function(d){d.exports={tag:"tag___sah2p"}},69764:function(d,p,e){"use strict";var Q=e(71194),g=e(50146),C=e(57663),m=e(71577),B=e(402),E=e(3887),M=e(67294),T=e(55133),j=e.n(T),P=e(54549),O=e(85893),X=E.Z.Title,N=function(I){var J=I.visable,b=I.title,y=I.content,L=I.footer,R=I.close,w=I.bodyStyle,n=I.width;return(0,O.jsx)(g.Z,{title:b?(0,O.jsx)(X,{level:5,className:j().title,children:b}):null,closable:!!R,closeIcon:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(m.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,O.jsx)(P.Z,{onClick:R})})}),className:j().modal,centered:!0,visible:J,width:n!=null?n:650,footer:L,bodyStyle:w,children:y})};p.Z=N},46656:function(d,p,e){"use strict";var Q=e(71194),g=e(50146),C=e(47673),m=e(32787),B=e(22385),E=e(31097),M=e(17462),T=e(76772),j=e(57663),P=e(71577),O=e(74379),X=e(38648),N=e(3182),F=e(2824),I=e(402),J=e(3887),b=e(94043),y=e.n(b),L=e(67294),R=e(43581),w=e(55133),n=e.n(w),_e=e(3548),de=e(68855),S=e(47832),te=e(43955),$=e(51625),_=e(85893),se=J.Z.Title,re=function(K){var U=K.visable,i=K.setVisable,s=K.passphrase,Z=K.setPassphrase,z=K.func,G=K.changePassphrase,q=K.directSubmit,k=q===void 0?!1:q,V=(0,R.tT)("apiWs"),ee=(0,R.tT)("currentUser"),a=ee.wallet,ie=(0,R.tT)("balance"),D=ie.balance,ae=(0,L.useState)(!1),ne=(0,F.Z)(ae,2),Y=ne[0],H=ne[1],oe=(0,L.useState)(),f=(0,F.Z)(oe,2),u=f[0],c=f[1],t=(0,R.YB)(),v=function(l){Z(l?l.target.value:"")},A=function(){var x=(0,N.Z)(y().mark(function l(){var W,le,h,ce,ve;return y().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(H(!0),a!=null&&a.passphrase&&Z(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){o.next=5;break}return H(!1),o.abrupt("return");case 5:if(W=(a==null?void 0:a.passphrase)||s,!(W&&a!==null&&a!==void 0&&a.keystore)){o.next=16;break}if(le=(0,S.Gh)(W,a.keystore),le){o.next=13;break}return X.default.error({key:"passphraseError",message:t.formatMessage({id:"error.passphrase.error"}),duration:null}),Z(""),H(!1),o.abrupt("return");case 13:h=new te.ZP({type:"sr25519"}),ce=h.addFromUri(le),ve=ce.address,a!=null&&a.account&&a.account!==ve&&(localStorage.clear(),sessionStorage.clear(),window.location.href=$.Z.page.homePage);case 16:if(!z){o.next=25;break}return o.prev=17,o.next=20,z();case 20:o.next=25;break;case 22:o.prev=22,o.t0=o.catch(17),console.log("security modal submit func error fallback",o.t0);case 25:i(!1),H(!1);case 27:case"end":return o.stop()}},l,null,[[17,22]])}));return function(){return x.apply(this,arguments)}}(),r=function(){var x=(0,N.Z)(y().mark(function l(){var W;return y().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!!V&&!!a.account)){h.next=11;break}return h.next=3,z(!0,a.account);case 3:if(W=h.sent,!W){h.next=8;break}c(W.partialFee),h.next=11;break;case 8:if(G){h.next=11;break}return h.next=11,A();case 11:case"end":return h.stop()}},l)}));return function(){return x.apply(this,arguments)}}();return(0,L.useEffect)(function(){!!V&&!!(a!=null&&a.account)&&U&&!k&&r()},[V,a==null?void 0:a.account,U,k]),(0,L.useEffect)(function(){!!(a!=null&&a.passphrase)&&U&&!G&&Z(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,U,G]),(0,L.useEffect)(function(){s&&U&&k&&A()},[s,U,k]),(0,_.jsxs)(g.Z,{title:(0,_.jsx)(se,{level:3,children:t.formatMessage({id:"modal.security.title"})}),closable:!1,className:n().modal,centered:!0,visible:U,width:400,footer:(0,_.jsxs)("div",{className:n().buttons,children:[(0,_.jsx)(P.Z,{type:"text",shape:"round",size:"large",className:n().button,onClick:function(){i(!1),window.location.reload()},loading:Y,children:t.formatMessage({id:"common.decline"})}),(0,_.jsx)(P.Z,{type:"primary",shape:"round",size:"large",className:n().button,onClick:function(){A()},disabled:!s||s.length<6,loading:Y,children:t.formatMessage({id:"common.confirm"})})]}),children:[(0,_.jsxs)("div",{className:n().confirmContainer,children:[!!u&&!!(u!=null&&u.toString())>D.free&&(0,_.jsx)(T.Z,{description:t.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:n().alertContainer}),!!u&&(0,_.jsxs)("div",{className:n().field,children:[(0,_.jsxs)("div",{className:n().labal,children:[t.formatMessage({id:"modal.security.gas"}),(0,_.jsxs)("span",{className:n().small,children:["(",t.formatMessage({id:"modal.security.estimated"}),")"]}),(0,_.jsx)(E.Z,{placement:"bottom",title:t.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,_.jsx)(de.Z,{className:n().labalIcon})})]}),(0,_.jsx)("div",{className:n().value,children:(0,_.jsx)(_e.Z,{value:u,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||G)&&(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,_.jsxs)("div",{className:n().codeInput,children:[(0,_.jsxs)("div",{className:n().verifyForm,children:[(0,_.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&n().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&n().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&n().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&n().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(s==null?void 0:s.slice(5))&&n().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,_.jsx)(m.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:n().verifyInput,onChange:v,value:s,disabled:Y,maxLength:6,visibilityToggle:!1})]})})]})};p.Z=re},3548:function(d,p,e){"use strict";var Q=e(67294),g=e(31639),C=e.n(g),m=e(96534),B=e(85893),E=function(T){var j=T.value,P=T.style;return(0,B.jsxs)("div",{className:C().ad3,style:P,children:[j?(0,m.MP)(j):"--",(0,B.jsx)("span",{className:C().unit,children:"\xA0$AD3"})]})};p.Z=E},57641:function(d,p,e){"use strict";var Q=e(57663),g=e(71577),C=e(20228),m=e(11382),B=e(74379),E=e(38648),M=e(3182),T=e(2824),j=e(94043),P=e.n(j),O=e(67294),X=e(69764),N=e(2752),F=e.n(N),I=e(32689),J=e(46656),b=e(61715),y=e(43581),L=e(69854),R=e(11561),w=e(79762),n=e(85893),_e=function(S){var te=S.onClose,$=S.adId,_=S.nftId,se=S.referrer,re=se===void 0?null:se,ue=S.onClaim,K=(0,O.useState)(),U=(0,T.Z)(K,2),i=U[0],s=U[1],Z=(0,O.useState)(!1),z=(0,T.Z)(Z,2),G=z[0],q=z[1],k=(0,O.useState)(""),V=(0,T.Z)(k,2),ee=V[0],a=V[1],ie=(0,y.tT)("currentUser"),D=ie.wallet,ae=(0,y.tT)("apiWs"),ne=(0,y.YB)(),Y=function(){var f=(0,M.Z)(P().mark(function u(){var c;return P().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,L.Wv)($);case 2:c=v.sent,s({scores:(c!=null?c:[]).map(function(A){return{tag:A.name,score:-5}})});case 4:case"end":return v.stop()}},u)}));return function(){return f.apply(this,arguments)}}(),H=function(){var f=(0,M.Z)(P().mark(function u(){var c,t,v;return P().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,I.Rh)($,_,D==null?void 0:D.did);case 3:c=r.sent,t=c.response,v=c.data,t.ok?s(v):Y(),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0),Y();case 13:case"end":return r.stop()}},u,null,[[0,9]])}));return function(){return f.apply(this,arguments)}}();(0,O.useEffect)(function(){ae&&H()},[ae]);var oe=function(){var f=(0,M.Z)(P().mark(function u(c,t){var v,A,r;return P().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(D!=null&&D.keystore){l.next=3;break}return E.default.error({key:"accessDenied",message:ne.formatMessage({id:"error.accessDenied"}),duration:null}),l.abrupt("return");case 3:if(l.prev=3,r=((v=i.scores)!==null&&v!==void 0?v:[]).map(function(W){return[W.tag,W.score]}),!(i&&i.signature)){l.next=11;break}return l.next=8,(0,b.nm)($,_,D==null?void 0:D.did,r,i.referer,i.signature,i.signer_account,ee,D.keystore,c,t);case 8:A=l.sent,l.next=14;break;case 11:return l.next=13,(0,b.HS)($,_,r,re,ee,D.keystore,c,t);case 13:A=l.sent;case 14:if(!(c&&t)){l.next=16;break}return l.abrupt("return",A);case 16:E.default.success({message:"Claim Token Success"}),ue(),l.next=24;break;case 20:l.prev=20,l.t0=l.catch(3),console.log(l.t0),E.default.error({message:"Claim Ad Token Error",description:"".concat(l.t0)});case 24:case"end":return l.stop()}},u,null,[[3,20]])}));return function(c,t){return f.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z,{visable:!0,title:"Claim your token",content:(0,n.jsx)("div",{className:F().claimInfoContainer,children:(0,n.jsx)(m.Z,{spinning:!i,children:i&&i.scores&&i.scores.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Claim now and have your score updated:"}),i.scores.map(function(f){return(0,n.jsxs)("div",{className:F().scoreChange,children:[(0,n.jsx)(R.Z,{tag:f.tag}),(0,n.jsx)(w.Z,{score:parseInt(f.score,10)})]})}),!i.signature&&(0,n.jsx)("p",{children:"Not happy with the reward? Follow the instructions before claiming."})]})})}),footer:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!i,onClick:function(){return q(!0)},children:"Claim"})}),close:function(){return te()}}),(0,n.jsx)(J.Z,{visable:G,setVisable:q,passphrase:ee,setPassphrase:a,func:oe})]})};p.Z=_e},79762:function(d,p,e){"use strict";var Q=e(67294),g=e(8556),C=e.n(g),m=e(85893);function B(E){var M=E.score;return(0,m.jsxs)("span",{className:C().scoreContainer,children:[M>=0&&(0,m.jsxs)("span",{className:C().positive,children:["+",M]}),M<0&&(0,m.jsxs)("span",{className:C().negative,children:["-",Math.abs(M)]})]})}p.Z=B},11561:function(d,p,e){"use strict";var Q=e(67294),g=e(28531),C=e.n(g),m=e(85893);function B(E){var M=E.tag;return(0,m.jsx)("span",{className:C().tag,children:M})}p.Z=B}}]);
