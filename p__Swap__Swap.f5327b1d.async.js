(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(w){w.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemText:"pairCoinsItemText___nXyHJ",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",warning:"warning___3rkcG",warningText:"warningText___4BREX",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},11385:function(w,Z,a){"use strict";a.r(Z);var x=a(20228),H=a(11382),y=a(58024),G=a(39144),I=a(49111),F=a(19650),re=a(57663),U=a(71577),te=a(77883),N=a(70507),h=a(12968),u=a(62462),d=a(74379),o=a(38648),C=a(3182),r=a(2824),$=a(402),v=a(3887),z=a(94043),T=a.n(z),_=a(67294),j=a(43581),Pe=a(51615),Te=a(55909),V=a.n(Te),Oe=a(32177),t=a.n(Oe),R=a(33044),le=a(3548),Ae=a(46656),ie=a(57254),_e=a(57651),oe=a(1615),be=a(13580),Be=a(96534),c=a(59749),Se=a(1115),ye=a(32689),s=a(85893),Ue=v.Z.Title,je=function(){var X,J,Q,ue=(0,j.tT)("apiWs"),We=(0,j.tT)("currentUser"),P=We.wallet,Le=(0,j.tT)("balance"),E=Le.balance,ke=(0,j.tT)("assets"),A=ke.assets,Re=(0,_.useState)(""),de=(0,r.Z)(Re,2),Ke=de[0],ce=de[1],Ze=(0,_.useState)(),me=(0,r.Z)(Ze,2),D=me[0],Ne=me[1],we=(0,_.useState)(),ve=(0,r.Z)(we,2),Y=ve[0],xe=ve[1],He=(0,_.useState)(!1),pe=(0,r.Z)(He,2),Ge=pe[0],b=pe[1],Fe=(0,_.useState)("ad3ToToken"),fe=(0,r.Z)(Fe,2),m=fe[0],$e=fe[1],ze=(0,_.useState)(""),Ee=(0,r.Z)(ze,2),B=Ee[0],W=Ee[1],Ve=(0,_.useState)(""),Me=(0,r.Z)(Ve,2),S=Me[0],L=Me[1],Xe=(0,_.useState)(!1),Ie=(0,r.Z)(Xe,2),Je=Ie[0],Ce=Ie[1],Qe=(0,_.useState)(""),De=(0,r.Z)(Qe,2),q=De[0],Ye=De[1],qe=(0,_.useState)(!1),ge=(0,r.Z)(qe,2),ea=ge[0],ee=ge[1],aa=(0,_.useState)(!1),he=(0,r.Z)(aa,2),K=he[0],ae=he[1],O=(0,j.YB)(),e=(0,Pe.UO)(),sa=function(){var l=(0,C.Z)(T().mark(function i(p){var M,g;return T().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return ce(""),f.prev=1,f.next=4,(0,ye.T9)(p);case 4:M=f.sent,g=M.data,g!=null&&g.token&&ce(g.token.icon),f.next=12;break;case 9:f.prev=9,f.t0=f.catch(1),console.error(f.t0);case 12:case"end":return f.stop()}},i,null,[[1,9]])}));return function(p){return l.apply(this,arguments)}}(),na=function(){var l=(0,C.Z)(T().mark(function i(p){var M,g,k;return T().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,be.Ay)(p);case 2:if(M=n.sent,!M.isEmpty){n.next=6;break}return o.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(p)}),n.abrupt("return");case 6:return g=M.toHuman(),Ne(g),n.next=10,(0,R.Vo)(p,(0,Be.Vm)("1"));case 10:k=n.sent,xe(k.toString()),b(!1);case 13:case"end":return n.stop()}},i)}));return function(p){return l.apply(this,arguments)}}();(0,_.useEffect)(function(){ue&&e!==null&&e!==void 0&&e.assetId&&(na(e==null?void 0:e.assetId),sa(e==null?void 0:e.assetId),W(""),L(""))},[e,ue]);var ra=function(){var l=(0,C.Z)(T().mark(function i(p,M){var g,k;return T().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!!P&&!!(P!=null&&P.keystore)&&!!(e!=null&&e.assetId))){n.next=37;break}b(!0),n.t0=m,n.next=n.t0==="ad3ToToken"?5:n.t0==="tokenToAd3"?20:35;break;case 5:return n.prev=5,n.next=8,(0,oe.Ht)(e==null?void 0:e.assetId,(0,c.HM)(S,18).toString(),(0,c.HM)(B,18).toString(),q,P==null?void 0:P.keystore,p,M);case 8:if(g=n.sent,b(!1),!(p&&M)){n.next=12;break}return n.abrupt("return",g);case 12:n.next=19;break;case 14:return n.prev=14,n.t1=n.catch(5),o.default.error({message:n.t1.message||n.t1,duration:null}),b(!1),n.abrupt("return");case 19:return n.abrupt("break",35);case 20:return n.prev=20,n.next=23,(0,oe.Ro)(e==null?void 0:e.assetId,(0,c.HM)(S,18).toString(),(0,c.HM)(B,18).toString(),q,P==null?void 0:P.keystore,p,M);case 23:if(k=n.sent,b(!1),!(p&&M)){n.next=27;break}return n.abrupt("return",k);case 27:n.next=34;break;case 29:return n.prev=29,n.t2=n.catch(20),o.default.error({message:n.t2.message||n.t2,duration:null}),b(!1),n.abrupt("return");case 34:return n.abrupt("break",35);case 35:n.next=39;break;case 37:o.default.error({key:"accessDenied",message:O.formatMessage({id:"error.accessDenied"}),duration:null}),b(!1);case 39:case"end":return n.stop()}},i,null,[[5,14],[20,29]])}));return function(p,M){return l.apply(this,arguments)}}(),se=(0,_.useCallback)(function(l){e!=null&&e.assetId&&(m==="ad3ToToken"&&(0,R.hM)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){L((0,c.mI)(i,18))}),m==="tokenToAd3"&&(0,R.__)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){L((0,c.mI)(i,18))}))},[e,m]),ne=(0,_.useCallback)(function(l){e!=null&&e.assetId&&(m==="tokenToAd3"&&(0,R.Vo)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){W((0,c.mI)(i,18))}),m==="ad3ToToken"&&(0,R.UG)(e==null?void 0:e.assetId,(0,c.HM)(l,18).toString()).then(function(i){W((0,c.mI)(i,18))}))},[e,m]),ta=(0,_.useCallback)(function(){var l=(0,c.mI)(E==null?void 0:E.free,18);W(l),se(l)},[E,m,se]),la=(0,_.useCallback)(function(){if(e!=null&&e.assetId&&A){var l,i=(0,c.mI)((l=A.get(e==null?void 0:e.assetId))===null||l===void 0?void 0:l.balance,18);L(i),ne(i)}},[m,e,A,ne]);return(0,_.useEffect)(function(){if(m==="ad3ToToken"){if(E!=null&&E.free&&B){ae((0,c.HM)(B,18)>BigInt(E.free));return}}else if(e!=null&&e.assetId&&A&&S){var l;ae((0,c.HM)(S,18)>BigInt((l=A.get(e==null?void 0:e.assetId))===null||l===void 0?void 0:l.balance));return}ae(!1)},[m,E,B,S,e,A]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.Z,{tip:O.formatMessage({id:"common.loading"}),spinning:Ge,wrapperClassName:V().spinContainer,children:(0,s.jsx)(G.Z,{className:V().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,s.jsxs)("div",{className:t().trade,children:[(0,s.jsx)(Ue,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:V().title,children:O.formatMessage({id:"creator.explorer.trade"})}),(0,s.jsxs)("div",{className:t().pairCoins,style:{flexFlow:m==="ad3ToToken"?"column":"column-reverse"},children:[(0,s.jsxs)("div",{className:t().pairCoinsItem,children:[(0,s.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,s.jsxs)("div",{className:t().pairCoin,children:[(0,s.jsx)(u.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,s.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,s.jsx)(N.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:B,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(i){W(i),se(i)}})]}),(0,s.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,s.jsxs)("span",{className:"".concat(t().balance," ").concat(m==="ad3ToToken"&&K?t().warning:""),children:[O.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,s.jsx)(le.Z,{value:E==null?void 0:E.free}),m==="ad3ToToken"&&K&&(0,s.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,s.jsx)(U.Z,{type:"link",size:"middle",className:t().maxButton,onClick:ta,children:O.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,s.jsx)(U.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,s.jsx)(ie.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){$e(m==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),W(""),L("")}}),(0,s.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,s.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,s.jsxs)("div",{className:t().pairCoin,onClick:function(){return ee(!0)},children:[D&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{src:Ke||"/images/default-avatar.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,s.jsx)("span",{className:t().pairCoinsItemLabel,children:D==null?void 0:D.symbol})]}),!D&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:t().pairCoinsItemText,children:"Select Asset"})}),(0,s.jsx)(ie.Z,{className:t().downIcon})]}),(0,s.jsx)(N.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:S,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(i){L(i),ne(i)}})]}),(0,s.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,s.jsxs)("span",{className:"".concat(t().balance," ").concat(m==="tokenToAd3"&&K?t().warning:""),children:[O.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,s.jsx)(_e.Z,{value:(X=(J=A.get((Q=e==null?void 0:e.assetId)!==null&&Q!==void 0?Q:""))===null||J===void 0?void 0:J.balance)!==null&&X!==void 0?X:"",symbol:D==null?void 0:D.symbol}),m==="tokenToAd3"&&K&&(0,s.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,s.jsx)(U.Z,{type:"link",size:"middle",className:t().maxButton,onClick:la,children:O.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,s.jsx)("div",{className:t().pairCoinsFlat,children:(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(_e.Z,{value:(0,c.HM)("1",18).toString(),symbol:D==null?void 0:D.symbol}),(0,s.jsx)("span",{children:"\u2248"}),(0,s.jsx)(le.Z,{value:Y!=null?Y:""})]})}),(0,s.jsx)(U.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!B||!S||K||!(e!=null&&e.assetId),onClick:function(){Ce(!0)},children:O.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,s.jsx)(Ae.Z,{visable:Je,setVisable:Ce,passphrase:q,setPassphrase:Ye,func:ra}),ea&&(0,s.jsx)(Se.Z,{onClose:function(){return ee(!1)},onSelectAsset:function(i){j.m8.push("/swap/".concat(i.id)),ee(!1)}})]})};Z.default=je},13580:function(w,Z,a){"use strict";a.d(Z,{Ay:function(){return F},f5:function(){return re},r7:function(){return U},L7:function(){return te},jd:function(){return N}});var x=a(11849),H=a(2824),y=a(3182),G=a(94043),I=a.n(G),F=function(){var h=(0,y.Z)(I().mark(function u(d){var o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.metadata(Number(d));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return h.apply(this,arguments)}}(),re=function(){var h=(0,y.Z)(I().mark(function u(d){var o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.asset(Number(d));case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return h.apply(this,arguments)}}(),U=function(){var h=(0,y.Z)(I().mark(function u(d){var o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.account.entries(d);case 2:return o=r.sent,r.abrupt("return",o);case 4:case"end":return r.stop()}},u)}));return function(d){return h.apply(this,arguments)}}(),te=function(){var h=(0,y.Z)(I().mark(function u(d,o){var C,r;return I().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,window.apiWs.query.assets.account(Number(o),d);case 2:if(C=v.sent,!C.isEmpty){v.next=5;break}return v.abrupt("return",null);case 5:return r=C.toHuman(),v.abrupt("return",r);case 7:case"end":return v.stop()}},u)}));return function(d,o){return h.apply(this,arguments)}}(),N=function(){var h=(0,y.Z)(I().mark(function u(){var d,o;return I().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,window.apiWs.query.assets.metadata.entries();case 2:return d=r.sent,o=(d!=null?d:[]).map(function($){var v=(0,H.Z)($,2),z=v[0],T=v[1],_=z.toHuman();return _?(0,x.Z)((0,x.Z)({},T.toHuman()),{},{id:_[0].replaceAll(",","")}):null}).filter(Boolean),r.abrupt("return",o);case 5:case"end":return r.stop()}},u)}));return function(){return h.apply(this,arguments)}}()}}]);
