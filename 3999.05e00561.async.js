(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[3999],{88379:function(E){E.exports={adDescription:"adDescription___1qX2s",descriptionText:"descriptionText___21qe0",tags:"tags___2J0ty",tag:"tag___3dxx1",posterSection:"posterSection___FTwKm",adPosterImg:"adPosterImg___3F4bU",mask:"mask___1VVY7",pinned:"pinned___1IYuf",infoText:"infoText___8FC9c",rewardRow:"rewardRow___3k5Cl",btnContainer:"btnContainer___3KEBm",rewardInfoMark:"rewardInfoMark___1uU9L",rewardInfo:"rewardInfo___1kYxW",kolIcon:"kolIcon___pxoGq",rewardAmount:"rewardAmount___33QEb",rewardNumber:"rewardNumber___3_Q6q",rewardToken:"rewardToken___xmoV-",claimedIcon:"claimedIcon___3oSaW",actionBtn:"actionBtn___1I28G",left:"left___3gepj",right:"right___3WH__",hoverHint:"hoverHint___1VT_2",hintIcon:"hintIcon___1ds5g",posterPlaceHolder:"posterPlaceHolder___JfgPn"}},12088:function(E){E.exports={bubble:"bubble___M976N",bubbleArrow:"bubbleArrow___1MZFm",back:"back___2eDua",front:"front___3vy9E",content:"content___1yQDr"}},55133:function(E){E.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(E){E.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},13999:function(E,T,e){"use strict";var te=e(20228),A=e(11382),f=e(22385),v=e(31097),K=e(74379),I=e(38648),z=e(34792),B=e(48086),U=e(3182),g=e(2824),ue=e(94043),C=e.n(ue),x=e(67294),X=e(88379),r=e.n(X),_e=e(20640),ie=e.n(_e),N=e(7085),b=e(43581),S=e(51625),oe=e(46656),i=e(2215),w=e(28986),de=e(28419),s=e(85893);function ce(k){var _,F,$,Q,t=k.ad,p=k.userDid,J=k.referrer,a=k.preview,M=a===void 0?!1:a,G=(0,b.tT)("currentUser"),j=G.wallet,q=(0,x.useState)(!1),L=(0,g.Z)(q,2),V=L[0],W=L[1],n=(0,x.useState)(!!t.claimed),ee=(0,g.Z)(n,2),y=ee[0],ae=ee[1],se=(0,x.useState)(!1),Z=(0,g.Z)(se,2),R=Z[0],ne=Z[1],re=(0,x.useState)(""),O=(0,g.Z)(re,2),le=O[0],P=O[1],Y=function(){var h=(0,U.Z)(C().mark(function m(o){var u,D;return C().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(W(!0),o&&t.link&&window.open(decodeURIComponent(t.link)),t.type!==w.Sg.CLOCK_IN){l.next=5;break}return ne(!0),l.abrupt("return");case 5:return l.prev=5,u={adId:t.adId,nftId:t.nftId,did:p,referrer:J,score:{tag:t.tag,score:o?t.score:"-5"}},l.next=9,fetch("".concat(S.Z.main.weeklySite,"api/pay"),{headers:{"content-type":"application/json"},body:JSON.stringify(u),method:"POST"});case 9:D=l.sent,W(!1),D.ok?ae(!0):B.default.error({content:"Network Error. Please try again later."}),l.next=19;break;case 14:l.prev=14,l.t0=l.catch(5),console.log("Ad claim error",l.t0),W(!1),B.default.error({content:"Network Error. Please try again later."});case 19:case"end":return l.stop()}},m,null,[[5,14]])}));return function(o){return h.apply(this,arguments)}}(),H=function(){var h=(0,U.Z)(C().mark(function m(o,u){var D;return C().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,(0,i.iG)(t.nftId,le,j==null?void 0:j.keystore,o,u);case 3:if(D=l.sent,!(o&&u)){l.next=6;break}return l.abrupt("return",D);case 6:ae(!0),W(!1),l.next=14;break;case 10:l.prev=10,l.t0=l.catch(0),I.default.error({message:l.t0.message||l.t0,duration:null}),W(!1);case 14:case"end":return l.stop()}},m,null,[[0,10]])}));return function(o,u){return h.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(de.Z,{children:[(0,s.jsxs)("div",{className:r().adDescription,children:[(0,s.jsx)("span",{className:r().descriptionText,children:(_=t.content)!==null&&_!==void 0?_:"View Ads. Get Paid."}),t.tag&&(0,s.jsx)("span",{className:r().tags,children:(0,s.jsxs)("span",{className:"tag",children:["#",t.tag]})})]}),!t.poster&&M&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:r().posterPlaceHolder,children:"Your poster goes here"})}),t.poster&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(A.Z,{spinning:V,indicator:(0,s.jsx)(N.Z,{style:{fontSize:24},spin:!0}),tip:"Claiming...",children:(0,s.jsxs)("div",{className:r().posterSection,children:[(0,s.jsx)("img",{src:t.poster,referrerPolicy:"no-referrer",className:r().adPosterImg}),(0,s.jsx)("div",{className:"".concat(r().mask," ").concat(y?r().pinned:""),children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:r().infoText,children:[y?"You have claimed":"You will be rewarded",(0,s.jsx)(v.Z,{title:"Rewards are calculated based on your DID preference score",children:(0,s.jsx)("span",{className:r().rewardInfoMark,children:(0,s.jsx)("i",{className:"fa-solid fa-circle-exclamation"})})})]}),(0,s.jsxs)("div",{className:"".concat(r().rewardRow),children:[(0,s.jsxs)("div",{className:"".concat(r().rewardInfo),children:[(0,s.jsx)("img",{referrerPolicy:"no-referrer",className:r().kolIcon,src:(F=t.kolIcon)!==null&&F!==void 0?F:"/images/logo-square-core.svg"}),(0,s.jsxs)("span",{className:r().rewardAmount,children:[(0,s.jsx)("span",{className:r().rewardNumber,children:($=t.rewardAmount)!==null&&$!==void 0?$:"300.00"}),(0,s.jsxs)("span",{className:r().rewardToken,children:[(Q=t.assetName)!==null&&Q!==void 0?Q:"XXX"," NFT Power"]})]})]}),y&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:r().claimedIcon,children:(0,s.jsx)("i",{className:"fa-solid fa-circle-check"})})})]}),(0,s.jsx)("div",{className:r().btnContainer,children:(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"".concat(r().actionBtn," ").concat(r().left),onClick:function(){b.m8.push("/swap/".concat(t.nftId))},children:"Buy more"}),(0,s.jsx)("div",{className:"".concat(r().actionBtn," ").concat(r().right),onClick:(0,U.Z)(C().mark(function h(){return C().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:ie()("".concat(window.location.origin,"/ad/?nftId=").concat(t.nftId,"&referrer=").concat(p)),I.default.success({message:"Referral link copied!"});case 2:case"end":return o.stop()}},h)})),children:"Share & Earn more"})]}),!y&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(s.Fragment,{children:[t.type===w.Sg.AD&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"".concat(r().actionBtn," ").concat(r().left),onClick:function(){!M&&Y(!1)},children:"Claim"}),(0,s.jsx)("div",{className:"".concat(r().actionBtn," ").concat(r().right),onClick:function(){!M&&Y(!0)},children:"Claim & Learn more"})]}),t.type===w.Sg.CLOCK_IN&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"".concat(r().actionBtn," ").concat(r().left," ").concat(r().right),onClick:function(){!M&&Y(!1)},children:"Claim"})})]})})]})})]})}),!y&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:r().hoverHint,children:(0,s.jsx)("div",{className:r().hintIcon,children:(0,s.jsx)("i",{className:"fa-solid fa-arrow-up-right-from-square"})})})})]})})})]}),R&&(0,s.jsx)(oe.Z,{visable:R,setVisable:ne,passphrase:le,setPassphrase:P,func:H})]})}T.Z=ce},28419:function(E,T,e){"use strict";var te=e(67294),A=e(12088),f=e.n(A),v=e(85893);function K(I){var z=I.children;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:f().bubble,children:[(0,v.jsx)("div",{className:"".concat(f().bubbleArrow," ").concat(f().front)}),(0,v.jsx)("div",{className:"".concat(f().bubbleArrow," ").concat(f().back)}),(0,v.jsx)("div",{className:f().content,children:z})]})})}T.Z=K},46656:function(E,T,e){"use strict";var te=e(71194),A=e(50146),f=e(47673),v=e(32787),K=e(22385),I=e(31097),z=e(17462),B=e(76772),U=e(57663),g=e(71577),ue=e(74379),C=e(38648),x=e(3182),X=e(2824),r=e(402),_e=e(3887),ie=e(94043),N=e.n(ie),b=e(67294),S=e(43581),oe=e(55133),i=e.n(oe),w=e(3548),de=e(68855),s=e(47832),ce=e(43955),k=e(51625),_=e(85893),F=_e.Z.Title,$=function(t){var p=t.visable,J=t.setVisable,a=t.passphrase,M=t.setPassphrase,G=t.func,j=t.changePassphrase,q=t.directSubmit,L=q===void 0?!1:q,V=(0,S.tT)("apiWs"),W=(0,S.tT)("currentUser"),n=W.wallet,ee=(0,S.tT)("balance"),y=ee.balance,ae=(0,b.useState)(!1),se=(0,X.Z)(ae,2),Z=se[0],R=se[1],ne=(0,b.useState)(),re=(0,X.Z)(ne,2),O=re[0],le=re[1],P=(0,S.YB)(),Y=function(o){M(o?o.target.value:"")},H=function(){var m=(0,x.Z)(N().mark(function o(){var u,D,c,l,me;return N().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(R(!0),n!=null&&n.passphrase&&M(n==null?void 0:n.passphrase),!((!a||a.length<6)&&!(n!=null&&n.passphrase))){d.next=5;break}return R(!1),d.abrupt("return");case 5:if(u=(n==null?void 0:n.passphrase)||a,!(u&&n!==null&&n!==void 0&&n.keystore)){d.next=16;break}if(D=(0,s.Gh)(u,n.keystore),D){d.next=13;break}return C.default.error({key:"passphraseError",message:P.formatMessage({id:"error.passphrase.error"}),duration:null}),M(""),R(!1),d.abrupt("return");case 13:c=new ce.ZP({type:"sr25519"}),l=c.addFromUri(D),me=l.address,n!=null&&n.account&&n.account!==me&&(localStorage.clear(),sessionStorage.clear(),window.location.href=k.Z.page.homePage);case 16:if(!G){d.next=25;break}return d.prev=17,d.next=20,G();case 20:d.next=25;break;case 22:d.prev=22,d.t0=d.catch(17),console.log("security modal submit func error fallback",d.t0);case 25:J(!1),R(!1);case 27:case"end":return d.stop()}},o,null,[[17,22]])}));return function(){return m.apply(this,arguments)}}(),h=function(){var m=(0,x.Z)(N().mark(function o(){var u;return N().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!!V&&!!n.account)){c.next=11;break}return c.next=3,G(!0,n.account);case 3:if(u=c.sent,!u){c.next=8;break}le(u.partialFee),c.next=11;break;case 8:if(j){c.next=11;break}return c.next=11,H();case 11:case"end":return c.stop()}},o)}));return function(){return m.apply(this,arguments)}}();return(0,b.useEffect)(function(){!!V&&!!(n!=null&&n.account)&&p&&!L&&h()},[V,n==null?void 0:n.account,p,L]),(0,b.useEffect)(function(){!!(n!=null&&n.passphrase)&&p&&!j&&M(n==null?void 0:n.passphrase)},[n==null?void 0:n.passphrase,a,p,j]),(0,b.useEffect)(function(){a&&p&&L&&H()},[a,p,L]),(0,_.jsxs)(A.Z,{title:(0,_.jsx)(F,{level:3,children:P.formatMessage({id:"modal.security.title"})}),closable:!1,className:i().modal,centered:!0,visible:p,width:400,footer:(0,_.jsxs)("div",{className:i().buttons,children:[(0,_.jsx)(g.Z,{type:"text",shape:"round",size:"large",className:i().button,onClick:function(){J(!1),window.location.reload()},loading:Z,children:P.formatMessage({id:"common.decline"})}),(0,_.jsx)(g.Z,{type:"primary",shape:"round",size:"large",className:i().button,onClick:function(){H()},disabled:!a||a.length<6,loading:Z,children:P.formatMessage({id:"common.confirm"})})]}),children:[(0,_.jsxs)("div",{className:i().confirmContainer,children:[!!O&&!!(O!=null&&O.toString())>y.free&&(0,_.jsx)(B.Z,{description:P.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:i().alertContainer}),!!O&&(0,_.jsxs)("div",{className:i().field,children:[(0,_.jsxs)("div",{className:i().labal,children:[P.formatMessage({id:"modal.security.gas"}),(0,_.jsxs)("span",{className:i().small,children:["(",P.formatMessage({id:"modal.security.estimated"}),")"]}),(0,_.jsx)(I.Z,{placement:"bottom",title:P.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,_.jsx)(de.Z,{className:i().labalIcon})})]}),(0,_.jsx)("div",{className:i().value,children:(0,_.jsx)(w.Z,{value:O,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(n!=null&&n.passphrase)||j)&&(0,_.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,_.jsxs)("div",{className:i().codeInput,children:[(0,_.jsxs)("div",{className:i().verifyForm,children:[(0,_.jsx)("span",{className:(a==null?void 0:a.slice(0))&&!(a!=null&&a.slice(1,5))&&i().highLight,children:a==null?void 0:a.slice(0,1).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(a==null?void 0:a.slice(1))&&!(a!=null&&a.slice(2,5))&&i().highLight,children:a==null?void 0:a.slice(1,2).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(a==null?void 0:a.slice(2,3))&&!(a!=null&&a.slice(3,5))&&i().highLight,children:a==null?void 0:a.slice(2,3).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(a==null?void 0:a.slice(3,4))&&!(a!=null&&a.slice(4,5))&&i().highLight,children:a==null?void 0:a.slice(3,4).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(a==null?void 0:a.slice(4,5))&&!(a!=null&&a.slice(5))&&i().highLight,children:a==null?void 0:a.slice(4,5).replace(/[^]/,"\u2731")}),(0,_.jsx)("span",{className:(a==null?void 0:a.slice(5))&&i().highLight,children:a==null?void 0:a.slice(5).replace(/[^]/,"\u2731")})]}),(0,_.jsx)(v.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:i().verifyInput,onChange:Y,value:a,disabled:Z,maxLength:6,visibilityToggle:!1})]})})]})};T.Z=$},3548:function(E,T,e){"use strict";var te=e(67294),A=e(31639),f=e.n(A),v=e(96534),K=e(85893),I=function(B){var U=B.value,g=B.style;return(0,K.jsxs)("div",{className:f().ad3,style:g,children:[U?(0,v.MP)(U):"--",(0,K.jsx)("span",{className:f().unit,children:"\xA0$AD3"})]})};T.Z=I}}]);
