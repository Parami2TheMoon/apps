(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{44019:function(k){k.exports={trade:"trade___5DCR_",pairCoins:"pairCoins___30AFB",pairCoinsItem:"pairCoinsItem___3j3Cy",tokenCoin:"tokenCoin___Rj0cZ",pairCoin:"pairCoin___1fXNK",downIcon:"downIcon___x0UKv",pairCoinsSelect:"pairCoinsSelect___1Mxk8",pairCoinsItemIcon:"pairCoinsItemIcon___2cM1U",pairCoinsItemLabel:"pairCoinsItemLabel___2VXNO",pairCoinsItemText:"pairCoinsItemText___2P6QM",pairCoinsItemInput:"pairCoinsItemInput___2Z-fh",pairCoinsBalance:"pairCoinsBalance___2quET",balance:"balance___gTvLr",warning:"warning___3GZFj",warningText:"warningText___1yrSa",maxButton:"maxButton___k7yah",pairCoinsSwitchButton:"pairCoinsSwitchButton___3ewlN",pairCoinsFlat:"pairCoinsFlat___3k2iZ",submitButton:"submitButton___qNSug"}},32177:function(k){k.exports={container:"container___1ImOP"}},17290:function(k,V,s){"use strict";s.r(V),s.d(V,{default:function(){return Be}});var ra=s(58024),pe=s(39144),i=s(67294),fe=s(51615),M=s(43581),Se=s(55909),O=s.n(Se),he=s(32177),ge=s.n(he),la=s(49111),Ce=s(19650),ia=s(57663),B=s(71577),oa=s(77883),R=s(70507),ua=s(12968),X=s(62462),ca=s(74379),w=s(38648),H=s(3182),S=s(2824),da=s(402),ye=s(3887),Ie=s(94043),C=s.n(Ie),Te=s(44019),n=s.n(Te),G=s(13580),je=s(32689),N=s(33044),Ae=s(96534),K=s(1615),Q=s(3548),Y=s(57254),J=s(57651),xe=s(46656),Me=s(86326),o=s(59749),e=s(85893),Ne=ye.Z.Title;function Ze(A){var r=A.assetId,P=A.onSelectAsset,F=A.onSwapped,q=A.canSelectAsset,we=q===void 0?!0:q,z=A.initTokenNumber,y=(0,M.YB)(),_=(0,M.tT)("apiWs"),He=(0,M.tT)("currentUser"),h=He.wallet,Fe=(0,M.tT)("balance"),v=Fe.balance,De=(0,i.useState)(""),ee=(0,S.Z)(De,2),Pe=ee[0],ae=ee[1],ze=(0,i.useState)(),se=(0,S.Z)(ze,2),g=se[0],Ee=se[1],Le=(0,i.useState)(),ne=(0,S.Z)(Le,2),E=ne[0],We=ne[1],$e=(0,i.useState)(""),te=(0,S.Z)($e,2),Z=te[0],Ue=te[1],Ve=(0,i.useState)("ad3ToToken"),re=(0,S.Z)(Ve,2),u=re[0],Oe=re[1],Re=(0,i.useState)(""),le=(0,S.Z)(Re,2),I=le[0],x=le[1],Xe=(0,i.useState)(""),ie=(0,S.Z)(Xe,2),T=ie[0],j=ie[1],Ge=(0,i.useState)(!1),oe=(0,S.Z)(Ge,2),Ke=oe[0],ue=oe[1],Qe=(0,i.useState)(""),ce=(0,S.Z)(Qe,2),L=ce[0],Ye=ce[1],Je=(0,i.useState)(!1),de=(0,S.Z)(Je,2),qe=de[0],W=de[1],_e=(0,i.useState)(!1),me=(0,S.Z)(_e,2),b=me[0],$=me[1],ea=function(){var l=(0,H.Z)(C().mark(function t(c){var d,p;return C().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return ae(""),m.prev=1,m.next=4,(0,je.T9)(c);case 4:d=m.sent,p=d.data,p!=null&&p.token&&ae(p.token.icon),m.next=12;break;case 9:m.prev=9,m.t0=m.catch(1),console.error(m.t0);case 12:case"end":return m.stop()}},t,null,[[1,9]])}));return function(c){return l.apply(this,arguments)}}(),aa=function(){var l=(0,H.Z)(C().mark(function t(c){var d,p,f;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,G.Ay)(c);case 2:if(d=a.sent,!d.isEmpty){a.next=6;break}return w.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(c)}),a.abrupt("return");case 6:return p=d.toHuman(),Ee(p),a.next=10,(0,N.Vo)(c,(0,Ae.Vm)("1"));case 10:f=a.sent,We(f.toString());case 12:case"end":return a.stop()}},t)}));return function(c){return l.apply(this,arguments)}}(),ve=function(){var l=(0,H.Z)(C().mark(function t(c){var d;return C().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,G.x4)(c,h.account);case 2:d=f.sent,Ue(d);case 4:case"end":return f.stop()}},t)}));return function(c){return l.apply(this,arguments)}}();(0,i.useEffect)(function(){_&&r&&(aa(r),ve(r),ea(r),x(""),z?(j(z),D(z)):j(""))},[r,_]);var sa=function(){var l=(0,H.Z)(C().mark(function t(c,d){var p,f;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!!h&&!!(h!=null&&h.keystore)&&!!r)){a.next=34;break}a.t0=u,a.next=a.t0==="ad3ToToken"?4:a.t0==="tokenToAd3"?17:30;break;case 4:return a.prev=4,a.next=7,(0,K.Ht)(r,(0,o.HM)(T,18).toString(),(0,o.HM)(I,18).toString(),L,h==null?void 0:h.keystore,c,d);case 7:if(p=a.sent,!(c&&d)){a.next=10;break}return a.abrupt("return",p);case 10:a.next=16;break;case 12:return a.prev=12,a.t1=a.catch(4),w.default.error({message:a.t1.message||a.t1,duration:null}),a.abrupt("return");case 16:return a.abrupt("break",30);case 17:return a.prev=17,a.next=20,(0,K.Ro)(r,(0,o.HM)(T,18).toString(),(0,o.HM)(I,18).toString(),L,h==null?void 0:h.keystore,c,d);case 20:if(f=a.sent,!(c&&d)){a.next=23;break}return a.abrupt("return",f);case 23:a.next=29;break;case 25:return a.prev=25,a.t2=a.catch(17),w.default.error({message:a.t2.message||a.t2,duration:null}),a.abrupt("return");case 29:return a.abrupt("break",30);case 30:ve(r),F&&F(),a.next=35;break;case 34:w.default.error({key:"accessDenied",message:y.formatMessage({id:"error.accessDenied"}),duration:null});case 35:case"end":return a.stop()}},t,null,[[4,12],[17,25]])}));return function(c,d){return l.apply(this,arguments)}}(),U=(0,i.useCallback)(function(l){r&&(u==="ad3ToToken"&&(0,N.hM)(r,(0,o.HM)(l,18).toString()).then(function(t){j((0,o.mI)(t,18))}),u==="tokenToAd3"&&(0,N.__)(r,(0,o.HM)(l,18).toString()).then(function(t){j((0,o.mI)(t,18))}))},[r,u]),D=(0,i.useCallback)(function(l){r&&(u==="tokenToAd3"&&(0,N.Vo)(r,(0,o.HM)(l,18).toString()).then(function(t){x((0,o.mI)(t,18))}),u==="ad3ToToken"&&(0,N.UG)(r,(0,o.HM)(l,18).toString()).then(function(t){x((0,o.mI)(t,18))}))},[r,u]),na=(0,i.useCallback)(function(){var l=(0,o.mI)(v==null?void 0:v.free,18);x(l),U(l)},[v,u,U]),ta=(0,i.useCallback)(function(){if(r){var l=(0,o.mI)(Z,18);j(l),D(l)}},[u,r,Z,D]);return(0,i.useEffect)(function(){if(u==="ad3ToToken"){if(v!=null&&v.free&&I){$((0,o.HM)(I,18)>BigInt(v.free));return}}else if(r&&T){$((0,o.HM)(T,18)>BigInt(Z));return}$(!1)},[u,v,I,T,r,Z]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:n().trade,children:[(0,e.jsx)(Ne,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:O().title,children:y.formatMessage({id:"creator.explorer.trade"})}),(0,e.jsxs)("div",{className:n().pairCoins,style:{flexFlow:u==="ad3ToToken"?"column":"column-reverse"},children:[(0,e.jsxs)("div",{className:n().pairCoinsItem,children:[(0,e.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:n().pairCoin,children:[(0,e.jsx)(X.Z,{src:"/images/logo-round-core.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,e.jsx)("span",{className:n().pairCoinsItemLabel,children:"AD3"})]}),(0,e.jsx)(R.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:I,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(t){x(t),U(t)}})]}),(0,e.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:"".concat(n().balance," ").concat(u==="ad3ToToken"&&b?n().warning:""),children:[y.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(Q.Z,{value:v==null?void 0:v.free}),u==="ad3ToToken"&&b&&(0,e.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,e.jsx)(B.Z,{type:"link",size:"middle",className:n().maxButton,onClick:na,children:y.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,e.jsx)(B.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,e.jsx)(Y.Z,{}),className:n().pairCoinsSwitchButton,onClick:function(){Oe(u==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),x(""),j("")}}),(0,e.jsxs)("div",{className:"".concat(n().pairCoinsItem," ").concat(n().tokenCoin),children:[(0,e.jsxs)("div",{className:n().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:n().pairCoin,onClick:function(){return we&&W(!0)},children:[g&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X.Z,{src:Pe||"/images/default-avatar.svg",preview:!1,className:n().pairCoinsItemIcon}),(0,e.jsx)("span",{className:n().pairCoinsItemLabel,children:g==null?void 0:g.symbol})]}),!g&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("span",{className:n().pairCoinsItemText,children:"Select Asset"})}),(0,e.jsx)(Y.Z,{className:n().downIcon})]}),(0,e.jsx)(R.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:T,className:n().pairCoinsItemInput,stringMode:!0,onChange:function(t){j(t),D(t)}})]}),(0,e.jsxs)("div",{className:n().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:"".concat(n().balance," ").concat(u==="tokenToAd3"&&b?n().warning:""),children:[y.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(J.Z,{value:Z,symbol:g==null?void 0:g.symbol}),u==="tokenToAd3"&&b&&(0,e.jsx)("span",{className:n().warningText,children:"(insufficient balance)"})]}),(0,e.jsx)(B.Z,{type:"link",size:"middle",className:n().maxButton,onClick:ta,children:y.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:n().pairCoinsFlat,children:(0,e.jsxs)(Ce.Z,{children:[(0,e.jsx)(J.Z,{value:(0,o.HM)("1",18).toString(),symbol:g==null?void 0:g.symbol}),(0,e.jsx)("span",{children:"\u2248"}),(0,e.jsx)(Q.Z,{value:E!=null?E:""})]})}),(0,e.jsx)(B.Z,{block:!0,type:"primary",size:"large",shape:"round",className:n().submitButton,disabled:!I||!T||b||!r,onClick:function(){ue(!0)},children:y.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]}),(0,e.jsx)(xe.Z,{visable:Ke,setVisable:ue,passphrase:L,setPassphrase:Ye,func:sa}),qe&&(0,e.jsx)(Me.Z,{onClose:function(){return W(!1)},onSelectAsset:function(t){W(!1),P&&P(t)}})]})}var be=Ze,ke=function(){var r=(0,fe.UO)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:ge().container,children:(0,e.jsx)(pe.Z,{className:O().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,e.jsx)(be,{assetId:r==null?void 0:r.assetId,onSelectAsset:function(F){M.m8.push("/swap/".concat(F.id))}})})})})},Be=ke}}]);
