(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[9811],{55133:function(p){p.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(p){p.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},66620:function(p){p.exports={visaCard:"visaCard___bphzJ",subTitle:"subTitle___1LQU-",buttons:"buttons___2add8",or:"or___2GkXi",button:"button___1CjWQ"}},46656:function(p,U,e){"use strict";var oe=e(71194),Z=e(50146),J=e(47673),I=e(32787),H=e(22385),F=e(31097),de=e(17462),A=e(76772),Y=e(57663),L=e(71577),q=e(74379),Q=e(38648),ee=e(3182),w=e(2824),ue=e(402),W=e(3887),se=e(94043),B=e.n(se),f=e(67294),D=e(43581),ae=e(55133),t=e.n(ae),le=e(3548),h=e(68855),k=e(47832),te=e(43955),_=e(51625),l=e(85893),ne=W.Z.Title,ce=function(n){var E=n.visable,G=n.setVisable,s=n.passphrase,P=n.setPassphrase,z=n.func,y=n.changePassphrase,V=n.directSubmit,K=V===void 0?!1:V,c=(0,D.tT)("apiWs"),_e=(0,D.tT)("currentUser"),a=_e.wallet,C=(0,D.tT)("balance"),$=C.balance,ie=(0,f.useState)(!1),R=(0,w.Z)(ie,2),b=R[0],j=R[1],x=(0,f.useState)(),g=(0,w.Z)(x,2),v=g[0],O=g[1],u=(0,D.YB)(),X=function(o){P(o?o.target.value:"")},S=function(){var M=(0,ee.Z)(B().mark(function o(){var m,T,i,re,d;return B().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(j(!0),a!=null&&a.passphrase&&P(a==null?void 0:a.passphrase),!((!s||s.length<6)&&!(a!=null&&a.passphrase))){r.next=5;break}return j(!1),r.abrupt("return");case 5:if(m=(a==null?void 0:a.passphrase)||s,!(m&&a!==null&&a!==void 0&&a.keystore)){r.next=16;break}if(T=(0,k.Gh)(m,a.keystore),T){r.next=13;break}return Q.default.error({key:"passphraseError",message:u.formatMessage({id:"error.passphrase.error"}),duration:null}),P(""),j(!1),r.abrupt("return");case 13:i=new te.ZP({type:"sr25519"}),re=i.addFromUri(T),d=re.address,a!=null&&a.account&&a.account!==d&&(localStorage.clear(),sessionStorage.clear(),window.location.href=_.Z.page.homePage);case 16:if(!z){r.next=25;break}return r.prev=17,r.next=20,z();case 20:r.next=25;break;case 22:r.prev=22,r.t0=r.catch(17),console.log("security modal submit func error fallback",r.t0);case 25:G(!1),j(!1);case 27:case"end":return r.stop()}},o,null,[[17,22]])}));return function(){return M.apply(this,arguments)}}(),N=function(){var M=(0,ee.Z)(B().mark(function o(){var m;return B().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!!c&&!!a.account)){i.next=11;break}return i.next=3,z(!0,a.account);case 3:if(m=i.sent,!m){i.next=8;break}O(m.partialFee),i.next=11;break;case 8:if(y){i.next=11;break}return i.next=11,S();case 11:case"end":return i.stop()}},o)}));return function(){return M.apply(this,arguments)}}();return(0,f.useEffect)(function(){!!c&&!!(a!=null&&a.account)&&E&&!K&&N()},[c,a==null?void 0:a.account,E,K]),(0,f.useEffect)(function(){!!(a!=null&&a.passphrase)&&E&&!y&&P(a==null?void 0:a.passphrase)},[a==null?void 0:a.passphrase,s,E,y]),(0,f.useEffect)(function(){s&&E&&K&&S()},[s,E,K]),(0,l.jsxs)(Z.Z,{title:(0,l.jsx)(ne,{level:3,children:u.formatMessage({id:"modal.security.title"})}),closable:!1,className:t().modal,centered:!0,visible:E,width:400,footer:(0,l.jsxs)("div",{className:t().buttons,children:[(0,l.jsx)(L.Z,{type:"text",shape:"round",size:"large",className:t().button,onClick:function(){G(!1),window.location.reload()},loading:b,children:u.formatMessage({id:"common.decline"})}),(0,l.jsx)(L.Z,{type:"primary",shape:"round",size:"large",className:t().button,onClick:function(){S()},disabled:!s||s.length<6,loading:b,children:u.formatMessage({id:"common.confirm"})})]}),children:[(0,l.jsxs)("div",{className:t().confirmContainer,children:[!!v&&!!(v!=null&&v.toString())>$.free&&(0,l.jsx)(A.Z,{description:u.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:t().alertContainer}),!!v&&(0,l.jsxs)("div",{className:t().field,children:[(0,l.jsxs)("div",{className:t().labal,children:[u.formatMessage({id:"modal.security.gas"}),(0,l.jsxs)("span",{className:t().small,children:["(",u.formatMessage({id:"modal.security.estimated"}),")"]}),(0,l.jsx)(F.Z,{placement:"bottom",title:u.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,l.jsx)(h.Z,{className:t().labalIcon})})]}),(0,l.jsx)("div",{className:t().value,children:(0,l.jsx)(le.Z,{value:v,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(a!=null&&a.passphrase)||y)&&(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,l.jsxs)("div",{className:t().codeInput,children:[(0,l.jsxs)("div",{className:t().verifyForm,children:[(0,l.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&t().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&t().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&t().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&t().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,l.jsx)("span",{className:(s==null?void 0:s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,l.jsx)(I.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:t().verifyInput,onChange:X,value:s,disabled:b,maxLength:6,visibilityToggle:!1})]})})]})};U.Z=ce},3548:function(p,U,e){"use strict";var oe=e(67294),Z=e(31639),J=e.n(Z),I=e(96534),H=e(85893),F=function(A){var Y=A.value,L=A.style;return(0,H.jsxs)("div",{className:J().ad3,style:L,children:[Y?(0,I.MP)(Y):"--",(0,H.jsx)("span",{className:J().unit,children:"\xA0$AD3"})]})};U.Z=F},62066:function(p,U,e){"use strict";e.r(U);var oe=e(58024),Z=e(39144),J=e(57663),I=e(71577),H=e(17462),F=e(76772),de=e(74379),A=e(38648),Y=e(34792),L=e(48086),q=e(3182),Q=e(2824),ee=e(402),w=e(3887),ue=e(94043),W=e.n(ue),se=e(46656),B=e(65309),f=e(67294),D=e(43581),ae=e(55909),t=e.n(ae),le=e(66620),h=e.n(le),k=e(59749),te=e(47832),_=e(85893),l=w.Z.Title,ne=function(){var ve=(0,D.tT)("currentUser"),n=ve.wallet,E=(0,f.useState)(!1),G=(0,Q.Z)(E,2),s=G[0],P=G[1],z=(0,f.useState)(""),y=(0,Q.Z)(z,2),V=y[0],K=y[1],c=(0,D.YB)(),_e=D.m8.location.query,a=_e,C=a.audience,$=a.scope,ie=$!=null?$:"",R=ie.indexOf("sign")>-1,b=function(){var x=(0,q.Z)(W().mark(function g(v,O){var u,X,S,N,M,o,m,T,i;return W().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(v&&O)){d.next=2;break}return d.abrupt("return");case 2:if(!(!!n&&!!(n!=null&&n.keystore))){d.next=23;break}if(u=Date.now()/1e3|0,X=JSON.stringify({alg:R?"SrDSA":"none",typ:"JWT"}),S=JSON.stringify({iss:window.location.origin,sub:n==null?void 0:n.account,aud:C,iat:u,exp:u+30}),N="".concat((0,k.tH)(X),".").concat((0,k.tH)(S)),R){d.next=11;break}return window.opener.postMessage("".concat(N,"."),C),window.close(),d.abrupt("return");case 11:if(M=new B.Y({type:"sr25519"}),o=(0,te.Gh)(V,n==null?void 0:n.keystore),!(o==null||!o)){d.next=16;break}return L.default.error(c.formatMessage({id:"error.passphrase.error"})),d.abrupt("return");case 16:m=M.createFromUri(o),T=m.sign(N),i="".concat(N,".").concat((0,k.tH)(T)),window.opener.postMessage(i,C),window.close(),d.next=24;break;case 23:A.default.error({key:"accessDenied",message:c.formatMessage({id:"error.accessDenied"}),duration:null});case 24:case"end":return d.stop()}},g)}));return function(v,O){return x.apply(this,arguments)}}(),j=function(){var x=(0,q.Z)(W().mark(function g(){return W().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:window.opener.postMessage("eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.e30.",C),window.close();case 2:case"end":return O.stop()}},g)}));return function(){return x.apply(this,arguments)}}();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:t().mainBgContainer,style:{height:"100vh"},children:(0,_.jsxs)("div",{className:t().pageContainer,children:[(0,_.jsxs)(Z.Z,{className:h().visaCard,children:[(0,_.jsx)(l,{level:2,style:{fontWeight:"bold",textAlign:"center"},children:c.formatMessage({id:"visa.title"})}),(0,_.jsx)("span",{className:h().subTitle,children:c.formatMessage({id:"visa.subtitle"})}),(0,_.jsx)(F.Z,{style:{textAlign:"center",marginTop:50},message:"Audience",description:C,type:"info"}),(0,_.jsxs)("div",{className:h().buttons,children:[(0,_.jsx)(I.Z,{type:"primary",shape:"round",size:"large",className:h().button,style:{backgroundImage:"linear-gradient(-225deg, #FE2105 0%, #FF5B00 38%, #96E9EA 100%)"},onClick:function(){R?P(!0):b()},children:c.formatMessage({id:"visa.stamp"})}),(0,_.jsx)("span",{className:h().or,children:c.formatMessage({id:"index.or"})}),(0,_.jsx)(I.Z,{shape:"round",size:"large",className:h().button,onClick:j,children:c.formatMessage({id:"visa.decline"})})]})]}),(0,_.jsx)("img",{src:"/images/logo-text-black.svg",style:{display:"block",width:150,opacity:.3,marginBottom:20,marginTop:50}})]})}),(0,_.jsx)(se.Z,{visable:s,setVisable:P,passphrase:V,setPassphrase:K,func:b})]})};U.default=ne}}]);
