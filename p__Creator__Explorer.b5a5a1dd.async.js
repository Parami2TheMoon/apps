(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[8172],{55133:function(ge){ge.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},2752:function(ge){ge.exports={claimInfoContainer:"claimInfoContainer___2QBl-"}},90802:function(ge){ge.exports={dashboard:"dashboard___1yzjn",header:"header___7HFGw",buttons:"buttons____mn0V",button:"button___2bNYM",confirm:"confirm___14R24",topIcon:"topIcon___lcz8T",title:"title___3OHiQ",field:"field___1rYhg",value:"value___VpweH",notUser:"notUser___1H3wh",desc:"desc___3002O",buttonImport:"buttonImport___1UVlX",notSupport:"notSupport___3AII_",icon:"icon___2lOpA",text:"text___2HCAz",loading:"loading___38OsL",loadingTip:"loadingTip___2K2wM",avatar:"avatar___1Itlz",rotate:"rotate___3cdkL",image_blur:"image_blur___1JtdU"}},69764:function(ge,_e,e){"use strict";var ja=e(71194),Ae=e(50146),ba=e(57663),ee=e(71577),Oa=e(402),De=e(3887),_=e(67294),Je=e(55133),N=e.n(Je),c=e(54549),ce=e(85893),o=De.Z.Title,i=function(ae){var Qe=ae.visable,Ie=ae.title,ye=ae.content,k=ae.footer,ve=ae.close,v=ae.bodyStyle,r=ae.width;return(0,ce.jsx)(Ae.Z,{title:Ie?(0,ce.jsx)(o,{level:5,className:N().title,children:Ie}):null,closable:!!ve,closeIcon:(0,ce.jsx)(ce.Fragment,{children:(0,ce.jsx)(ee.Z,{shape:"circle",size:"middle",type:"ghost",icon:(0,ce.jsx)(c.Z,{onClick:ve})})}),className:N().modal,centered:!0,visible:Qe,width:r!=null?r:650,footer:k,bodyStyle:v,children:ye})};_e.Z=i},46656:function(ge,_e,e){"use strict";var ja=e(71194),Ae=e(50146),ba=e(47673),ee=e(32787),Oa=e(22385),De=e(31097),_=e(17462),Je=e(76772),N=e(57663),c=e(71577),ce=e(74379),o=e(38648),i=e(3182),Xe=e(2824),ae=e(402),Qe=e(3887),Ie=e(94043),ye=e.n(Ie),k=e(67294),ve=e(43581),v=e(55133),r=e.n(v),xe=e(3548),ua=e(68855),ca=e(47832),qe=e(55347),ea=e(51625),f=e(85893),va=Qe.Z.Title,ma=function(Me){var H=Me.visable,aa=Me.setVisable,s=Me.passphrase,V=Me.setPassphrase,Ue=Me.func,Ee=Me.changePassphrase,ke=(0,ve.tT)("apiWs"),Da=(0,ve.tT)("currentUser"),l=Da.wallet,We=(0,ve.tT)("balance"),ha=We.balance,pa=(0,k.useState)(!1),sa=(0,Xe.Z)(pa,2),Te=sa[0],a=sa[1],ga=(0,k.useState)(),ta=(0,Xe.Z)(ga,2),Ce=ta[0],ya=ta[1],re=(0,ve.YB)(),W=function(me){V(me?me.target.value:"")},ra=function(){var ne=(0,i.Z)(ye().mark(function me(){var le,Re,B,na,la;return ye().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(a(!0),l!=null&&l.passphrase&&V(l==null?void 0:l.passphrase),!((!s||s.length<6)&&!(l!=null&&l.passphrase))){G.next=5;break}return a(!1),G.abrupt("return");case 5:if(le=(l==null?void 0:l.passphrase)||s,!(le&&l!==null&&l!==void 0&&l.keystore)){G.next=16;break}if(Re=(0,ca.Gh)(le,l.keystore),Re){G.next=13;break}return o.default.error({key:"passphraseError",message:re.formatMessage({id:"error.passphrase.error"}),duration:null}),V(""),a(!1),G.abrupt("return");case 13:B=new qe.ZP({type:"sr25519"}),na=B.addFromUri(Re),la=na.address,l!=null&&l.account&&l.account!==la&&(localStorage.clear(),sessionStorage.clear(),window.location.href=ea.Z.page.homePage);case 16:if(!Ue){G.next=19;break}return G.next=19,Ue();case 19:aa(!1),a(!1);case 21:case"end":return G.stop()}},me)}));return function(){return ne.apply(this,arguments)}}(),Ke=function(){var ne=(0,i.Z)(ye().mark(function me(){var le;return ye().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(!!ke&&!!l.account)){B.next=11;break}return B.next=3,Ue(!0,l.account);case 3:if(le=B.sent,!le){B.next=8;break}ya(le.partialFee),B.next=11;break;case 8:if(Ee){B.next=11;break}return B.next=11,ra();case 11:case"end":return B.stop()}},me)}));return function(){return ne.apply(this,arguments)}}();return(0,k.useEffect)(function(){!!ke&&!!(l!=null&&l.account)&&H&&Ke()},[ke,l==null?void 0:l.account,H]),(0,k.useEffect)(function(){!!(l!=null&&l.passphrase)&&H&&!Ee&&V(l==null?void 0:l.passphrase)},[l==null?void 0:l.passphrase,s,H,Ee]),(0,f.jsxs)(Ae.Z,{title:(0,f.jsx)(va,{level:3,children:re.formatMessage({id:"modal.security.title"})}),closable:!1,className:r().modal,centered:!0,visible:H,width:400,footer:(0,f.jsxs)("div",{className:r().buttons,children:[(0,f.jsx)(c.Z,{type:"text",shape:"round",size:"large",className:r().button,onClick:function(){aa(!1),window.location.reload()},loading:Te,children:re.formatMessage({id:"common.decline"})}),(0,f.jsx)(c.Z,{type:"primary",shape:"round",size:"large",className:r().button,onClick:function(){ra()},disabled:!s||s.length<6,loading:Te,children:re.formatMessage({id:"common.confirm"})})]}),children:[(0,f.jsxs)("div",{className:r().confirmContainer,children:[!!Ce&&!!(Ce!=null&&Ce.toString())>ha.free&&(0,f.jsx)(Je.Z,{description:re.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:r().alertContainer}),!!Ce&&(0,f.jsxs)("div",{className:r().field,children:[(0,f.jsxs)("div",{className:r().labal,children:[re.formatMessage({id:"modal.security.gas"}),(0,f.jsxs)("span",{className:r().small,children:["(",re.formatMessage({id:"modal.security.estimated"}),")"]}),(0,f.jsx)(De.Z,{placement:"bottom",title:re.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,f.jsx)(ua.Z,{className:r().labalIcon})})]}),(0,f.jsx)("div",{className:r().value,children:(0,f.jsx)(xe.Z,{value:Ce,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),(!(l!=null&&l.passphrase)||Ee)&&(0,f.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,f.jsxs)("div",{className:r().codeInput,children:[(0,f.jsxs)("div",{className:r().verifyForm,children:[(0,f.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&r().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&r().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&r().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&r().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&r().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,f.jsx)("span",{className:(s==null?void 0:s.slice(5))&&r().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,f.jsx)(ee.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:r().verifyInput,onChange:W,value:s,disabled:Te,maxLength:6,visibilityToggle:!1})]})})]})};_e.Z=ma},96870:function(ge,_e,e){"use strict";e.r(_e),e.d(_e,{default:function(){return Aa}});var ja=e(48736),Ae=e(27049),ba=e(57663),ee=e(71577),Oa=e(12968),De=e(62462),_=e(3182),Je=e(74379),N=e(38648),c=e(2824),ce=e(94043),o=e.n(ce),i=e(67294),Xe=e(58024),ae=e(39144),Qe=e(34792),Ie=e(48086),ye=e(55909),k=e.n(ye),ve=e(37550),v=e.n(ve),r=e(43581),xe=e(28991),ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M752 664c-28.5 0-54.8 10-75.4 26.7L469.4 540.8a160.68 160.68 0 000-57.6l207.2-149.9C697.2 350 723.5 360 752 360c66.2 0 120-53.8 120-120s-53.8-120-120-120-120 53.8-120 120c0 11.6 1.6 22.7 4.7 33.3L439.9 415.8C410.7 377.1 364.3 352 312 352c-88.4 0-160 71.6-160 160s71.6 160 160 160c52.3 0 98.7-25.1 127.9-63.8l196.8 142.5c-3.1 10.6-4.7 21.8-4.7 33.3 0 66.2 53.8 120 120 120s120-53.8 120-120-53.8-120-120-120zm0-476c28.7 0 52 23.3 52 52s-23.3 52-52 52-52-23.3-52-52 23.3-52 52-52zM312 600c-48.5 0-88-39.5-88-88s39.5-88 88-88 88 39.5 88 88-39.5 88-88 88zm440 236c-28.7 0-52-23.3-52-52s23.3-52 52-52 52 23.3 52 52-23.3 52-52 52z"}}]},name:"share-alt",theme:"outlined"},ca=ua,qe=e(27029),ea=function(E,P){return i.createElement(qe.Z,(0,xe.Z)((0,xe.Z)({},E),{},{ref:P,icon:ca}))};ea.displayName="ShareAltOutlined";var f=i.forwardRef(ea),va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M911.5 700.7a8 8 0 00-10.3-4.8L840 718.2V180c0-37.6-30.4-68-68-68H252c-37.6 0-68 30.4-68 68v538.2l-61.3-22.3c-.9-.3-1.8-.5-2.7-.5-4.4 0-8 3.6-8 8V763c0 3.3 2.1 6.3 5.3 7.5L501 910.1c7.1 2.6 14.8 2.6 21.9 0l383.8-139.5c3.2-1.2 5.3-4.2 5.3-7.5v-59.6c0-1-.2-1.9-.5-2.8zM512 837.5l-256-93.1V184h512v560.4l-256 93.1zM660.6 312h-54.5c-3 0-5.8 1.7-7.1 4.4l-84.7 168.8H511l-84.7-168.8a8 8 0 00-7.1-4.4h-55.7c-1.3 0-2.6.3-3.8 1-3.9 2.1-5.3 7-3.2 10.8l103.9 191.6h-57c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76v39h-76c-4.4 0-8 3.6-8 8v27.1c0 4.4 3.6 8 8 8h76V704c0 4.4 3.6 8 8 8h49.9c4.4 0 8-3.6 8-8v-63.5h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8h-76.3v-39h76.3c4.4 0 8-3.6 8-8v-27.1c0-4.4-3.6-8-8-8H564l103.7-191.6c.6-1.2 1-2.5 1-3.8-.1-4.3-3.7-7.9-8.1-7.9z"}}]},name:"money-collect",theme:"outlined"},ma=va,fa=function(E,P){return i.createElement(qe.Z,(0,xe.Z)((0,xe.Z)({},E),{},{ref:P,icon:ma}))};fa.displayName="MoneyCollectOutlined";var Me=i.forwardRef(fa),H=e(96534),aa=e(20640),s=e.n(aa),V=e(59749),Ue=e(55347),Ee=e(46656),ke=e(47832),Da=e(20228),l=e(11382),We=e(69764),ha=e(2752),pa=e.n(ha),sa=e(32689),Te=e(61715),a=e(85893),ga=function(E){var P,y=E.onClose,Y=E.adId,A=E.nftId,K=E.did,ie=E.onClaim,C=(0,i.useState)(),F=(0,c.Z)(C,2),u=F[0],fe=F[1],n=(0,i.useState)(!1),he=(0,c.Z)(n,2),se=he[0],Se=he[1],je=(0,i.useState)(""),$=(0,c.Z)(je,2),J=$[0],be=$[1],oe=(0,r.tT)("currentUser"),X=oe.wallet,Q=(0,r.YB)(),Ne=function(){var L=(0,_.Z)(o().mark(function D(){var O,R,I;return o().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,(0,sa.Rh)(Y,A,(0,H.Zc)(K));case 3:O=j.sent,R=O.response,I=O.data,R.ok&&fe(I),j.next=13;break;case 9:j.prev=9,j.t0=j.catch(0),console.log(j.t0),fe({});case 13:case"end":return j.stop()}},D,null,[[0,9]])}));return function(){return L.apply(this,arguments)}}();(0,i.useEffect)(function(){Ne()},[]);var pe=function(){var L=(0,_.Z)(o().mark(function D(O,R){var I,Z;return o().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(X!=null&&X.keystore){h.next=3;break}return N.default.error({key:"accessDenied",message:Q.formatMessage({id:"error.accessDenied"}),duration:null}),h.abrupt("return");case 3:return h.prev=3,I=u.scores.map(function(q){return[q.tag,q.score]}),console.log("scores",I),h.next=8,(0,Te.nm)(Y,A,(0,H.Zc)(K),I,u.referer,u.signature,u.signer_account,J,X.keystore,O,R);case 8:if(Z=h.sent,!(O&&R)){h.next=11;break}return h.abrupt("return",Z);case 11:N.default.success({message:"Claim Token Success"}),ie(),h.next=19;break;case 15:h.prev=15,h.t0=h.catch(3),console.log(h.t0),N.default.error({message:"Claim Ad Token Error",description:"".concat(h.t0)});case 19:case"end":return h.stop()}},D,null,[[3,15]])}));return function(O,R){return L.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(We.Z,{visable:!0,title:"Claim your token",content:(0,a.jsx)("div",{className:pa().claimInfoContainer,children:(0,a.jsxs)(l.Z,{spinning:!u,children:[(u==null||(P=u.scores)===null||P===void 0?void 0:P.length)===0&&(0,a.jsx)(a.Fragment,{children:"The advertiser hasn't assign you any scores. You could still claim your token."}),u&&u.scores&&u.scores.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Claim now and receive the following scores from the advertiser:"}),u.scores.map(function(L){return(0,a.jsx)("p",{children:"".concat(L.score," on ").concat(L.tag)})})]})]})}),footer:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ee.Z,{block:!0,type:"primary",shape:"round",size:"large",disabled:!u,onClick:function(){return Se(!0)},children:"Claim"})}),close:function(){return y()}}),(0,a.jsx)(Ee.Z,{visable:se,setVisable:Se,passphrase:J,setPassphrase:be,func:pe})]})},ta=ga,Ce=function(E){var P,y=E.ad,Y=E.nftId,A=E.asset,K=E.avatar,ie=E.did,C=E.adData,F=E.adImageOnLoad,u=F===void 0?function(){}:F,fe=(0,r.tT)("currentUser"),n=fe.wallet,he=(0,i.useState)(""),se=(0,c.Z)(he,2),Se=se[0],je=se[1],$=(0,i.useState)(!1),J=(0,c.Z)($,2),be=J[0],oe=J[1],X=(0,i.useState)(""),Q=(0,c.Z)(X,2),Ne=Q[0],pe=Q[1],L=(0,i.useState)(!1),D=(0,c.Z)(L,2),O=D[0],R=D[1],I=(0,i.useState)(!1),Z=(0,c.Z)(I,2),j=Z[0],h=Z[1],q=(0,r.tT)("apiWs"),de=(0,r.YB)(),S=n!=null&&n.did?"".concat(window.location.origin,"/").concat(ie,"/").concat(Y,"?referrer=").concat(n==null?void 0:n.did):"".concat(window.location.origin,"/").concat(ie,"/").concat(Y),Ma=r.m8.location.query,Fe=Ma,$e=Fe.audience,ze=Fe.scope,Ea=ze!=null?ze:"",Pe=Ea.indexOf("sign")>-1,Ze=function(){var x=(0,_.Z)(o().mark(function w(){var b,M,Oe,U,Ve,m,oa,da,Ge;return o().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(!!n&&!!(n!=null&&n.keystore))){z.next=19;break}if(b=Date.now()/1e3|0,M=JSON.stringify({alg:Pe?"SrDSA":"none",typ:"JWT"}),Oe=JSON.stringify({iss:window.location.origin,sub:n==null?void 0:n.account,aud:$e,iat:b,exp:b+30}),U="".concat((0,V.tH)(M),".").concat((0,V.tH)(Oe)),Pe){z.next=8;break}return pe("".concat(U,".")),z.abrupt("return");case 8:if(Ve=new Ue.ZP({type:"sr25519"}),m=(0,ke.Gh)((n==null?void 0:n.passphrase)||Se,n==null?void 0:n.keystore),!(m==null||!m)){z.next=13;break}return Ie.default.error(de.formatMessage({id:"error.passphrase.error"})),z.abrupt("return");case 13:oa=Ve.createFromUri(m),da=oa.sign(U),Ge="".concat(U,".").concat((0,V.tH)(da)),pe(Ge),z.next=20;break;case 19:N.default.error({key:"accessDenied",message:de.formatMessage({id:"error.accessDenied"}),duration:null});case 20:case"end":return z.stop()}},w)}));return function(){return x.apply(this,arguments)}}(),He=function(){var x=(0,_.Z)(o().mark(function w(b,M){return o().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!(b&&M)){U.next=2;break}return U.abrupt("return");case 2:window.open("".concat(y==null?void 0:y.link,"&nftId=").concat(Y,"&did=").concat(n==null?void 0:n.did,"&ad=").concat(C==null?void 0:C.id,"&t=").concat(Date.now(),"&poster=").concat(y==null?void 0:y.poster));case 3:case"end":return U.stop()}},w)}));return function(b,M){return x.apply(this,arguments)}}(),Ca=(0,H.st)(C==null?void 0:C.creator).substring(8);(0,i.useEffect)(function(){!!n&&!!(n!=null&&n.keystore)&&Ze()},[n,n==null?void 0:n.keystore]);var ia=function(){var x=(0,_.Z)(o().mark(function w(b,M,Oe){var U;return o().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,b.query.ad.payout(M,Oe);case 2:U=m.sent,U.isEmpty?h(!1):h(!0);case 4:case"end":return m.stop()}},w)}));return function(b,M,Oe){return x.apply(this,arguments)}}();return(0,i.useEffect)(function(){q&&C!==null&&C!==void 0&&C.id&&n!==null&&n!==void 0&&n.did&&ia(q,C==null?void 0:C.id,n==null?void 0:n.did)},[q,C,n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:v().container,children:(0,a.jsx)("div",{className:v().topBar,children:(0,a.jsxs)("div",{className:v().sponsored,children:[(0,a.jsx)(De.Z,{src:K||"/images/logo-round-core.svg",className:v().avatar,preview:!1,id:"avatar",fallback:"/images/logo-round-core.svg"}),(0,a.jsx)("span",{children:de.formatMessage({id:"creator.explorer.advertisement.sponsoredBy"},{did:"".concat(Ca)})})]})})}),(0,a.jsx)(ae.Z,{className:"".concat(k().card," ").concat(v().adCard),style:{maxWidth:"650px",border:"none",marginBottom:"30px"},bodyStyle:{padding:0,width:"100%"},children:(0,a.jsxs)("div",{className:v().advertisement,children:[(0,a.jsx)("div",{className:v().cover,children:(0,a.jsxs)("div",{className:v().adMedia,children:[(0,a.jsx)("div",{className:v().guideClickContainer,onClick:function(){Pe?oe(!0):He()},children:(0,a.jsx)("div",{className:v().guideClickFinger})}),(0,a.jsx)(De.Z,{src:y==null?void 0:y.media,placeholder:!0,preview:!1,style:{cursor:"pointer",width:"100%"},className:v().adMediaImg,onClick:function(){Pe?oe(!0):He()},onLoad:u})]})}),(y==null?void 0:y.instructions)&&(y==null||(P=y.instructions)===null||P===void 0?void 0:P.length)>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:v().instructions,children:[(0,a.jsx)("div",{className:v().instructionTitle,children:"Follow the instructions to improve your parami score"}),y.instructions.map(function(x){return(0,a.jsx)("div",{className:v().instruction,children:x})})]})})]})}),(0,a.jsxs)("div",{className:v().buttonContainer,children:[j&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ee.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,a.jsx)(f,{}),className:v().shareButton,onClick:(0,_.Z)(o().mark(function x(){var w;return o().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(w={title:"Para Metaverse Identity",text:de.formatMessage({id:"creator.explorer.shareMessage"}),url:S},!(navigator.canShare&&navigator.canShare(w))){M.next=12;break}return M.prev=2,M.next=5,navigator.share(w);case 5:M.next=10;break;case 7:M.prev=7,M.t0=M.catch(2),console.log(M.t0);case 10:M.next=14;break;case 12:s()(S+" ".concat(de.formatMessage({id:"creator.explorer.shareMessage"},{token:"$".concat(A==null?void 0:A.symbol)}))),Ie.default.success(de.formatMessage({id:"common.copied"}));case 14:case"end":return M.stop()}},x,null,[[2,7]])})),children:de.formatMessage({id:"creator.explorer.advertisement.share"},{token:"$".concat(A==null?void 0:A.symbol)})})}),!j&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ee.Z,{block:!0,type:"primary",shape:"round",size:"large",icon:(0,a.jsx)(Me,{}),className:v().claimBtn,onClick:function(){return R(!0)},children:"Claim your $".concat(A==null?void 0:A.symbol)})})]}),O&&(0,a.jsx)(ta,{adId:C==null?void 0:C.id,nftId:Y,did:ie,onClose:function(){return R(!1)},onClaim:function(){R(!1),h(!0)}}),(0,a.jsx)(Ee.Z,{visable:be,setVisable:oe,passphrase:Se,setPassphrase:je,func:He})]})},ya=Ce,re=e(90802),W=e.n(re),ra=e(51615),Ke=e(28943),ne=e(51625),me=e(47673),le=e(32787),Re=e(402),B=e(3887),na=e(3548),la=B.Z.Title,Ia=function(E){var P=E.nft,y=(0,r.tT)("balance"),Y=y.balance,A=(0,r.tT)("currentUser"),K=A.wallet,ie=(0,i.useState)(!1),C=(0,c.Z)(ie,2),F=C[0],u=C[1],fe=(0,i.useState)(!1),n=(0,c.Z)(fe,2),he=n[0],se=n[1],Se=(0,i.useState)("0"),je=(0,c.Z)(Se,2),$=je[0],J=je[1],be=(0,i.useState)(""),oe=(0,c.Z)(be,2),X=oe[0],Q=oe[1],Ne=(0,i.useState)(!1),pe=(0,c.Z)(Ne,2),L=pe[0],D=pe[1],O=(0,r.YB)(),R=function(){var I=(0,_.Z)(o().mark(function Z(j,h){var q;return o().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!!K&&!!(K!=null&&K.keystore))){S.next=18;break}return S.prev=1,S.next=4,(0,Ke.MW)(P.tokenAssetId,(0,V.HM)($,18).toString(),X,K==null?void 0:K.keystore,j,h);case 4:if(q=S.sent,se(!1),u(!1),!(j&&h)){S.next=9;break}return S.abrupt("return",q);case 9:S.next=16;break;case 11:return S.prev=11,S.t0=S.catch(1),N.default.error({message:S.t0.message||S.t0,duration:null}),u(!1),S.abrupt("return");case 16:S.next=19;break;case 18:N.default.error({key:"accessDenied",message:O.formatMessage({id:"error.accessDenied"}),duration:null});case 19:case"end":return S.stop()}},Z,null,[[1,11]])}));return function(j,h){return I.apply(this,arguments)}}();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.Z,{tip:O.formatMessage({id:"common.submitting"}),spinning:F,wrapperClassName:k().pageContainer,children:[(0,a.jsx)(ae.Z,{className:k().card,bodyStyle:{width:"100%"},children:(0,a.jsxs)("div",{className:v().trade,children:[(0,a.jsx)(la,{level:3,style:{fontWeight:"bold",textAlign:"center"},className:k().title,children:O.formatMessage({id:"creator.explorer.support"})}),(0,a.jsx)(le.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(v().input," bigInput"),value:$,onChange:function(Z){J(Z.target.value)},disabled:F,type:"number"}),(0,a.jsx)(Ae.Z,{}),(0,a.jsx)(ee.Z,{block:!0,shape:"round",type:"primary",size:"large",onClick:function(){se(!0)},children:O.formatMessage({id:"creator.explorer.support"})})]})}),(0,a.jsx)(We.Z,{visable:he,title:O.formatMessage({id:"creator.explorer.support"}),content:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:v().tradeModal,children:[(0,a.jsx)(le.Z,{autoFocus:!0,size:"large",placeholder:O.formatMessage({id:"stake.add.number.placeholder"}),bordered:!1,className:"".concat(v().input," bigInput"),value:$,onChange:function(Z){J(Z.target.value)},disabled:F,type:"number"}),(0,a.jsxs)("div",{className:v().field,children:[(0,a.jsx)("span",{className:v().title,children:O.formatMessage({id:"creator.explorer.availableBalance"})}),(0,a.jsx)("span",{className:v().value,children:(0,a.jsx)(na.Z,{value:Y.free})})]})]})}),footer:(0,a.jsx)(ee.Z,{block:!0,shape:"round",type:"primary",size:"large",loading:F,disabled:(0,V.HM)($,18)<=BigInt(0)||(0,V.HM)($,18)>BigInt(Y.free),onClick:function(){u(!0),D(!0)},children:O.formatMessage({id:"common.submit"})}),close:function(){se(!1)}}),(0,a.jsx)(Ee.Z,{visable:L,setVisable:D,passphrase:X,setPassphrase:Q,func:R})]})})},G=Ia,Pa=e(13580),Za=e(33044),_a=function(){var E,P,y=(0,r.tT)("apiWs"),Y=(0,r.tT)("currentUser"),A=Y.wallet,K=(0,r.tT)("bodyChange"),ie=K.bodyHeight,C=(0,i.useState)(!0),F=(0,c.Z)(C,2),u=F[0],fe=F[1],n=(0,i.useState)(""),he=(0,c.Z)(n,2),se=he[0],Se=he[1],je=(0,i.useState)(!0),$=(0,c.Z)(je,2),J=$[0],be=$[1],oe=(0,i.useState)(),X=(0,c.Z)(oe,2),Q=X[0],Ne=X[1],pe=(0,i.useState)(),L=(0,c.Z)(pe,2),D=L[0],O=L[1],R=(0,i.useState)(),I=(0,c.Z)(R,2),Z=I[0],j=I[1],h=(0,i.useState)(!1),q=(0,c.Z)(h,2),de=q[0],S=q[1],Ma=(0,i.useState)(),Fe=(0,c.Z)(Ma,2),$e=Fe[0],ze=Fe[1],Ea=(0,i.useState)(),Pe=(0,c.Z)(Ea,2),Ze=Pe[0],He=Pe[1],Ca=(0,i.useState)(null),ia=(0,c.Z)(Ca,2),x=ia[0],w=ia[1],b=(0,r.YB)(),M=(0,r.md)(),Oe=(E=document.getElementById("avatar"))===null||E===void 0?void 0:E.offsetTop,U=(P=document.getElementById("avatar"))===null||P===void 0?void 0:P.offsetLeft,Ve=document.body.clientWidth,m=(0,ra.UO)(),oa=r.m8.location.query,da=oa,Ge=da.referrer,Be=m!=null&&m.kol?"did"+(m==null?void 0:m.kol):(0,H.st)(A.did),z=(0,H.Zc)(Be),Ye=function(g){N.default.error({message:g.message,duration:null})},xa=function(){var p=(0,_.Z)(o().mark(function g(){var d;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Te.qX)(m.nftID);case 2:if(d=t.sent,d){t.next=6;break}return r.m8.replace("".concat(window.location.pathname,"/dao")),t.abrupt("return");case 6:ze(d);case 7:case"end":return t.stop()}},g)}));return function(){return p.apply(this,arguments)}}(),Ta=function(){var p=(0,_.Z)(o().mark(function g(d){var T,t,Sa,ue,Le;return o().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(!((d==null||(T=d.metadata)===null||T===void 0?void 0:T.indexOf("ipfs://"))<0)){te.next=2;break}return te.abrupt("return");case 2:return Sa=d==null||(t=d.metadata)===null||t===void 0?void 0:t.substring(7),te.next=5,fetch(ne.Z.ipfs.endpoint+Sa);case 5:return ue=te.sent,te.next=8,ue.json();case 8:if(Le=te.sent,Le){te.next=11;break}return te.abrupt("return");case 11:Le.link=Le.link+"?kol="+(0,H.Zc)(Be),Ge&&(Le.link+="&referrer="+Ge),w(Le);case 15:case"end":return te.stop()}},g)}));return function(d){return p.apply(this,arguments)}}();(0,i.useEffect)(function(){if($e)try{var p=$e.ad;if(!(p!=null&&p.metadata))return;He(p),Ta(p)}catch(g){Ye(g)}},[$e]);var Na=function(){var p=(0,_.Z)(o().mark(function g(){var d;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Ke.JI)(z);case 3:if(d=t.sent,!d.isEmpty){t.next=7;break}return be(!1),t.abrupt("return");case 7:window.location.href="".concat(window.location.origin,"/").concat(Be,"/").concat(d),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),N.default.error({message:t.t0.message,duration:null}),t.abrupt("return");case 14:case"end":return t.stop()}},g,null,[[0,10]])}));return function(){return p.apply(this,arguments)}}(),Ba=function(){var p=(0,_.Z)(o().mark(function g(){var d;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Za.q5)(z);case 2:if(d=t.sent,d){t.next=7;break}return N.default.error({message:b.formatMessage({id:"error.identity.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 7:Ne(d);case 9:case"end":return t.stop()}},g)}));return function(){return p.apply(this,arguments)}}(),La=function(){var p=(0,_.Z)(o().mark(function g(){return o().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return fe(!1),T.abrupt("return");case 2:case"end":return T.stop()}},g)}));return function(){return p.apply(this,arguments)}}();(0,i.useEffect)(function(){Q&&(document.title="".concat((Q==null?void 0:Q.nickname.toString())||Be," - Para Metaverse Identity"),La().catch(Ye))},[Q]);var Ua=function(){var p=(0,_.Z)(o().mark(function g(){var d;return o().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ke.X6)(m==null?void 0:m.nftID);case 2:if(d=t.sent,d){t.next=7;break}return N.default.error({message:b.formatMessage({id:"error.nft.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 7:if((d==null?void 0:d.owner)===z){t.next=11;break}return N.default.error({message:b.formatMessage({id:"error.nft.notFound"}),duration:null}),r.m8.goBack(),t.abrupt("return");case 11:O(d);case 12:case"end":return t.stop()}},g)}));return function(){return p.apply(this,arguments)}}();return(0,i.useEffect)(function(){var p=function(){var g=(0,_.Z)(o().mark(function d(){var T,t;return o().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,Pa.Ay)(D==null?void 0:D.tokenAssetId);case 2:if(T=ue.sent,!T.isEmpty){ue.next=6;break}return be(!1),ue.abrupt("return");case 6:t=T.toHuman(),j(t);case 8:case"end":return ue.stop()}},d)}));return function(){return g.apply(this,arguments)}}();if(D)try{p()}catch(g){Ye(g)}},[D]),(0,i.useEffect)(function(){Z&&xa().catch(Ye)},[Z]),(0,i.useEffect)(function(){if(y&&!(m!=null&&m.nftID)&&Na(),M.canWalletUser||(localStorage.setItem("parami:wallet:redirect",window.location.href),S(!0)),y)try{Ua(),Ba()}catch(p){Ye(p)}},[y]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:k().mainTopContainer,children:[J&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(De.Z,{src:se||"/images/default-avatar.svg",fallback:"/images/default-avatar.svg",className:W().avatar,style:{top:u?(ie-400)/2:Oe,left:u?(Ve-200)/2:U,width:u?200:30,height:u?200:30,animation:u?1:0,position:u?"fixed":"absolute",display:u||Ze&&Object.keys(Ze).length?"flex":"none"},preview:!1}),(0,a.jsx)("div",{className:W().loading,style:{opacity:u?1:0,zIndex:u?15:-1,height:ie,minHeight:"100vh"},children:(0,a.jsx)("span",{className:W().loadingTip,children:b.formatMessage({id:"creator.explorer.loading.tip",defaultMessage:"Let's find out more about the NFT.{br} Surprise awaits..."},{br:(0,a.jsx)("br",{})})})})]}),!J&&M.canWalletUser&&D&&(0,a.jsx)("div",{className:k().pageContainer,style:{paddingTop:50,maxWidth:1920},children:(0,a.jsx)(G,{nft:D})}),J&&Ze&&Object.keys(Ze).length>0&&(0,a.jsx)("div",{className:k().pageContainer,style:{paddingTop:50,maxWidth:"100%",backgroundColor:"rgba(244,245,246,1)"},children:(0,a.jsx)(ya,{ad:x,nftId:m==null?void 0:m.nftID,asset:Z,avatar:se,did:Be,adData:Ze,adImageOnLoad:function(){fe(!1)}})})]}),(0,a.jsx)(We.Z,{visable:de,title:b.formatMessage({id:"error.identity.notUser"}),content:(0,a.jsx)("div",{className:W().notUser,children:(0,a.jsxs)("div",{className:W().buttons,children:[(0,a.jsxs)(ee.Z,{block:!0,size:"large",type:"primary",shape:"round",className:W().button,onClick:function(){r.m8.push(ne.Z.page.createPage)},children:[(0,a.jsx)("div",{className:W().title,children:b.formatMessage({id:"index.createAccount"})}),(0,a.jsx)("span",{className:W().desc,children:b.formatMessage({id:"index.createAccount.desc"})})]}),(0,a.jsx)(Ae.Z,{children:b.formatMessage({id:"index.or"})}),(0,a.jsxs)(ee.Z,{block:!0,ghost:!0,size:"large",type:"link",shape:"round",className:"".concat(W().button," ").concat(W().buttonImport),onClick:function(){r.m8.push(ne.Z.page.recoverPage)},children:[(0,a.jsx)("div",{className:W().title,children:b.formatMessage({id:"index.importAccount"})}),(0,a.jsx)("span",{className:W().desc,children:b.formatMessage({id:"index.importAccount.desc"})})]})]})}),close:void 0,footer:!1})]})},Aa=_a}}]);
