(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(H){H.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",warning:"warning___3rkcG",warningText:"warningText___4BREX",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},11385:function(H,z,s){"use strict";s.r(z);var ea=s(20228),de=s(11382),aa=s(58024),ue=s(39144),sa=s(49111),ve=s(19650),na=s(57663),B=s(71577),ta=s(77883),F=s(70507),ra=s(12968),V=s(62462),la=s(74379),b=s(38648),U=s(3182),m=s(2824),ia=s(402),ce=s(3887),me=s(94043),P=s.n(me),i=s(67294),O=s(43581),pe=s(51615),Ee=s(55909),L=s.n(Ee),fe=s(32177),t=s.n(fe),T=s(33044),w=s(3548),Me=s(46656),G=s(57254),X=s(57651),$=s(1615),Ce=s(51625),Ie=s(13580),De=s(96534),o=s(59749),ge=s(43002),Pe=s(1115),n=s(85893),Oe=ce.Z.Title,Te=function(){var W,j,R,J=(0,O.tT)("apiWs"),he=(0,O.tT)("currentUser"),p=he.wallet,Ae=(0,O.tT)("balance"),v=Ae.balance,Se=(0,O.tT)("assets"),C=Se.assets,Be=(0,i.useState)(""),Q=(0,m.Z)(Be,2),be=Q[0],ye=Q[1],Ue=(0,i.useState)(),Y=(0,m.Z)(Ue,2),E=Y[0],Le=Y[1],We=(0,i.useState)(),q=(0,m.Z)(We,2),K=q[0],je=q[1],Re=(0,i.useState)(!0),ee=(0,m.Z)(Re,2),Ke=ee[0],I=ee[1],Ne=(0,i.useState)("ad3ToToken"),ae=(0,m.Z)(Ne,2),_=ae[0],Ze=ae[1],ke=(0,i.useState)(""),se=(0,m.Z)(ke,2),D=se[0],h=se[1],xe=(0,i.useState)(""),ne=(0,m.Z)(xe,2),g=ne[0],A=ne[1],He=(0,i.useState)(!1),te=(0,m.Z)(He,2),ze=te[0],re=te[1],Fe=(0,i.useState)(""),le=(0,m.Z)(Fe,2),N=le[0],Ve=le[1],we=(0,i.useState)(!1),ie=(0,m.Z)(we,2),Ge=ie[0],y=ie[1],Xe=(0,i.useState)(!1),oe=(0,m.Z)(Xe,2),S=oe[0],Z=oe[1],f=(0,O.YB)(),a=(0,pe.UO)(),$e=function(){var r=(0,U.Z)(P().mark(function l(u){var c,d,M;return P().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ge.yI)(u);case 3:return c=e.sent,e.next=6,(0,T.CC)(c);case 6:d=e.sent,!!(d!=null&&d.avatar)&&(d==null?void 0:d.avatar.indexOf("ipfs://"))>-1&&(M=d==null?void 0:d.avatar.substring(7),ye(Ce.Z.ipfs.endpoint+M)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},l,null,[[0,11]])}));return function(u){return r.apply(this,arguments)}}(),Je=function(){var r=(0,U.Z)(P().mark(function l(u){var c,d,M;return P().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ie.Ay)(u);case 2:if(c=e.sent,!c.isEmpty){e.next=6;break}return b.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(u)}),e.abrupt("return");case 6:return d=c.toHuman(),Le(d),e.next=10,(0,T.Vo)(u,(0,De.Vm)("1"));case 10:M=e.sent,je(M.toString()),I(!1);case 13:case"end":return e.stop()}},l)}));return function(u){return r.apply(this,arguments)}}();(0,i.useEffect)(function(){if(!(a!=null&&a.assetId)){y(!0);return}J&&(Je(a==null?void 0:a.assetId),$e(a==null?void 0:a.assetId),h(""),A(""))},[a,J]);var Qe=function(){var r=(0,U.Z)(P().mark(function l(u,c){var d,M;return P().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!!p&&!!(p!=null&&p.keystore)&&!!(a!=null&&a.assetId))){e.next=37;break}I(!0),e.t0=_,e.next=e.t0==="ad3ToToken"?5:e.t0==="tokenToAd3"?20:35;break;case 5:return e.prev=5,e.next=8,(0,$.Ht)(a==null?void 0:a.assetId,(0,o.HM)(g,18).toString(),(0,o.HM)(D,18).toString(),N,p==null?void 0:p.keystore,u,c);case 8:if(d=e.sent,I(!1),!(u&&c)){e.next=12;break}return e.abrupt("return",d);case 12:e.next=19;break;case 14:return e.prev=14,e.t1=e.catch(5),b.default.error({message:e.t1.message||e.t1,duration:null}),I(!1),e.abrupt("return");case 19:return e.abrupt("break",35);case 20:return e.prev=20,e.next=23,(0,$.Ro)(a==null?void 0:a.assetId,(0,o.HM)(g,18).toString(),(0,o.HM)(D,18).toString(),N,p==null?void 0:p.keystore,u,c);case 23:if(M=e.sent,I(!1),!(u&&c)){e.next=27;break}return e.abrupt("return",M);case 27:e.next=34;break;case 29:return e.prev=29,e.t2=e.catch(20),b.default.error({message:e.t2.message||e.t2,duration:null}),I(!1),e.abrupt("return");case 34:return e.abrupt("break",35);case 35:e.next=39;break;case 37:b.default.error({key:"accessDenied",message:f.formatMessage({id:"error.accessDenied"}),duration:null}),I(!1);case 39:case"end":return e.stop()}},l,null,[[5,14],[20,29]])}));return function(u,c){return r.apply(this,arguments)}}(),k=(0,i.useCallback)(function(r){a!=null&&a.assetId&&(_==="ad3ToToken"&&(0,T.hM)(a==null?void 0:a.assetId,(0,o.HM)(r,18).toString()).then(function(l){A((0,o.mI)(l,18))}),_==="tokenToAd3"&&(0,T.__)(a==null?void 0:a.assetId,(0,o.HM)(r,18).toString()).then(function(l){A((0,o.mI)(l,18))}))},[a,_]),x=(0,i.useCallback)(function(r){a!=null&&a.assetId&&(_==="tokenToAd3"&&(0,T.Vo)(a==null?void 0:a.assetId,(0,o.HM)(r,18).toString()).then(function(l){h((0,o.mI)(l,18))}),_==="ad3ToToken"&&(0,T.UG)(a==null?void 0:a.assetId,(0,o.HM)(r,18).toString()).then(function(l){h((0,o.mI)(l,18))}))},[a,_]),Ye=(0,i.useCallback)(function(){var r=(0,o.mI)(v==null?void 0:v.free,18);h(r),k(r)},[v,_,k]),qe=(0,i.useCallback)(function(){if(a!=null&&a.assetId&&C){var r,l=(0,o.mI)((r=C.get(a==null?void 0:a.assetId))===null||r===void 0?void 0:r.balance,18);A(l),x(l)}},[_,a,C,x]);return(0,i.useEffect)(function(){if(_==="ad3ToToken"){if(v!=null&&v.free&&D){Z((0,o.HM)(D,18)>BigInt(v.free));return}}else if(a!=null&&a.assetId&&C&&g){var r;Z((0,o.HM)(g,18)>BigInt((r=C.get(a==null?void 0:a.assetId))===null||r===void 0?void 0:r.balance));return}Z(!1)},[_,v,D,g,a,C]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(de.Z,{tip:f.formatMessage({id:"common.loading"}),spinning:Ke,wrapperClassName:L().spinContainer,children:(0,n.jsx)(ue.Z,{className:L().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,n.jsxs)("div",{className:t().trade,children:[(0,n.jsx)(Oe,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:L().title,children:f.formatMessage({id:"creator.explorer.trade"})}),(0,n.jsxs)("div",{className:t().pairCoins,style:{flexFlow:_==="ad3ToToken"?"column":"column-reverse"},children:[(0,n.jsxs)("div",{className:t().pairCoinsItem,children:[(0,n.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,n.jsxs)("div",{className:t().pairCoin,children:[(0,n.jsx)(V.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,n.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,n.jsx)(F.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:D,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(l){h(l),k(l)}})]}),(0,n.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,n.jsxs)("span",{className:"".concat(t().balance," ").concat(_==="ad3ToToken"&&S?t().warning:""),children:[f.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,n.jsx)(w.Z,{value:v==null?void 0:v.free}),_==="ad3ToToken"&&S&&(0,n.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,n.jsx)(B.Z,{type:"link",size:"middle",className:t().maxButton,onClick:Ye,children:f.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,n.jsx)(B.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,n.jsx)(G.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){Ze(_==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),h(""),A("")}}),(0,n.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,n.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,n.jsxs)("div",{className:t().pairCoin,onClick:function(){return y(!0)},children:[(0,n.jsx)(V.Z,{src:be||"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,n.jsx)("span",{className:t().pairCoinsItemLabel,children:E==null?void 0:E.symbol}),(0,n.jsx)(G.Z,{className:t().downIcon})]}),(0,n.jsx)(F.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:g,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(l){A(l),x(l)}})]}),(0,n.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,n.jsxs)("span",{className:"".concat(t().balance," ").concat(_==="tokenToAd3"&&S?t().warning:""),children:[f.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,n.jsx)(X.Z,{value:(W=(j=C.get((R=a==null?void 0:a.assetId)!==null&&R!==void 0?R:""))===null||j===void 0?void 0:j.balance)!==null&&W!==void 0?W:"",symbol:E==null?void 0:E.symbol}),_==="tokenToAd3"&&S&&(0,n.jsx)("span",{className:t().warningText,children:"(insufficient balance)"})]}),(0,n.jsx)(B.Z,{type:"link",size:"middle",className:t().maxButton,onClick:qe,children:f.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,n.jsx)("div",{className:t().pairCoinsFlat,children:(0,n.jsxs)(ve.Z,{children:[(0,n.jsx)(X.Z,{value:(0,o.HM)("1",18).toString(),symbol:E==null?void 0:E.symbol}),(0,n.jsx)("span",{children:"\u2248"}),(0,n.jsx)(w.Z,{value:K!=null?K:""})]})}),(0,n.jsx)(B.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!D||!g||S,onClick:function(){re(!0)},children:f.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,n.jsx)(Me.Z,{visable:ze,setVisable:re,passphrase:N,setPassphrase:Ve,func:Qe}),Ge&&(0,n.jsx)(Pe.Z,{onClose:function(){return y(!1)},onSelectAsset:function(l){O.m8.push("/swap/".concat(l.id)),y(!1)}})]})};z.default=Te}}]);
