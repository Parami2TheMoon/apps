(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[7485],{32177:function(G){G.exports={trade:"trade___f-hm1",pairCoins:"pairCoins___1MCUa",pairCoinsItem:"pairCoinsItem___3vJ5H",tokenCoin:"tokenCoin___1NNyk",pairCoin:"pairCoin___2zcBp",downIcon:"downIcon___I9VTR",pairCoinsSelect:"pairCoinsSelect___3ywAj",pairCoinsItemIcon:"pairCoinsItemIcon___12I2L",pairCoinsItemLabel:"pairCoinsItemLabel___3yr8a",pairCoinsItemInput:"pairCoinsItemInput___1f5IS",pairCoinsBalance:"pairCoinsBalance___2Nr_K",balance:"balance___1EKab",maxButton:"maxButton___WQyhO",pairCoinsSwitchButton:"pairCoinsSwitchButton___3uCJD",pairCoinsFlat:"pairCoinsFlat___2pDVm",submitButton:"submitButton___28swB",tradeModal:"tradeModal___-2nNj",input:"input___3rDPE",field:"field___2SzQp",title:"title___SeO2h",value:"value___1bnZn"}},15126:function(G){G.exports={assetsContainer:"assetsContainer___1wFua",noAssets:"noAssets___2Gid1",title:"title___swkHP",field:"field___3Hj7T",icon:"icon___39vsT",name:"name___3pUYc",value:"value___1rjpK"}},10070:function(G,de,n){"use strict";n.r(de),n.d(de,{default:function(){return Ue}});var na=n(20228),ce=n(11382),ra=n(58024),Te=n(39144),ta=n(49111),xe=n(19650),la=n(57663),D=n(71577),ia=n(77883),ve=n(70507),oa=n(12968),se=n(62462),ua=n(74379),K=n(38648),z=n(3182),g=n(2824),da=n(402),ke=n(3887),Be=n(94043),C=n.n(Be),i=n(67294),b=n(43581),He=n(51615),Fe=n(55909),ne=n.n(Fe),De=n(32177),t=n.n(De),T=n(33044),me=n(3548),ze=n(46656),pe=n(57254),re=n(57651),fe=n(1615),he=n(51625),ge=n(13580),Le=n(96534),d=n(59749),Ce=n(43002),Se=n(11849),Pe=n(69764),$e=n(15126),N=n.n($e),e=n(85893),Ee=function(k){var B=k.onClose,L=k.onSelectAsset,Y=(0,b.YB)(),H=(0,b.tT)("apiWs"),p=(0,b.tT)("currentUser"),P=p.wallet,A=(0,i.useState)(),J=(0,g.Z)(A,2),v=J[0],te=J[1],Q=function(){var S=(0,z.Z)(C().mark(function $(){var X,E;return C().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!H){y.next=8;break}return y.next=3,(0,ge.jd)();case 3:return X=y.sent,y.next=6,Promise.all(X.map(function(){var le=(0,z.Z)(C().mark(function W(x){var w,q,O,U,I,f,F,c;return C().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,H.query.assets.account(Number(x.id),P==null?void 0:P.account);case 2:return q=o.sent,O=(w=q.toHuman())!==null&&w!==void 0?w:{balance:""},U=O.balance,U.replaceAll(",",""),o.prev=5,o.next=8,(0,Ce.yI)(x.id);case 8:return I=o.sent,o.next=11,(0,T.CC)(I);case 11:return f=o.sent,F="",!!(f!=null&&f.avatar)&&(f==null?void 0:f.avatar.indexOf("ipfs://"))>-1&&(c=f==null?void 0:f.avatar.substring(7),F=he.Z.ipfs.endpoint+c),o.abrupt("return",(0,Se.Z)((0,Se.Z)({},x),{},{icon:F,balance:U.replaceAll(",","")}));case 17:return o.prev=17,o.t0=o.catch(5),o.abrupt("return",null);case 20:case"end":return o.stop()}},W,null,[[5,17]])}));return function(W){return le.apply(this,arguments)}}()));case 6:E=y.sent,te(E.filter(Boolean));case 8:case"end":return y.stop()}},$)}));return function(){return S.apply(this,arguments)}}();return(0,i.useEffect)(function(){H&&Q()},[H]),(0,e.jsx)(Pe.Z,{visable:!0,title:"Select Asset",content:(0,e.jsxs)("div",{className:N().assetsContainer,children:[!v&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ce.Z,{tip:"Loading Assets"})}),v&&v.length===0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:N().noAssets,children:"Could not find any assets."})}),v&&v.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:N().title,children:[(0,e.jsx)("span",{children:"Name"}),(0,e.jsx)("span",{children:"Available Balance"})]}),v==null?void 0:v.map(function(S){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:N().field,onClick:function(){return L(S.id)},children:[(0,e.jsxs)("span",{className:N().title,children:[(0,e.jsx)(se.Z,{className:N().icon,src:S.icon||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:N().name,children:S.name})]}),(0,e.jsx)("span",{className:N().value,children:(0,e.jsx)(re.Z,{value:S.balance,symbol:S.symbol})})]},S.id)})})]})]}),close:B,footer:(0,e.jsx)(D.Z,{block:!0,type:"primary",shape:"round",size:"large",onClick:B,children:Y.formatMessage({id:"common.close"})})})},We=Ee,we=ke.Z.Title,Oe=function(){var k,B,L,Y=(0,b.tT)("apiWs"),H=(0,b.tT)("currentUser"),p=H.wallet,P=(0,b.tT)("balance"),A=P.balance,J=(0,b.tT)("assets"),v=J.assets,te=(0,i.useState)(""),Q=(0,g.Z)(te,2),S=Q[0],$=Q[1],X=(0,i.useState)(),E=(0,g.Z)(X,2),j=E[0],y=E[1],le=(0,i.useState)(),W=(0,g.Z)(le,2),x=W[0],w=W[1],q=(0,i.useState)(!0),O=(0,g.Z)(q,2),U=O[0],I=O[1],f=(0,i.useState)("ad3ToToken"),F=(0,g.Z)(f,2),c=F[0],je=F[1],o=(0,i.useState)(""),ye=(0,g.Z)(o,2),_=ye[0],V=ye[1],Re=(0,i.useState)(""),Ie=(0,g.Z)(Re,2),ee=Ie[0],R=Ie[1],Ge=(0,i.useState)(!1),be=(0,g.Z)(Ge,2),Ke=be[0],Ae=be[1],Ye=(0,i.useState)(""),Ne=(0,g.Z)(Ye,2),ie=Ne[0],Je=Ne[1],Qe=(0,i.useState)(!1),Ze=(0,g.Z)(Qe,2),Xe=Ze[0],ae=Ze[1],Z=(0,b.YB)(),s=(0,He.UO)(),qe=function(){var l=(0,z.Z)(C().mark(function r(m){var h,u,M;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,Ce.yI)(m);case 3:return h=a.sent,a.next=6,(0,T.CC)(h);case 6:u=a.sent,!!(u!=null&&u.avatar)&&(u==null?void 0:u.avatar.indexOf("ipfs://"))>-1&&(M=u==null?void 0:u.avatar.substring(7),$(he.Z.ipfs.endpoint+M)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.error(a.t0);case 14:case"end":return a.stop()}},r,null,[[0,11]])}));return function(m){return l.apply(this,arguments)}}(),_e=function(){var l=(0,z.Z)(C().mark(function r(m){var h,u,M;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,ge.Ay)(m);case 2:if(h=a.sent,!h.isEmpty){a.next=6;break}return K.default.error({message:"Loading Asset Error",description:"tokenAssetId: ".concat(m)}),a.abrupt("return");case 6:return u=h.toHuman(),y(u),a.next=10,(0,T.Vo)(m,(0,Le.Vm)("1"));case 10:M=a.sent,w(M.toString()),I(!1);case 13:case"end":return a.stop()}},r)}));return function(m){return l.apply(this,arguments)}}();(0,i.useEffect)(function(){if(!(s!=null&&s.assetId)){ae(!0);return}Y&&(_e(s==null?void 0:s.assetId),qe(s==null?void 0:s.assetId))},[s,Y]);var ea=function(){var l=(0,z.Z)(C().mark(function r(m,h){var u,M;return C().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!!p&&!!(p!=null&&p.keystore)&&!!(s!=null&&s.assetId))){a.next=37;break}I(!0),a.t0=c,a.next=a.t0==="ad3ToToken"?5:a.t0==="tokenToAd3"?20:35;break;case 5:return a.prev=5,a.next=8,(0,fe.Ht)(s==null?void 0:s.assetId,(0,d.HM)(ee,18).toString(),(0,d.HM)(_,18).toString(),ie,p==null?void 0:p.keystore,m,h);case 8:if(u=a.sent,I(!1),!(m&&h)){a.next=12;break}return a.abrupt("return",u);case 12:a.next=19;break;case 14:return a.prev=14,a.t1=a.catch(5),K.default.error({message:a.t1.message||a.t1,duration:null}),I(!1),a.abrupt("return");case 19:return a.abrupt("break",35);case 20:return a.prev=20,a.next=23,(0,fe.Ro)(s==null?void 0:s.assetId,(0,d.HM)(ee,18).toString(),(0,d.HM)(_,18).toString(),ie,p==null?void 0:p.keystore,m,h);case 23:if(M=a.sent,I(!1),!(m&&h)){a.next=27;break}return a.abrupt("return",M);case 27:a.next=34;break;case 29:return a.prev=29,a.t2=a.catch(20),K.default.error({message:a.t2.message||a.t2,duration:null}),I(!1),a.abrupt("return");case 34:return a.abrupt("break",35);case 35:a.next=39;break;case 37:K.default.error({key:"accessDenied",message:Z.formatMessage({id:"error.accessDenied"}),duration:null}),I(!1);case 39:case"end":return a.stop()}},r,null,[[5,14],[20,29]])}));return function(m,h){return l.apply(this,arguments)}}(),oe=(0,i.useCallback)(function(l){s!=null&&s.assetId&&(c==="ad3ToToken"&&(0,T.hM)(s==null?void 0:s.assetId,(0,d.HM)(l,18).toString()).then(function(r){R((0,d.mI)(r,18))}),c==="tokenToAd3"&&(0,T.__)(s==null?void 0:s.assetId,(0,d.HM)(l,18).toString()).then(function(r){R((0,d.mI)(r,18))}))},[s,c]),ue=(0,i.useCallback)(function(l){s!=null&&s.assetId&&(c==="tokenToAd3"&&(0,T.Vo)(s==null?void 0:s.assetId,(0,d.HM)(l,18).toString()).then(function(r){V((0,d.mI)(r,18))}),c==="ad3ToToken"&&(0,T.UG)(s==null?void 0:s.assetId,(0,d.HM)(l,18).toString()).then(function(r){V((0,d.mI)(r,18))}))},[s,c]),aa=(0,i.useCallback)(function(){var l=(0,d.mI)(A==null?void 0:A.free,18);V(l),oe(l)},[A,c,oe]),sa=(0,i.useCallback)(function(){if(s!=null&&s.assetId&&v){var l,r=(0,d.mI)((l=v.get(s==null?void 0:s.assetId))===null||l===void 0?void 0:l.balance,18);R(r),ue(r)}},[c,s,v,ue]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ce.Z,{tip:Z.formatMessage({id:"common.loading"}),spinning:U,wrapperClassName:ne().spinContainer,children:(0,e.jsx)(Te.Z,{className:ne().card,bodyStyle:{width:"100%",padding:"24px 8px"},style:{marginTop:50,maxWidth:"600px"},children:(0,e.jsxs)("div",{className:t().trade,children:[(0,e.jsx)(we,{level:5,style:{fontWeight:"bold",textAlign:"center"},className:ne().title,children:Z.formatMessage({id:"creator.explorer.trade"})}),(0,e.jsxs)("div",{className:t().pairCoins,style:{flexFlow:c==="ad3ToToken"?"column":"column-reverse"},children:[(0,e.jsxs)("div",{className:t().pairCoinsItem,children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,children:[(0,e.jsx)(se.Z,{src:"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:"AD3"})]}),(0,e.jsx)(ve.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:_,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){V(r),oe(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[Z.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(me.Z,{value:A==null?void 0:A.free})]}),(0,e.jsx)(D.Z,{type:"link",size:"middle",className:t().maxButton,onClick:aa,children:Z.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]}),(0,e.jsx)(D.Z,{type:"primary",shape:"circle",size:"middle",icon:(0,e.jsx)(pe.Z,{}),className:t().pairCoinsSwitchButton,onClick:function(){je(c==="ad3ToToken"?"tokenToAd3":"ad3ToToken"),V(""),R("")}}),(0,e.jsxs)("div",{className:"".concat(t().pairCoinsItem," ").concat(t().tokenCoin),children:[(0,e.jsxs)("div",{className:t().pairCoinsSelect,children:[(0,e.jsxs)("div",{className:t().pairCoin,onClick:function(){return ae(!0)},children:[(0,e.jsx)(se.Z,{src:S||"/images/logo-round-core.svg",preview:!1,className:t().pairCoinsItemIcon}),(0,e.jsx)("span",{className:t().pairCoinsItemLabel,children:j==null?void 0:j.symbol}),(0,e.jsx)(pe.Z,{className:t().downIcon})]}),(0,e.jsx)(ve.Z,{autoFocus:!1,size:"large",placeholder:"0",bordered:!1,value:ee,className:t().pairCoinsItemInput,stringMode:!0,onChange:function(r){R(r),ue(r)}})]}),(0,e.jsxs)("div",{className:t().pairCoinsBalance,children:[(0,e.jsxs)("span",{className:t().balance,children:[Z.formatMessage({id:"creator.explorer.trade.balance",defaultMessage:"Balance"}),": ",(0,e.jsx)(re.Z,{value:(k=(B=v.get((L=s==null?void 0:s.assetId)!==null&&L!==void 0?L:""))===null||B===void 0?void 0:B.balance)!==null&&k!==void 0?k:"",symbol:j==null?void 0:j.symbol})]}),(0,e.jsx)(D.Z,{type:"link",size:"middle",className:t().maxButton,onClick:sa,children:Z.formatMessage({id:"creator.explorer.trade.balance.max",defaultMessage:"MAX"})})]})]})]}),(0,e.jsx)("div",{className:t().pairCoinsFlat,children:(0,e.jsxs)(xe.Z,{children:[(0,e.jsx)(re.Z,{value:(0,d.HM)("1",18).toString(),symbol:j==null?void 0:j.symbol}),(0,e.jsx)("span",{children:"\u2248"}),(0,e.jsx)(me.Z,{value:x!=null?x:""})]})}),(0,e.jsx)(D.Z,{block:!0,type:"primary",size:"large",shape:"round",className:t().submitButton,disabled:!_||!ee,onClick:function(){Ae(!0)},children:Z.formatMessage({id:"creator.explorer.trade.swap",defaultMessage:"Swap"})})]})})}),(0,e.jsx)(ze.Z,{visable:Ke,setVisable:Ae,passphrase:ie,setPassphrase:Je,func:ea}),Xe&&(0,e.jsx)(We,{onClose:function(){return ae(!1)},onSelectAsset:function(r){b.m8.push("/swap/".concat(r)),ae(!1)}})]})},Ue=Oe}}]);
